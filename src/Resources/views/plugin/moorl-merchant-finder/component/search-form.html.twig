<form data-moorl-merchant-finder="true"
      action="{{ path('moorl.merchant-finder.search') }}"
      method="post"
      data-form-csrf-handler="true">
    {{ sw_csrf('moorl.merchant-finder.search') }}

    <input type="hidden" name="items" value="{{ element.config.items.value }}">

    {% block element_moorl_merchant_finder_form_inner %}
        <div class="row form-row">
            {% if shopware.config.MoorlMerchantFinder.config.enableTextSearch %}
                {% block element_moorl_merchant_finder_form_inner_search %}
                    <div class="form-group col-6 col-lg">
                        <input name="term" class="form-control" placeholder="{{ "moorl-merchant-finder.searchFor"|trans }}">
                    </div>
                {% endblock %}
            {% endif %}
            {% if element.data.countries %}
                {% block element_moorl_merchant_finder_form_inner_countries %}
                    <div class="form-group col-6 col-lg">
                        <select name="countryCode" class="form-control">
                            <option value="">{{ "moorl-merchant-finder.allCountries"|trans }}</option>
                            {% for item in element.data.countries %}
                                <option {% if item.value == 'DE' %}selected{% endif %} value="{{ item.value }}">{{ item.label }} ({{ item.count }})</option>
                            {% endfor %}
                        </select>
                    </div>
                {% endblock %}
            {% endif %}
            {% block element_moorl_merchant_finder_form_inner_zipcode %}
                <div class="form-group col-6 col-lg">
                    <div class="input-group">
                        {% if shopware.config.MoorlMerchantFinder.config.positionRequest %}
                            <div class="input-group-prepend">
                                <button class="btn btn-primary"
                                        type="button"
                                        name="location"
                                        data-toggle="tooltip"
                                        data-placement="top"
                                        title="{{ "moorl-merchant-finder.myLocation"|trans }}">
                                    <i class="fas fa-crosshairs"></i>
                                </button>
                            </div>
                        {% endif %}
                        <input name="zipcode" class="form-control" placeholder="{{ "moorl-merchant-finder.zipcodeCity"|trans }}">
                    </div>
                </div>
            {% endblock %}
            {% block element_moorl_merchant_finder_form_inner_distance %}
                <div class="form-group col-6 col-lg">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">{{ "moorl-merchant-finder.radius"|trans }}</span>
                        </div>
                        <select name="distance" class="form-control">
                            {% for distance in shopware.config.MoorlMerchantFinder.config.positionDistance|split(',') %}
                                <option value="{{ distance }}">{{ distance }}</option>
                            {% endfor %}
                        </select>
                        <div class="input-group-append">
                            <span class="input-group-text">{{ "moorl-merchant-finder.km"|trans }}</span>
                        </div>
                    </div>
                </div>
            {% endblock %}
            {% if element.data.tags and element.config.tagFilter.value %}
                {% block element_moorl_merchant_finder_form_inner_tags %}
                    <div class="form-group col-6 col-lg">
                        <select name="tags" class="form-control">
                            <option value="">{{ "moorl-merchant-finder.allTags"|trans }}</option>
                            {% for item in element.data.tags %}
                                <option {% if item.value == element.config.tagId.value %}selected{% endif %} value="{{ item.value }}">{{ item.label }} ({{ item.count }})</option>
                            {% endfor %}
                        </select>
                    </div>
                {% endblock %}
            {% endif %}
            {% if element.data.productManufacturers and element.config.manufacturerFilter.value %}
                {% block element_moorl_merchant_finder_form_inner_manufacturers %}
                    <div class="form-group col-6 col-lg">
                        <select name="productManufacturerId" class="form-control">
                            <option value="">{{ "moorl-merchant-finder.allManufacturers"|trans }}</option>
                            {% for item in element.data.productManufacturers %}
                                <option {% if item.value == element.config.manufacturerId.value %}selected{% endif %} value="{{ item.value }}">{{ item.label }} ({{ item.count }})</option>
                            {% endfor %}
                        </select>
                    </div>
                {% endblock %}
            {% endif %}
            {% if element.data.categories and element.config.categoryFilter.value %}
                {% block element_moorl_merchant_finder_form_inner_categories %}
                    <div class="form-group col-6 col-lg">
                        <select name="categoryId" class="form-control">
                            <option value="">{{ "moorl-merchant-finder.allCategories"|trans }}</option>
                            {% for item in element.data.categories %}
                                <option {% if item.value == element.config.categoryId.value %}selected{% endif %} value="{{ item.value }}">{{ item.label }} ({{ item.count }})</option>
                            {% endfor %}
                        </select>
                    </div>
                {% endblock %}
            {% endif %}
            {% block element_moorl_merchant_finder_form_inner_submit %}
                <div class="form-group col-6 col-lg">
                    <button type="submit" class="btn btn-block btn-primary">
                        <i class="fas fa-search-location"></i>
                        {{ "moorl-merchant-finder.search"|trans }}
                    </button>
                </div>
            {% endblock %}
        </div>
        {% block element_moorl_merchant_finder_form_inner_additional %}
            {% if shopware.config.MoorlMerchantFinder.config.searchRules %}
                <div class="row form-row">
                    {% for rule in shopware.config.MoorlMerchantFinder.config.searchRules %}
                        <div class="form-group col-6 col-lg">
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" id="{{ rule }}Check" name="rules[]" value="{{ rule }}" checked>
                                <label class="custom-control-label" for="{{ rule }}Check">{{ "moorl-merchant-finder.searchRules.#{rule}"|trans }}</label>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endblock %}
        {% block element_moorl_merchant_finder_form_result_info %}
            {% if shopware.config.MoorlMerchantFinder.config.resultInfo %}
                <div class="mb-3 text-muted text-center moorl-merchant-finder-result-info">&nbsp;</div>
            {% endif %}
        {% endblock %}
    {% endblock %}
</form>

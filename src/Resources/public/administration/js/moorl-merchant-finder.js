!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="undefined/bundles/administration/",n(n.s=2356)}({0:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"Module",function(){return r}),n.d(e,"Component",function(){return o}),n.d(e,"Template",function(){return s}),n.d(e,"Application",function(){return a}),n.d(e,"State",function(){return l}),n.d(e,"Mixin",function(){return u}),n.d(e,"Filter",function(){return c}),n.d(e,"Directive",function(){return h}),n.d(e,"Locale",function(){return p}),n.d(e,"Shortcut",function(){return f}),n.d(e,"Entity",function(){return d}),n.d(e,"ApiService",function(){return g}),n.d(e,"EntityDefinition",function(){return y}),n.d(e,"WorkerNotification",function(){return v}),n.d(e,"Defaults",function(){return m});var i=t.Shopware;try{i=window.Shopware}catch(t){}void 0===i&&(i=n(116));var r={register:i.Module.register,getModuleRegistry:i.Module.getModuleRegistry,getModuleRoutes:i.Module.getModuleRoutes,getModuleByEntityName:i.Module.getModuleByEntityName},o={register:i.Component.register,extend:i.Component.extend,override:i.Component.override,build:i.Component.build,getTemplate:i.Component.getTemplate,getComponentRegistry:i.Component.getComponentRegistry,getComponentHelper:i.Component.getComponentHelper},s={register:i.Template.register,extend:i.Template.extend,override:i.Template.override,getRenderedTemplate:i.Template.getRenderedTemplate,find:i.Template.find,findOverride:i.Template.findOverride},a=i.Application,l={registerStore:i.State.registerStore,getStore:i.State.getStore,getStoreRegistry:i.State.getStoreRegistry},u={register:i.Mixin.register,getByName:i.Mixin.getByName},c={register:i.Filter.register,getByName:i.Filter.getByName},h={register:i.Directive.register,getByName:i.Directive.getByName},p={register:i.Locale.register,getByName:i.Locale.getByName,extend:i.Locale.extend},f={register:i.Shortcut.register,getPathByCombination:i.Shortcut.getPathByCombination,getShortcutRegistry:i.Shortcut.getShortcutRegistry},d={addDefinition:i.Entity.addDefinition,getDefinition:i.Entity.getDefinition,getDefinitionRegistry:i.Entity.getDefinitionRegistry,getRawEntityObject:i.Entity.getRawEntityObject,getPropertyBlacklist:i.Entity.getPropertyBlacklist,getRequiredProperties:i.Entity.getRequiredProperties,getAssociatedProperties:i.Entity.getAssociatedProperties,getTranslatableProperties:i.Entity.getTranslatableProperties},g={register:i.ApiService.register,getByName:i.ApiService.getByName,getRegistry:i.ApiService.getRegistry,getServices:i.ApiService.getServices,has:i.ApiService.has},y={getScalarTypes:i.EntityDefinition.getScalarTypes,getJsonTypes:i.EntityDefinition.getJsonTypes,getDefinitionRegistry:i.EntityDefinition.getDefinitionRegistry,get:i.EntityDefinition.get,add:i.EntityDefinition.add,remove:i.EntityDefinition.remove,getTranslatedFields:i.EntityDefinition.getTranslatedFields,getAssociationFields:i.EntityDefinition.getAssociationFields,getRequiredFields:i.EntityDefinition.getRequiredFields},v={register:i.WorkerNotification.register,getRegistry:i.WorkerNotification.getRegistry,add:i.WorkerNotification.add,remove:i.WorkerNotification.remove,override:i.WorkerNotification.override,initialize:i.WorkerNotification.initialize},m={systemLanguageId:"2fbb5fe2e29a4d70aa5854ce7ce3e20b",defaultLanguageIds:["2fbb5fe2e29a4d70aa5854ce7ce3e20b"],versionId:"0fa91ce3e96a4bc2be4bd9ce752c3425"};e.default={Module:r,Component:o,Template:s,Application:a,State:l,Mixin:u,Entity:d,Filter:c,Directive:h,Locale:p,Shortcut:f,ApiService:g,EntityDefinition:y,Defaults:m,WorkerNotification:v}}.call(this,n(24))},1:function(t,e,n){"use strict";function i(t,e){for(var n=[],i={},r=0;r<e.length;r++){var o=e[r],s=o[0],a={id:t+":"+r,css:o[1],media:o[2],sourceMap:o[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}n.r(e),n.d(e,"default",function(){return d});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},s=r&&(document.head||document.getElementsByTagName("head")[0]),a=null,l=0,u=!1,c=function(){},h=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function d(t,e,n,r){u=n,h=r||{};var s=i(t,e);return g(s),function(e){for(var n=[],r=0;r<s.length;r++){var a=s[r];(l=o[a.id]).refs--,n.push(l)}e?g(s=i(t,e)):s=[];for(r=0;r<n.length;r++){var l;if(0===(l=n[r]).refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete o[l.id]}}}}function g(t){for(var e=0;e<t.length;e++){var n=t[e],i=o[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(v(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(v(n.parts[r]));o[n.id]={id:n.id,refs:1,parts:s}}}}function y(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function v(t){var e,n,i=document.querySelector("style["+p+'~="'+t.id+'"]');if(i){if(u)return c;i.parentNode.removeChild(i)}if(f){var r=l++;i=a||(a=y()),e=x.bind(null,i,r,!1),n=x.bind(null,i,r,!0)}else i=y(),e=function(t,e){var n=e.css,i=e.media,r=e.sourceMap;i&&t.setAttribute("media",i);h.ssrId&&t.setAttribute(p,e.id);r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}var m,_=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")});function x(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=_(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}},100:function(t,e,n){var i=n(16),r=n(13),o="[object Boolean]";t.exports=function(t){return!0===t||!1===t||r(t)&&i(t)==o}},101:function(t,e,n){var i=n(114);t.exports=function(t,e){return i(t,e)}},102:function(t,e,n){var i=n(16),r=n(13),o="[object Number]";t.exports=function(t){return"number"==typeof t||r(t)&&i(t)==o}},103:function(t,e,n){var i=n(67),r=n(15),o="Expected a function";t.exports=function(t,e,n){var s=!0,a=!0;if("function"!=typeof t)throw new TypeError(o);return r(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),i(t,e,{leading:s,maxWait:e,trailing:a})}},104:function(t,e,n){var i=n(224),r=1/0;t.exports=function(t){return null!=t&&t.length?i(t,r):[]}},105:function(t,e,n){var i=n(226),r=n(227);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[o+a]=s[a];return e||r(s)}},106:function(t,e,n){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"hash",value:function(e){return t.hex(t.md51(e))}},{key:"md5cycle",value:function(e,n){var i=e[0],r=e[1],o=e[2],s=e[3];i=t.ff(i,r,o,s,n[0],7,-680876936),s=t.ff(s,i,r,o,n[1],12,-389564586),o=t.ff(o,s,i,r,n[2],17,606105819),r=t.ff(r,o,s,i,n[3],22,-1044525330),i=t.ff(i,r,o,s,n[4],7,-176418897),s=t.ff(s,i,r,o,n[5],12,1200080426),o=t.ff(o,s,i,r,n[6],17,-1473231341),r=t.ff(r,o,s,i,n[7],22,-45705983),i=t.ff(i,r,o,s,n[8],7,1770035416),s=t.ff(s,i,r,o,n[9],12,-1958414417),o=t.ff(o,s,i,r,n[10],17,-42063),r=t.ff(r,o,s,i,n[11],22,-1990404162),i=t.ff(i,r,o,s,n[12],7,1804603682),s=t.ff(s,i,r,o,n[13],12,-40341101),o=t.ff(o,s,i,r,n[14],17,-1502002290),r=t.ff(r,o,s,i,n[15],22,1236535329),i=t.gg(i,r,o,s,n[1],5,-165796510),s=t.gg(s,i,r,o,n[6],9,-1069501632),o=t.gg(o,s,i,r,n[11],14,643717713),r=t.gg(r,o,s,i,n[0],20,-373897302),i=t.gg(i,r,o,s,n[5],5,-701558691),s=t.gg(s,i,r,o,n[10],9,38016083),o=t.gg(o,s,i,r,n[15],14,-660478335),r=t.gg(r,o,s,i,n[4],20,-405537848),i=t.gg(i,r,o,s,n[9],5,568446438),s=t.gg(s,i,r,o,n[14],9,-1019803690),o=t.gg(o,s,i,r,n[3],14,-187363961),r=t.gg(r,o,s,i,n[8],20,1163531501),i=t.gg(i,r,o,s,n[13],5,-1444681467),s=t.gg(s,i,r,o,n[2],9,-51403784),o=t.gg(o,s,i,r,n[7],14,1735328473),r=t.gg(r,o,s,i,n[12],20,-1926607734),i=t.hh(i,r,o,s,n[5],4,-378558),s=t.hh(s,i,r,o,n[8],11,-2022574463),o=t.hh(o,s,i,r,n[11],16,1839030562),r=t.hh(r,o,s,i,n[14],23,-35309556),i=t.hh(i,r,o,s,n[1],4,-1530992060),s=t.hh(s,i,r,o,n[4],11,1272893353),o=t.hh(o,s,i,r,n[7],16,-155497632),r=t.hh(r,o,s,i,n[10],23,-1094730640),i=t.hh(i,r,o,s,n[13],4,681279174),s=t.hh(s,i,r,o,n[0],11,-358537222),o=t.hh(o,s,i,r,n[3],16,-722521979),r=t.hh(r,o,s,i,n[6],23,76029189),i=t.hh(i,r,o,s,n[9],4,-640364487),s=t.hh(s,i,r,o,n[12],11,-421815835),o=t.hh(o,s,i,r,n[15],16,530742520),r=t.hh(r,o,s,i,n[2],23,-995338651),i=t.ii(i,r,o,s,n[0],6,-198630844),s=t.ii(s,i,r,o,n[7],10,1126891415),o=t.ii(o,s,i,r,n[14],15,-1416354905),r=t.ii(r,o,s,i,n[5],21,-57434055),i=t.ii(i,r,o,s,n[12],6,1700485571),s=t.ii(s,i,r,o,n[3],10,-1894986606),o=t.ii(o,s,i,r,n[10],15,-1051523),r=t.ii(r,o,s,i,n[1],21,-2054922799),i=t.ii(i,r,o,s,n[8],6,1873313359),s=t.ii(s,i,r,o,n[15],10,-30611744),o=t.ii(o,s,i,r,n[6],15,-1560198380),r=t.ii(r,o,s,i,n[13],21,1309151649),i=t.ii(i,r,o,s,n[4],6,-145523070),s=t.ii(s,i,r,o,n[11],10,-1120210379),o=t.ii(o,s,i,r,n[2],15,718787259),r=t.ii(r,o,s,i,n[9],21,-343485551),e[0]=i+e[0]&4294967295,e[1]=r+e[1]&4294967295,e[2]=o+e[2]&4294967295,e[3]=s+e[3]&4294967295}},{key:"cmn",value:function(t,e,n,i,r,o){return((e=(e+t&4294967295)+(i+o&4294967295)&4294967295)<<r|e>>>32-r)+n&4294967295}},{key:"ff",value:function(e,n,i,r,o,s,a){return t.cmn(n&i|~n&r,e,n,o,s,a)}},{key:"gg",value:function(e,n,i,r,o,s,a){return t.cmn(n&r|i&~r,e,n,o,s,a)}},{key:"hh",value:function(e,n,i,r,o,s,a){return t.cmn(n^i^r,e,n,o,s,a)}},{key:"ii",value:function(e,n,i,r,o,s,a){return t.cmn(i^(n|~r),e,n,o,s,a)}},{key:"md51",value:function(e){for(var n=e.length,i=[1732584193,-271733879,-1732584194,271733878],r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0,s=64;s<=n;s+=64)t.md5cycle(i,t.md5blk(e.substring(s-64,s)));for(e=e.substring(s-64),s=0,o=e.length;s<o;s++)r[s>>2]|=e.charCodeAt(s)<<(s%4<<3);if(r[s>>2]|=128<<(s%4<<3),s>55)for(t.md5cycle(i,r),s=0;s<16;s++)r[s]=0;return r[14]=8*n,t.md5cycle(i,r),i}},{key:"md5blk",value:function(t){for(var e=[],n=0;n<64;n+=4)e[n>>2]=t.charCodeAt(n)+(t.charCodeAt(n+1)<<8)+(t.charCodeAt(n+2)<<16)+(t.charCodeAt(n+3)<<24);return e}},{key:"rhex",value:function(e){var n="";return n+=t.hexArray[e>>4&15]+t.hexArray[e>>0&15],n+=t.hexArray[e>>12&15]+t.hexArray[e>>8&15],n+=t.hexArray[e>>20&15]+t.hexArray[e>>16&15],n+=t.hexArray[e>>28&15]+t.hexArray[e>>24&15]}},{key:"hex",value:function(e){for(var n=e.length,i=0;i<n;i++)e[i]=t.rhex(e[i]);return e.join("")}}]),t}();r.hexArray=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e.default=r},function(t,e,n){t.exports=n(0)}])},107:function(t,e,n){var i=n(68),r=n(234)(function(t,e,n){return e=e.toLowerCase(),t+(n?i(e):e)});t.exports=r},108:function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var l,u=[],c=!1,h=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=a(p);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||c||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},109:function(t,e,n){var i=n(55),r=1/0;t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-r?"-0":e}},111:function(t,e,n){var i=n(112),r=n(109);t.exports=function(t,e){for(var n=0,o=(e=i(e,t)).length;null!=t&&n<o;)t=t[r(e[n++])];return n&&n==o?t:void 0}},112:function(t,e,n){var i=n(14),r=n(113),o=n(196),s=n(38);t.exports=function(t,e){return i(t)?t:r(t,e)?[t]:o(s(t))}},113:function(t,e,n){var i=n(14),r=n(55),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},114:function(t,e,n){var i=n(203),r=n(13);t.exports=function t(e,n,o,s,a){return e===n||(null==e||null==n||!r(e)&&!r(n)?e!=e&&n!=n:i(e,n,o,s,t,a))}},116:function(t,e,n){(function(e){t.exports=e.Shopware=n(121)}).call(this,n(24))},117:function(t,e){t.exports=function(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o}},118:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},119:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},121:function(t,e,n){const i=n(122),r=n(123).default,o=n(213).default,s=n(23).default,a=n(216).default,l=n(217).default,u=n(218).default,c=n(219).default,h=n(220).default,p=n(221).default,f=n(243).default,d=n(244).default,g=n(250).default,y=n(246).default,v=n(247).default,m=n(5).default,_=new(0,n(248).default)(new i({strict:!0}));_.addFactory("component",()=>o).addFactory("template",()=>s).addFactory("module",()=>r).addFactory("entity",()=>a).addFactory("state",()=>l).addFactory("mixin",()=>u).addFactory("filter",()=>c).addFactory("directive",()=>h).addFactory("locale",()=>p).addFactory("shortcut",()=>f).addFactory("apiService",()=>d).addFactory("entityDefinition",()=>g).addFactory("workerNotification",()=>y),t.exports={Module:{register:r.registerModule,getModuleRegistry:r.getModuleRegistry,getModuleRoutes:r.getModuleRoutes,getModuleByEntityName:r.getModuleByEntityName},Component:{register:o.register,extend:o.extend,override:o.override,build:o.build,getTemplate:o.getComponentTemplate,getComponentRegistry:o.getComponentRegistry,getComponentHelper:o.getComponentHelper},Template:{register:s.registerComponentTemplate,extend:s.extendComponentTemplate,override:s.registerTemplateOverride,getRenderedTemplate:s.getRenderedTemplate,find:s.findCustomTemplate,findOverride:s.findCustomTemplate},Entity:{addDefinition:a.addEntityDefinition,getDefinition:a.getEntityDefinition,getDefinitionRegistry:a.getDefinitionRegistry,getRawEntityObject:a.getRawEntityObject,getPropertyBlacklist:a.getPropertyBlacklist,getRequiredProperties:a.getRequiredProperties,getAssociatedProperties:a.getAssociatedProperties,getTranslatableProperties:a.getTranslatableProperties},State:{registerStore:l.registerStore,getStore:l.getStore,getStoreRegistry:l.getStoreRegistry},Mixin:{register:u.register,getByName:u.getByName},Filter:{register:c.register,getByName:c.getByName},Directive:{register:h.registerDirective,getByName:h.getDirectiveByName},Locale:{register:p.register,extend:p.extend,getByName:p.getLocaleByName},Shortcut:{getShortcutRegistry:f.getShortcutRegistry,getPathByCombination:f.getPathByCombination,register:f.register},Utils:m,Application:_,FeatureConfig:v,ApiService:{register:d.register,getByName:d.getByName,getRegistry:d.getRegistry,getServices:d.getServices,has:d.has},EntityDefinition:{getScalarTypes:g.getScalarTypes,getJsonTypes:g.getJsonTypes,getDefinitionRegistry:g.getDefinitionRegistry,get:g.get,add:g.add,remove:g.remove,getTranslatedFields:g.getTranslatedFields,getAssociationFields:g.getAssociationFields,getRequiredFields:g.getRequiredFields},WorkerNotification:{register:y.register,getRegistry:y.getRegistry,override:y.override,remove:y.remove,initialize:y.initialize}}},122:function(t,e,n){(function(t,i){var r;(function(o){"use strict";var s,a=0,l=Array.prototype.slice,u=function(t,e){var n=t[e];if(n===o&&s.config.strict)throw new Error("Bottle was unable to resolve a service.  `"+e+"` is undefined.");return n},c=function(t){var e;return this.nested[t]||(e=s.pop(),this.nested[t]=e,this.factory(t,function(){return e.container})),this.nested[t]},h=function(t){return t.split(".").reduce(u,this)},p=function(t,e){return e(t)},f=function(t,e){return(t[e]||[]).concat(t.__global__||[])},d=function(t,e){var n,i,r,s,a;return this.id,r=this.container,s=this.decorators,a=this.middlewares,n=t+"Provider",(i=Object.create(null))[n]={configurable:!0,enumerable:!0,get:function(){var t=new e;return delete r[n],r[n]=t,t}},i[t]={configurable:!0,enumerable:!0,get:function(){var e,i=r[n];return i&&(e=f(s,t).reduce(p,i.$get(r)),delete r[n],delete r[t]),e===o?e:function(t,e,n,i){var r={configurable:!0,enumerable:!0};return t.length?r.get=function(){var e=0,i=function(r){if(r)throw r;t[e]&&t[e++](n,i)};return i(),n}:(r.value=n,r.writable=!0),Object.defineProperty(i,e,r),i[e]}(f(a,t),t,e,r)}},Object.defineProperties(r,i),this},g=function(t,e){var n,i;return n=t.split("."),this.providerMap[t]&&1===n.length&&!this.container[t+"Provider"]?console.error(t+" provider already instantiated."):(this.originalProviders[t]=e,this.providerMap[t]=!0,i=n.shift(),n.length?(c.call(this,i).provider(n.join("."),e),this):d.call(this,i,e))},y=function(t,e){return g.call(this,t,function(){this.$get=e})},v=function(t,e,n){var i=arguments.length>3?l.call(arguments,3):[],r=this;return y.call(this,t,function(){var t=e,o=i.map(h,r.container);return n?new(e.bind.apply(e,[null].concat(o))):t.apply(null,o)})},m=function(t,e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})},_=function(t,e){var n=t[e];return n||m.call(t,e,n={}),n},x=function(t,e){var n,i;return"function"==typeof t&&(e=t,t="__global__"),i=(n=t.split(".")).shift(),n.length?c.call(this,i).decorator(n.join("."),e):(this.decorators[i]||(this.decorators[i]=[]),this.decorators[i].push(e)),this},b=function(t){return!/^\$(?:decorator|register|list)$|Provider$/.test(t)},w=function(t){return Object.keys(t||this.container||{}).filter(b)},E={},T=function(t){var e=t.$value===o?t:t.$value;return this[t.$type||"service"].apply(this,[t.$name,e].concat(t.$inject||[]))},S=function(t){delete this.providerMap[t],delete this.container[t],delete this.container[t+"Provider"]};(s=function t(e){if(!(this instanceof t))return t.pop(e);this.id=a++,this.decorators={},this.middlewares={},this.nested={},this.providerMap={},this.originalProviders={},this.deferred=[],this.container={$decorator:x.bind(this),$register:T.bind(this),$list:w.bind(this)}}).prototype={constant:function(t,e){var n=t.split(".");return t=n.pop(),function(t,e){Object.defineProperty(this,t,{configurable:!1,enumerable:!0,value:e,writable:!1})}.call(n.reduce(_,this.container),t,e),this},decorator:x,defer:function(t){return this.deferred.push(t),this},digest:function(t){return(t||[]).map(h,this.container)},factory:y,instanceFactory:function(t,e){return y.call(this,t,function(t){return{instance:e.bind(e,t)}})},list:w,middleware:function(t,e){var n,i;return"function"==typeof t&&(e=t,t="__global__"),i=(n=t.split(".")).shift(),n.length?c.call(this,i).middleware(n.join("."),e):(this.middlewares[i]||(this.middlewares[i]=[]),this.middlewares[i].push(e)),this},provider:g,resetProviders:function(t){var e=this.originalProviders,n=Array.isArray(t);Object.keys(this.originalProviders).forEach(function(i){if(!n||-1!==t.indexOf(i)){var r=i.split(".");r.length>1&&r.forEach(S,c.call(this,r[0])),S.call(this,i),this.provider(i,e[i])}},this)},register:T,resolve:function(t){return this.deferred.forEach(function(e){e(t)}),this},service:function(t,e){return v.apply(this,[t,e,!0].concat(l.call(arguments,2)))},serviceFactory:function(t,e){return v.apply(this,[t,e,!1].concat(l.call(arguments,2)))},value:function(t,e){var n;return n=t.split("."),t=n.pop(),m.call(n.reduce(_,this.container),t,e),this}},s.pop=function(t){var e;return"string"==typeof t?((e=E[t])||(E[t]=e=new s,e.constant("BOTTLE_NAME",t)),e):new s},s.clear=function(t){"string"==typeof t?delete E[t]:E={}},s.list=w,s.config={strict:!1};var C,R,k,O,I,A={function:!0,object:!0};C=A[typeof window]&&window||this,R=A[typeof e]&&e&&!e.nodeType&&e,k=A[typeof t]&&t&&!t.nodeType&&t,O=k&&k.exports===R&&R,!(I=A[typeof i]&&i)||I.global!==I&&I.window!==I||(C=I),"object"==typeof n(73)&&n(73)?(C.Bottle=s,(r=function(){return s}.call(e,n,e,t))===o||(t.exports=r)):R&&k?O?(k.exports=s).Bottle=s:R.Bottle=s:C.Bottle=s}).call(this)}).call(this,n(45)(t),n(24))},123:function(t,e,n){"use strict";n.r(e);var i=n(2),r=n(6),o=n(4),s=n(42);e.default={getModuleRoutes:function(){var t=[];return a.forEach(function(e){e.routes.forEach(function(e){Object(r.e)(e,"flag")&&!Shopware.FeatureConfig.isActive(e.flag)||e.isChildren||(l.go(e),t.push(e))})}),t},registerModule:function(t,e){var n=e.type||"plugin",s=new Map;if(!t)return Object(i.a)("ModuleFactory",'Module has no unique identifier "id". Abort registration.',e),!1;if(a.has(t))return Object(i.a)("ModuleFactory",'A module with the identifier "'.concat(t,'" is registered already. Abort registration.'),a.get(t)),!1;var u=t.split("-");if(u.length<2)return Object(i.a)("ModuleFactory",'Module identifier does not match the necessary format "[namespace]-[name]":',t,"Abort registration."),!1;if(!Object(r.e)(e,"routes")&&!e.routeMiddleware)return Object(i.a)("ModuleFactory",'Module "'.concat(t,'" has no configured routes or a routeMiddleware.'),"The module will not be accessible in the administration UI.","Abort registration.",e),!1;Object(r.e)(e,"routes")&&Object.keys(e.routes).forEach(function(o){var a=e.routes[o],l=e.routePrefixName?e.routePrefixName:u.join(".");a.name="".concat(l,".").concat(o);var c=e.routePrefixPath?e.routePrefixPath:u.join("/");a.coreRoute||(a.path="/".concat(c,"/").concat(a.path)),a.type=n,(a=function(t,e,n){Object(r.e)(n,"flag")&&(t.flag=n.flag);t.component&&(t.components={default:t.component},delete t.component);var o={};return Object.keys(t.components).forEach(function(n){var r=t.components[n];r?o[n]=r:Object(i.a)("ModuleFactory",'The route definition of module "'.concat(e,'" is not valid. \n                    A route needs an assigned component name.'))}),t.components=o,t}(a,t,e))&&(Object(r.e)(a,"children")&&Object.keys(a.children).length&&(a=function t(e,n,i){e.children=Object.keys(e.children).map(function(o){var s=e.children[o];return s.path&&0===s.path.length?s.path="":s.path="".concat(e.path,"/").concat(s.path),s.name="".concat(n.join("."),".").concat(i,".").concat(o),s.isChildren=!0,Object(r.e)(s,"children")&&Object.keys(s.children).length&&(s=t(s,n,"".concat(i,".").concat(o))),s});return e}(a,u,o),s=function t(e,n){Object.keys(e.children).map(function(i){var o=e.children[i];return Object(r.e)(o,"children")&&Object.keys(o.children).length&&(n=t(o,n)),n.set(o.name,o),o});return n}(a,s)),a.alias&&a.alias.length>0&&!a.coreRoute&&(a.alias="/".concat(u.join("/"),"/").concat(a.alias)),a.isChildren=!1,a.routeKey=o,s.set(a.name,a))});if(e.routeMiddleware&&o.a.isFunction(e.routeMiddleware))l.use(e.routeMiddleware);else if(0===s.size)return Object(i.a)("ModuleFactory",'The module "'.concat(t,"\" was not registered cause it hasn't a valid route definition"),"Abort registration.",e.routes),!1;var c={routes:s,manifest:e,type:n};if(Object(r.e)(e,"navigation")&&e.navigation){if(!o.a.isArray(e.navigation))return Object(i.a)("ModuleFactory","The route definition has to be an array.",e.navigation),!1;e.navigation=e.navigation.filter(function(t){return t.id||t.path||t.parent||t.link?!(!t.label||!t.label.length)||(Object(i.a)("ModuleFactory",'The navigation entry needs a property called "label"'),!1):(Object(i.a)("ModuleFactory","The navigation entry does not contains the necessary properties","Abort registration of the navigation entry",t),!1)}),c.navigation=e.navigation}return a.set(t,c),c},getModuleRegistry:function(){return a.forEach(function(t,e){Object(r.e)(t.manifest,"flag")&&!Shopware.FeatureConfig.isActive(t.manifest.flag)&&a.delete(e)}),a},getModuleByEntityName:function(t){return Array.from(a.values()).find(function(e){return t===e.manifest.entity})},getModuleSnippets:function(){return Array.from(a.values()).reduce(function(t,e){var n=e.manifest;if(!Object(r.e)(n,"snippets"))return t;var i=Object.keys(n.snippets);return i.length?(i.forEach(function(e){Object(r.e)(t,e)||(t[e]={});var i=n.snippets[e];t[e]=Object(r.f)(t[e],i)}),t):t},{})}};var a=new Map,l=new s.a},124:function(t,e,n){var i=n(56),r=n(78),o=n(153),s=n(155),a=n(15),l=n(54),u=n(86);t.exports=function t(e,n,c,h,p){e!==n&&o(n,function(o,l){if(p||(p=new i),a(o))s(e,n,l,c,t,h,p);else{var f=h?h(u(e,l),o,l+"",e,n,p):void 0;void 0===f&&(f=o),r(e,l,f)}},l)}},125:function(t,e){t.exports=function(){this.__data__=[],this.size=0}},126:function(t,e,n){var i=n(49),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():r.call(e,n,1),--this.size,0))}},127:function(t,e,n){var i=n(49);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},128:function(t,e,n){var i=n(49);t.exports=function(t){return i(this.__data__,t)>-1}},129:function(t,e,n){var i=n(49);t.exports=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},13:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},130:function(t,e,n){var i=n(48);t.exports=function(){this.__data__=new i,this.size=0}},131:function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},132:function(t,e){t.exports=function(t){return this.__data__.get(t)}},133:function(t,e){t.exports=function(t){return this.__data__.has(t)}},134:function(t,e,n){var i=n(48),r=n(59),o=n(60),s=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var a=n.__data__;if(!r||a.length<s-1)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},135:function(t,e,n){var i=n(39),r=n(138),o=n(15),s=n(77),a=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,p=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||r(t))&&(i(t)?p:a).test(s(t))}},136:function(t,e,n){var i=n(26),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=i?i.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(t){}var r=s.call(t);return i&&(e?t[a]=n:delete t[a]),r}},137:function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},138:function(t,e,n){var i,r=n(139),o=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!o&&o in t}},139:function(t,e,n){var i=n(17)["__core-js_shared__"];t.exports=i},14:function(t,e){var n=Array.isArray;t.exports=n},140:function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},141:function(t,e,n){var i=n(142),r=n(48),o=n(59);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}},142:function(t,e,n){var i=n(143),r=n(144),o=n(145),s=n(146),a=n(147);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},143:function(t,e,n){var i=n(50);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},144:function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},145:function(t,e,n){var i=n(50),r="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return n===r?void 0:n}return o.call(e,t)?e[t]:void 0}},146:function(t,e,n){var i=n(50),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},147:function(t,e,n){var i=n(50),r="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?r:e,this}},148:function(t,e,n){var i=n(51);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},149:function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},15:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},150:function(t,e,n){var i=n(51);t.exports=function(t){return i(this,t).get(t)}},151:function(t,e,n){var i=n(51);t.exports=function(t){return i(this,t).has(t)}},152:function(t,e,n){var i=n(51);t.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},153:function(t,e,n){var i=n(154)();t.exports=i},154:function(t,e){t.exports=function(t){return function(e,n,i){for(var r=-1,o=Object(e),s=i(e),a=s.length;a--;){var l=s[t?a:++r];if(!1===n(o[l],l,o))break}return e}}},155:function(t,e,n){var i=n(78),r=n(80),o=n(81),s=n(83),a=n(84),l=n(47),u=n(14),c=n(158),h=n(33),p=n(39),f=n(15),d=n(66),g=n(53),y=n(86),v=n(161);t.exports=function(t,e,n,m,_,x,b){var w=y(t,n),E=y(e,n),T=b.get(E);if(T)i(t,n,T);else{var S=x?x(w,E,n+"",t,e,b):void 0,C=void 0===S;if(C){var R=u(E),k=!R&&h(E),O=!R&&!k&&g(E);S=E,R||k||O?u(w)?S=w:c(w)?S=s(w):k?(C=!1,S=r(E,!0)):O?(C=!1,S=o(E,!0)):S=[]:d(E)||l(E)?(S=w,l(w)?S=v(w):f(w)&&!p(w)||(S=a(E))):C=!1}C&&(b.set(E,S),_(S,E,m,x,b),b.delete(E)),i(t,n,S)}}},156:function(t,e,n){var i=n(15),r=Object.create,o=function(){function t(){}return function(e){if(!i(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},157:function(t,e,n){var i=n(16),r=n(13),o="[object Arguments]";t.exports=function(t){return r(t)&&i(t)==o}},158:function(t,e,n){var i=n(32),r=n(13);t.exports=function(t){return r(t)&&i(t)}},159:function(t,e){t.exports=function(){return!1}},16:function(t,e,n){var i=n(26),r=n(136),o=n(137),s="[object Null]",a="[object Undefined]",l=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?a:s:l&&l in Object(t)?r(t):o(t)}},160:function(t,e,n){var i=n(16),r=n(74),o=n(13),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&r(t.length)&&!!s[i(t)]}},161:function(t,e,n){var i=n(36),r=n(54);t.exports=function(t){return i(t,r(t))}},162:function(t,e){t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},163:function(t,e,n){var i=n(15),r=n(52),o=n(164),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return o(t);var e=r(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},164:function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},165:function(t,e,n){var i=n(166),r=n(173);t.exports=function(t){return i(function(e,n){var i=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&r(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++i<o;){var l=n[i];l&&t(e,l,i,s)}return e})}},166:function(t,e,n){var i=n(75),r=n(167),o=n(169);t.exports=function(t,e){return o(r(t,e,i),t+"")}},167:function(t,e,n){var i=n(168),r=Math.max;t.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=r(o.length-e,0),l=Array(a);++s<a;)l[s]=o[e+s];s=-1;for(var u=Array(e+1);++s<e;)u[s]=o[s];return u[e]=n(l),i(t,this,u)}}},168:function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},169:function(t,e,n){var i=n(170),r=n(172)(i);t.exports=r},17:function(t,e,n){var i=n(76),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},170:function(t,e,n){var i=n(171),r=n(79),o=n(75),s=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:o;t.exports=s},171:function(t,e){t.exports=function(t){return function(){return t}}},172:function(t,e){var n=800,i=16,r=Date.now;t.exports=function(t){var e=0,o=0;return function(){var s=r(),a=i-(s-o);if(o=s,a>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},173:function(t,e,n){var i=n(31),r=n(32),o=n(71),s=n(15);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?r(n)&&o(e,n.length):"string"==a&&e in n)&&i(n[e],t)}},174:function(t,e,n){var i=n(56),r=n(175),o=n(87),s=n(176),a=n(178),l=n(80),u=n(83),c=n(179),h=n(181),p=n(92),f=n(182),d=n(37),g=n(187),y=n(188),v=n(84),m=n(14),_=n(33),x=n(192),b=n(15),w=n(194),E=n(57),T=1,S=2,C=4,R="[object Arguments]",k="[object Function]",O="[object GeneratorFunction]",I="[object Object]",A={};A[R]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[I]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[k]=A["[object WeakMap]"]=!1,t.exports=function t(e,n,L,M,P,F){var D,j=n&T,N=n&S,G=n&C;if(L&&(D=P?L(e,M,P,F):L(e)),void 0!==D)return D;if(!b(e))return e;var B=m(e);if(B){if(D=g(e),!j)return u(e,D)}else{var U=d(e),z=U==k||U==O;if(_(e))return l(e,j);if(U==I||U==R||z&&!P){if(D=N||z?{}:v(e),!j)return N?h(e,a(D,e)):c(e,s(D,e))}else{if(!A[U])return P?e:{};D=y(e,U,j)}}F||(F=new i);var Y=F.get(e);if(Y)return Y;F.set(e,D),w(e)?e.forEach(function(i){D.add(t(i,n,L,i,e,F))}):x(e)&&e.forEach(function(i,r){D.set(r,t(i,n,L,r,e,F))});var W=G?N?f:p:N?keysIn:E,X=B?void 0:W(e);return r(X||e,function(i,r){X&&(i=e[r=i]),o(D,r,t(i,n,L,r,e,F))}),D}},175:function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},176:function(t,e,n){var i=n(36),r=n(57);t.exports=function(t,e){return t&&i(e,r(e),t)}},177:function(t,e,n){var i=n(85)(Object.keys,Object);t.exports=i},178:function(t,e,n){var i=n(36),r=n(54);t.exports=function(t,e){return t&&i(e,r(e),t)}},179:function(t,e,n){var i=n(36),r=n(64);t.exports=function(t,e){return i(t,r(t),e)}},180:function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}},181:function(t,e,n){var i=n(36),r=n(91);t.exports=function(t,e){return i(t,r(t),e)}},182:function(t,e,n){var i=n(93),r=n(91),o=n(54);t.exports=function(t){return i(t,o,r)}},183:function(t,e,n){var i=n(22)(n(17),"DataView");t.exports=i},184:function(t,e,n){var i=n(22)(n(17),"Promise");t.exports=i},185:function(t,e,n){var i=n(22)(n(17),"Set");t.exports=i},186:function(t,e,n){var i=n(22)(n(17),"WeakMap");t.exports=i},187:function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(i.index=t.index,i.input=t.input),i}},188:function(t,e,n){var i=n(62),r=n(189),o=n(190),s=n(191),a=n(81),l="[object Boolean]",u="[object Date]",c="[object Map]",h="[object Number]",p="[object RegExp]",f="[object Set]",d="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",m="[object Float32Array]",_="[object Float64Array]",x="[object Int8Array]",b="[object Int16Array]",w="[object Int32Array]",E="[object Uint8Array]",T="[object Uint8ClampedArray]",S="[object Uint16Array]",C="[object Uint32Array]";t.exports=function(t,e,n){var R=t.constructor;switch(e){case y:return i(t);case l:case u:return new R(+t);case v:return r(t,n);case m:case _:case x:case b:case w:case E:case T:case S:case C:return a(t,n);case c:return new R;case h:case d:return new R(t);case p:return o(t);case f:return new R;case g:return s(t)}}},189:function(t,e,n){var i=n(62);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},190:function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},191:function(t,e,n){var i=n(26),r=i?i.prototype:void 0,o=r?r.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},192:function(t,e,n){var i=n(193),r=n(34),o=n(35),s=o&&o.isMap,a=s?r(s):i;t.exports=a},193:function(t,e,n){var i=n(37),r=n(13),o="[object Map]";t.exports=function(t){return r(t)&&i(t)==o}},194:function(t,e,n){var i=n(195),r=n(34),o=n(35),s=o&&o.isSet,a=s?r(s):i;t.exports=a},195:function(t,e,n){var i=n(37),r=n(13),o="[object Set]";t.exports=function(t){return r(t)&&i(t)==o}},196:function(t,e,n){var i=n(197),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=i(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,function(t,n,i,r){e.push(i?r.replace(o,"$1"):n||t)}),e});t.exports=s},197:function(t,e,n){var i=n(198),r=500;t.exports=function(t){var e=i(t,function(t){return n.size===r&&n.clear(),t}),n=e.cache;return e}},198:function(t,e,n){var i=n(60),r="Expected a function";function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(r);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(o.Cache||i),n}o.Cache=i,t.exports=o},199:function(t,e,n){var i=n(26),r=n(200),o=n(14),s=n(55),a=1/0,l=i?i.prototype:void 0,u=l?l.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return r(e,t)+"";if(s(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-a?"-0":n}},2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});function i(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},200:function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},201:function(t,e,n){var i=n(16),r=n(13),o="[object RegExp]";t.exports=function(t){return r(t)&&i(t)==o}},202:function(t,e,n){var i=n(16),r=n(13),o="[object Date]";t.exports=function(t){return r(t)&&i(t)==o}},203:function(t,e,n){var i=n(56),r=n(94),o=n(209),s=n(212),a=n(37),l=n(14),u=n(33),c=n(53),h=1,p="[object Arguments]",f="[object Array]",d="[object Object]",g=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,y,v,m){var _=l(t),x=l(e),b=_?f:a(t),w=x?f:a(e),E=(b=b==p?d:b)==d,T=(w=w==p?d:w)==d,S=b==w;if(S&&u(t)){if(!u(e))return!1;_=!0,E=!1}if(S&&!E)return m||(m=new i),_||c(t)?r(t,e,n,y,v,m):o(t,e,b,n,y,v,m);if(!(n&h)){var C=E&&g.call(t,"__wrapped__"),R=T&&g.call(e,"__wrapped__");if(C||R){var k=C?t.value():t,O=R?e.value():e;return m||(m=new i),v(k,O,n,y,m)}}return!!S&&(m||(m=new i),s(t,e,n,y,v,m))}},204:function(t,e,n){var i=n(60),r=n(205),o=n(206);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=r,s.prototype.has=o,t.exports=s},205:function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},206:function(t,e){t.exports=function(t){return this.__data__.has(t)}},207:function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},208:function(t,e){t.exports=function(t,e){return t.has(e)}},209:function(t,e,n){var i=n(26),r=n(82),o=n(31),s=n(94),a=n(210),l=n(211),u=1,c=2,h="[object Boolean]",p="[object Date]",f="[object Error]",d="[object Map]",g="[object Number]",y="[object RegExp]",v="[object Set]",m="[object String]",_="[object Symbol]",x="[object ArrayBuffer]",b="[object DataView]",w=i?i.prototype:void 0,E=w?w.valueOf:void 0;t.exports=function(t,e,n,i,w,T,S){switch(n){case b:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!T(new r(t),new r(e)));case h:case p:case g:return o(+t,+e);case f:return t.name==e.name&&t.message==e.message;case y:case m:return t==e+"";case d:var C=a;case v:var R=i&u;if(C||(C=l),t.size!=e.size&&!R)return!1;var k=S.get(t);if(k)return k==e;i|=c,S.set(t,e);var O=s(C(t),C(e),i,w,T,S);return S.delete(t),O;case _:if(E)return E.call(t)==E.call(e)}return!1}},21:function(t,e,n){(function(e){var i;i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";t.exports=function(){var t=/%%|%(?:(\d+)\$)?((?:[-+#0 ]|'[\s\S])*)(\d+)?(?:\.(\d*))?([\s\S])/g,e=arguments,n=0,i=e[n++],r=function(t,e,n,i){n||(n=" ");var r=t.length>=e?"":new Array(1+e-t.length>>>0).join(n);return i?t+r:r+t},o=function(t,e,n,i,o){var s=i-t.length;return s>0&&(t=n||"0"!==o?r(t,i,o,n):[t.slice(0,e.length),r("",s,"0",!0),t.slice(e.length)].join("")),t},s=function(t,e,n,i,s,a){return t=r((t>>>0).toString(e),s||0,"0",!1),o(t,"",n,i,a)},a=function(t,e,n,i,r){return null!=i&&(t=t.slice(0,i)),o(t,"",e,n,r)},l=function(t,i,l,u,c,h){var p,f,d,g,y;if("%%"===t)return"%";var v,m,_=" ",x=!1,b="";for(v=0,m=l.length;v<m;v++)switch(l.charAt(v)){case" ":case"0":_=l.charAt(v);break;case"+":b="+";break;case"-":x=!0;break;case"'":v+1<m&&(_=l.charAt(v+1),v++)}if(u=u?+u:0,!isFinite(u))throw new Error("Width must be finite");if(c=c?+c:"d"===h?0:"fFeE".indexOf(h)>-1?6:void 0,i&&0==+i)throw new Error("Argument number must be greater than zero");if(i&&+i>=e.length)throw new Error("Too few arguments");switch(y=i?e[+i]:e[n++],h){case"%":return"%";case"s":return a(y+"",x,u,c,_);case"c":return a(String.fromCharCode(+y),x,u,c,_);case"b":return s(y,2,x,u,c,_);case"o":return s(y,8,x,u,c,_);case"x":return s(y,16,x,u,c,_);case"X":return s(y,16,x,u,c,_).toUpperCase();case"u":return s(y,10,x,u,c,_);case"i":case"d":return p=+y||0,y=(f=(p=Math.round(p-p%1))<0?"-":b)+r(String(Math.abs(p)),c,"0",!1),x&&"0"===_&&(_=" "),o(y,f,x,u,_);case"e":case"E":case"f":case"F":case"g":case"G":return f=(p=+y)<0?"-":b,d=["toExponential","toFixed","toPrecision"]["efg".indexOf(h.toLowerCase())],g=["toString","toUpperCase"]["eEfFgG".indexOf(h)%2],y=f+Math.abs(p)[d](c),o(y,f,x,u,_)[g]();default:return""}};try{return i.replace(t,l)}catch(t){return!1}}},function(t,e){t.exports=n(214)},function(t,e,n){
/**
 * Twig.js
 *
 * @copyright 2011-2016 John Roepke and the Twig.js Contributors
 * @license   Available under the BSD 2-Clause License
 * @link      https://github.com/twigjs/twig.js
 */
t.exports=n(3)()},function(t,e,n){t.exports=function t(){var e={VERSION:"1.13.3"};return n(4)(e),n(5)(e),n(6)(e),n(8)(e),n(9)(e),n(10)(e),n(20)(e),n(21)(e),n(23)(e),n(24)(e),n(25)(e),n(26)(e),n(27)(e),n(28)(e),n(29)(e),e.exports.factory=t,e.exports}},function(t,e){t.exports=function(t){"use strict";function e(e,n){if(e.options.rethrow)throw"string"==typeof n&&(n=new t.Error(n)),"TwigException"!=n.type||n.file||(n.file=e.id),n;if(t.log.error("Error parsing twig template "+e.id+": "),n.stack?t.log.error(n.stack):t.log.error(n.toString()),t.debug)return n.toString()}return t.trace=!1,t.debug=!1,t.cache=!0,t.noop=function(){},t.placeholders={parent:"{{|PARENT|}}"},t.hasIndexOf=Array.prototype.hasOwnProperty("indexOf"),t.indexOf=function(e,n){if(t.hasIndexOf)return e.indexOf(n);if(null==e)throw new TypeError;var i=Object(e),r=i.length>>>0;if(0===r)return-1;var o=0;if(arguments.length>0&&((o=Number(arguments[1]))!=o?o=0:0!==o&&o!==1/0&&o!==-1/0&&(o=(o>0||-1)*Math.floor(Math.abs(o)))),o>=r)return-1;for(var s=o>=0?o:Math.max(r-Math.abs(o),0);s<r;s++)if(s in i&&i[s]===n)return s;return e==n?0:-1},t.forEach=function(t,e,n){if(Array.prototype.forEach)return t.forEach(e,n);var i,r;if(null==t)throw new TypeError(" this is null or not defined");var o=Object(t),s=o.length>>>0;if("[object Function]"!={}.toString.call(e))throw new TypeError(e+" is not a function");for(n&&(i=n),r=0;r<s;){var a;r in o&&(a=o[r],e.call(i,a,r,o)),r++}},t.merge=function(e,n,i){return t.forEach(Object.keys(n),function(t){(!i||t in e)&&(e[t]=n[t])}),e},t.attempt=function(t,e){try{return t()}catch(t){return e(t)}},t.Error=function(t,e){this.message=t,this.name="TwigException",this.type="TwigException",this.file=e},t.Error.prototype.toString=function(){return this.name+": "+this.message},t.log={trace:function(){t.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){t.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},"undefined"!=typeof console?void 0!==console.error?t.log.error=function(){console.error.apply(console,arguments)}:void 0!==console.log&&(t.log.error=function(){console.log.apply(console,arguments)}):t.log.error=function(){},t.ChildContext=function(e){return t.lib.copy(e)},t.token={},t.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",output_whitespace_pre:"output_whitespace_pre",output_whitespace_post:"output_whitespace_post",output_whitespace_both:"output_whitespace_both",logic_whitespace_pre:"logic_whitespace_pre",logic_whitespace_post:"logic_whitespace_post",logic_whitespace_both:"logic_whitespace_both"},t.token.definitions=[{type:t.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:t.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:t.token.type.output_whitespace_pre,open:"{{-",close:"}}"},{type:t.token.type.output_whitespace_post,open:"{{",close:"-}}"},{type:t.token.type.output_whitespace_both,open:"{{-",close:"-}}"},{type:t.token.type.logic_whitespace_pre,open:"{%-",close:"%}"},{type:t.token.type.logic_whitespace_post,open:"{%",close:"-%}"},{type:t.token.type.logic_whitespace_both,open:"{%-",close:"-%}"},{type:t.token.type.output,open:"{{",close:"}}"},{type:t.token.type.logic,open:"{%",close:"%}"},{type:t.token.type.comment,open:"{#",close:"#}"}],t.token.strings=['"',"'"],t.token.findStart=function(e){var n,i,r,o,s={position:null,def:null},a=null,l=t.token.definitions.length;for(n=0;n<l;n++)i=t.token.definitions[n],r=e.indexOf(i.open),o=e.indexOf(i.close),t.log.trace("Twig.token.findStart: ","Searching for ",i.open," found at ",r),r>=0&&i.open.length!==i.close.length&&o<0||(r>=0&&(null===s.position||r<s.position)?(s.position=r,s.def=i,a=o):r>=0&&null!==s.position&&r===s.position&&(i.open.length>s.def.open.length?(s.position=r,s.def=i,a=o):i.open.length===s.def.open.length&&(i.close.length,s.def.close.length,o>=0&&o<a&&(s.position=r,s.def=i,a=o))));return s},t.token.findEnd=function(e,n,i){for(var r,o,s=null,a=!1,l=0,u=null,c=null,h=null,p=null,f=null,d=null;!a;){if(u=null,c=null,!((h=e.indexOf(n.close,l))>=0))throw new t.Error("Unable to find closing bracket '"+n.close+"' opened near template position "+i);if(s=h,a=!0,n.type===t.token.type.comment)break;if(n.type===t.token.type.raw)break;for(o=t.token.strings.length,r=0;r<o;r+=1)(f=e.indexOf(t.token.strings[r],l))>0&&f<h&&(null===u||f<u)&&(u=f,c=t.token.strings[r]);if(null!==u)for(p=u+1,s=null,a=!1;;){if((d=e.indexOf(c,p))<0)throw"Unclosed string in template";if("\\"!==e.substr(d-1,1)){l=d+1;break}p=d+1}}return s},t.tokenize=function(e){for(var n=[],i=0,r=null,o=null;e.length>0;)if(r=t.token.findStart(e),t.log.trace("Twig.tokenize: ","Found token: ",r),null!==r.position){if(r.position>0&&n.push({type:t.token.type.raw,value:e.substring(0,r.position)}),e=e.substr(r.position+r.def.open.length),i+=r.position+r.def.open.length,o=t.token.findEnd(e,r.def,i),t.log.trace("Twig.tokenize: ","Token ends at ",o),n.push({type:r.def.type,value:e.substring(0,o).trim()}),"\n"===e.substr(o+r.def.close.length,1))switch(r.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":o+=1}e=e.substr(o+r.def.close.length),i+=o+r.def.close.length}else n.push({type:t.token.type.raw,value:e}),e="";return n},t.compile=function(e){var n=this;return t.attempt(function(){for(var i=[],r=[],o=[],s=null,a=null,l=null,u=null,c=null,h=null,p=null,f=null,d=null,g=null,y=null,v=null,m=function(e){t.expression.compile.call(n,e),r.length>0?o.push(e):i.push(e)},_=function(e){if(a=t.logic.compile.call(n,e),g=a.type,y=t.logic.handler[g].open,v=t.logic.handler[g].next,t.log.trace("Twig.compile: ","Compiled logic token to ",a," next is: ",v," open is : ",y),void 0!==y&&!y){if(u=r.pop(),p=t.logic.handler[u.type],t.indexOf(p.next,g)<0)throw new Error(g+" not expected after a "+u.type);u.output=u.output||[],u.output=u.output.concat(o),o=[],d={type:t.token.type.logic,token:u},r.length>0?o.push(d):i.push(d)}void 0!==v&&v.length>0?(t.log.trace("Twig.compile: ","Pushing ",a," to logic stack."),r.length>0&&((u=r.pop()).output=u.output||[],u.output=u.output.concat(o),r.push(u),o=[]),r.push(a)):void 0!==y&&y&&(d={type:t.token.type.logic,token:a},r.length>0?o.push(d):i.push(d))};e.length>0;){switch(s=e.shift(),c=i[i.length-1],h=o[o.length-1],f=e[0],t.log.trace("Compiling token ",s),s.type){case t.token.type.raw:r.length>0?o.push(s):i.push(s);break;case t.token.type.logic:_.call(n,s);break;case t.token.type.comment:break;case t.token.type.output:m.call(n,s);break;case t.token.type.logic_whitespace_pre:case t.token.type.logic_whitespace_post:case t.token.type.logic_whitespace_both:case t.token.type.output_whitespace_pre:case t.token.type.output_whitespace_post:case t.token.type.output_whitespace_both:switch(s.type!==t.token.type.output_whitespace_post&&s.type!==t.token.type.logic_whitespace_post&&(c&&c.type===t.token.type.raw&&(i.pop(),null===c.value.match(/^\s*$/)&&(c.value=c.value.trim(),i.push(c))),h&&h.type===t.token.type.raw&&(o.pop(),null===h.value.match(/^\s*$/)&&(h.value=h.value.trim(),o.push(h)))),s.type){case t.token.type.output_whitespace_pre:case t.token.type.output_whitespace_post:case t.token.type.output_whitespace_both:m.call(n,s);break;case t.token.type.logic_whitespace_pre:case t.token.type.logic_whitespace_post:case t.token.type.logic_whitespace_both:_.call(n,s)}s.type!==t.token.type.output_whitespace_pre&&s.type!==t.token.type.logic_whitespace_pre&&f&&f.type===t.token.type.raw&&(e.shift(),null===f.value.match(/^\s*$/)&&(f.value=f.value.trim(),e.unshift(f)))}t.log.trace("Twig.compile: "," Output: ",i," Logic Stack: ",r," Pending Output: ",o)}if(r.length>0)throw l=r.pop(),new Error("Unable to find an end tag for "+l.type+", expecting one of "+l.next);return i},function(e){if(n.options.rethrow)throw"TwigException"!=e.type||e.file||(e.file=n.id),e;t.log.error("Error compiling twig template "+n.id+": "),e.stack?t.log.error(e.stack):t.log.error(e.toString())})},t.parse=function(n,i,r){var o,s=this,a=[],l=null,u=!0,c=!0;function h(t){a.push(t)}function p(t){void 0!==t.chain&&(c=t.chain),void 0!==t.context&&(i=t.context),void 0!==t.output&&a.push(t.output)}if(o=t.async.forEach(n,function(e){switch(t.log.debug("Twig.parse: ","Parsing token: ",e),e.type){case t.token.type.raw:a.push(t.filters.raw(e.value));break;case t.token.type.logic:return t.logic.parseAsync.call(s,e.token,i,c).then(p);case t.token.type.comment:break;case t.token.type.output_whitespace_pre:case t.token.type.output_whitespace_post:case t.token.type.output_whitespace_both:case t.token.type.output:return t.log.debug("Twig.parse: ","Output token: ",e.stack),t.expression.parseAsync.call(s,e.stack,i).then(h)}}).then(function(){return a=t.output.call(s,a),u=!1,a}).catch(function(t){r&&e(s,t),l=t}),r)return o;if(null!==l)return e(this,l);if(u)throw new t.Error("You are using Twig.js in sync mode in combination with async extensions.");return a},t.prepare=function(e){var n,i;return t.log.debug("Twig.prepare: ","Tokenizing ",e),i=t.tokenize.call(this,e),t.log.debug("Twig.prepare: ","Compiling ",i),n=t.compile.call(this,i),t.log.debug("Twig.prepare: ","Compiled ",n),n},t.output=function(e){var n=this.options.autoescape;if(!n)return e.join("");var i="string"==typeof n?n:"html",r=0,o=e.length,s="",a=new Array(o);for(r=0;r<o;r++)!(s=e[r])||!0===s.twig_markup||s.twig_markup===i||"html"===i&&"html_attr"===s.twig_markup||(s=t.filters.escape(s,[i])),a[r]=s;return a.length<1?"":t.Markup(a.join(""),!0)},t.Templates={loaders:{},parsers:{},registry:{}},t.validateId=function(e){if("prototype"===e)throw new t.Error(e+" is not a valid twig identifier");if(t.cache&&t.Templates.registry.hasOwnProperty(e))throw new t.Error("There is already a template with the ID "+e);return!0},t.Templates.registerLoader=function(e,n,i){if("function"!=typeof n)throw new t.Error("Unable to add loader for "+e+": Invalid function reference given.");i&&(n=n.bind(i)),this.loaders[e]=n},t.Templates.unRegisterLoader=function(t){this.isRegisteredLoader(t)&&delete this.loaders[t]},t.Templates.isRegisteredLoader=function(t){return this.loaders.hasOwnProperty(t)},t.Templates.registerParser=function(e,n,i){if("function"!=typeof n)throw new t.Error("Unable to add parser for "+e+": Invalid function regerence given.");i&&(n=n.bind(i)),this.parsers[e]=n},t.Templates.unRegisterParser=function(t){this.isRegisteredParser(t)&&delete this.parsers[t]},t.Templates.isRegisteredParser=function(t){return this.parsers.hasOwnProperty(t)},t.Templates.save=function(e){if(void 0===e.id)throw new t.Error("Unable to save template with no id");t.Templates.registry[e.id]=e},t.Templates.load=function(e){return t.Templates.registry.hasOwnProperty(e)?t.Templates.registry[e]:null},t.Templates.loadRemote=function(e,n,i,r){var o=void 0===n.id?e:n.id,s=t.Templates.registry[o];return t.cache&&void 0!==s?("function"==typeof i&&i(s),s):(n.parser=n.parser||"twig",n.id=o,void 0===n.async&&(n.async=!0),(this.loaders[n.method]||this.loaders.fs).call(this,e,n,i,r))},t.Template=function(e){var n,i,r,o=e.data,s=e.id,a=e.blocks,l=e.macros||{},u=e.base,c=e.path,h=e.url,p=e.name,f=e.method,d=e.options;this.id=s,this.method=f,this.base=u,this.path=c,this.url=h,this.name=p,this.macros=l,this.options=d,this.reset(a),n="String",i=o,r=Object.prototype.toString.call(i).slice(8,-1),this.tokens=null!=i&&r===n?t.prepare.call(this,o):o,void 0!==s&&t.Templates.save(this)},t.Template.prototype.reset=function(e){t.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.importedBlocks=[],this.originalBlockTokens={},this.child={blocks:e||{}},this.extend=null,this.parseStack=[]},t.Template.prototype.render=function(e,n,i){var r=this;return this.context=e||{},this.reset(),n&&n.blocks&&(this.blocks=n.blocks),n&&n.macros&&(this.macros=n.macros),t.async.potentiallyAsync(this,i,function(){return t.parseAsync.call(this,this.tokens,this.context).then(function(e){var i,o;return r.extend?(r.options.allowInlineIncludes&&(i=t.Templates.load(r.extend))&&(i.options=r.options),i||(o=t.path.parsePath(r,r.extend),i=t.Templates.loadRemote(o,{method:r.getLoaderMethod(),base:r.base,async:!1,id:o,options:r.options})),r.parent=i,r.parent.renderAsync(r.context,{blocks:r.blocks,isInclude:!0})):n?"blocks"==n.output?r.blocks:"macros"==n.output?r.macros:!0===n.isInclude?e:e.valueOf():e.valueOf()})})},t.Template.prototype.importFile=function(e){var n,i;if(!this.url&&this.options.allowInlineIncludes){if(e=this.path?t.path.parsePath(this,e):e,!(i=t.Templates.load(e))&&!(i=t.Templates.loadRemote(n,{id:e,method:this.getLoaderMethod(),async:!1,path:e,options:this.options})))throw new t.Error("Unable to find the template "+e);return i.options=this.options,i}return n=t.path.parsePath(this,e),i=t.Templates.loadRemote(n,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:n})},t.Template.prototype.importBlocks=function(e,n){var i=this.importFile(e),r=this.context,o=this;n=n||!1,i.render(r),t.forEach(Object.keys(i.blocks),function(t){(n||void 0===o.blocks[t])&&(o.blocks[t]=i.blocks[t],o.importedBlocks.push(t))})},t.Template.prototype.importMacros=function(e){var n=t.path.parsePath(this,e);return t.Templates.loadRemote(n,{method:this.getLoaderMethod(),async:!1,id:n})},t.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},t.Template.prototype.compile=function(e){return t.compiler.compile(this,e)},t.Markup=function(t,e){if("string"!=typeof t||t.length<1)return t;var n=new String(t);return n.twig_markup=void 0===e||e,n},t}},function(t,e){t.exports=function(t){return t.compiler={module:{}},t.compiler.compile=function(e,n){var i,r=JSON.stringify(e.tokens),o=e.id;if(n.module){if(void 0===t.compiler.module[n.module])throw new t.Error("Unable to find module type "+n.module);i=t.compiler.module[n.module](o,r,n.twig)}else i=t.compiler.wrap(o,r);return i},t.compiler.module={amd:function(e,n,i){return'define(["'+i+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+t.compiler.wrap(e,n)+"\n\treturn templates;\n});"},node:function(e,n){return'var twig = require("twig").twig;\nexports.template = '+t.compiler.wrap(e,n)},cjs2:function(e,n,i){return'module.declare([{ twig: "'+i+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+t.compiler.wrap(e,n)+"\n});"}},t.compiler.wrap=function(t,e){return'twig({id:"'+t.replace('"','\\"')+'", data:'+e+", precompiled: true});\n"},t}},function(t,e,n){t.exports=function(t){"use strict";function e(e,n,i){return n?t.expression.parseAsync.call(e,n,i):t.Promise.resolve(!1)}for(t.expression={},n(7)(t),t.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context","and","b-and","or","b-or","b-xor","in","not in","if","matches","starts","ends","with"],t.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",slice:"Twig.expression.type.slice",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},subexpression:{start:"Twig.expression.type.subexpression.start",end:"Twig.expression.type.subexpression.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},t.expression.set={operations:[t.expression.type.filter,t.expression.type.operator.unary,t.expression.type.operator.binary,t.expression.type.array.end,t.expression.type.object.end,t.expression.type.parameter.end,t.expression.type.subexpression.end,t.expression.type.comma,t.expression.type.test],expressions:[t.expression.type._function,t.expression.type.bool,t.expression.type.string,t.expression.type.variable,t.expression.type.number,t.expression.type._null,t.expression.type.context,t.expression.type.parameter.start,t.expression.type.array.start,t.expression.type.object.start,t.expression.type.subexpression.start,t.expression.type.operator.unary]},t.expression.set.operations_extended=t.expression.set.operations.concat([t.expression.type.key.period,t.expression.type.key.brackets,t.expression.type.slice]),t.expression.fn={compile:{push:function(t,e,n){n.push(t)},push_both:function(t,e,n){n.push(t),e.push(t)}},parse:{push:function(t,e,n){e.push(t)},push_value:function(t,e,n){e.push(t.value)}}},t.expression.definitions=[{type:t.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*(\s?as)?)/,next:t.expression.set.operations.concat([t.expression.type.parameter.start]),compile:function(t,e,n){t.filter=t.match[2],t.modifier=t.match[1],delete t.match,delete t.value,n.push(t)},parse:function(n,i,r){var o=i.pop();return e(this,n.params,r).then(function(e){var r=t.test(n.filter,o,e);"not"==n.modifier?i.push(!r):i.push(r)})}},{type:t.expression.type.comma,regex:/^,/,next:t.expression.set.expressions.concat([t.expression.type.array.end,t.expression.type.object.end]),compile:function(e,n,i){var r,o=n.length-1;for(delete e.match,delete e.value;o>=0;o--){if((r=n.pop()).type===t.expression.type.object.start||r.type===t.expression.type.parameter.start||r.type===t.expression.type.array.start){n.push(r);break}i.push(r)}i.push(e)}},{type:t.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:t.expression.set.operations,compile:function(t,e,n){t.value=Number(t.value),n.push(t)},parse:t.expression.fn.parse.push_value},{type:t.expression.type.operator.binary,regex:/(^\?\?|^\?\:|^(b\-and)|^(b\-or)|^(b\-xor)|^[\+\-~%\?]|^[\:](?!\d\])|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^(and)[\(|\s+]|^(or)[\(|\s+]|^(in)[\(|\s+]|^(not in)[\(|\s+]|^(matches)|^(starts with)|^(ends with)|^\.\.)/,next:t.expression.set.expressions,transform:function(t,e){switch(t[0]){case"and(":case"or(":case"in(":case"not in(":return e[e.length-1].value=t[2],t[0];default:return""}},compile:function(e,n,i){delete e.match,e.value=e.value.trim();var r=e.value,o=t.expression.operator.lookup(r,e);for(t.log.trace("Twig.expression.compile: ","Operator: ",o," from ",r);n.length>0&&(n[n.length-1].type==t.expression.type.operator.unary||n[n.length-1].type==t.expression.type.operator.binary)&&(o.associativity===t.expression.operator.leftToRight&&o.precidence>=n[n.length-1].precidence||o.associativity===t.expression.operator.rightToLeft&&o.precidence>n[n.length-1].precidence);){var s=n.pop();i.push(s)}if(":"===r){if(!n[n.length-1]||"?"!==n[n.length-1].value){var a=i.pop();if(a.type===t.expression.type.string||a.type===t.expression.type.variable)e.key=a.value;else if(a.type===t.expression.type.number)e.key=a.value.toString();else{if(!a.expression||a.type!==t.expression.type.parameter.end&&a.type!=t.expression.type.subexpression.end)throw new t.Error("Unexpected value before ':' of "+a.type+" = "+a.value);e.params=a.params}return void i.push(e)}}else n.push(o)},parse:function(e,n,i){if(e.key)n.push(e);else{if(e.params)return t.expression.parseAsync.call(this,e.params,i).then(function(t){e.key=t,n.push(e),i.loop||delete e.params});t.expression.operator.parse(e.value,n)}}},{type:t.expression.type.operator.unary,regex:/(^not\s+)/,next:t.expression.set.expressions,compile:function(e,n,i){delete e.match,e.value=e.value.trim();var r=e.value,o=t.expression.operator.lookup(r,e);for(t.log.trace("Twig.expression.compile: ","Operator: ",o," from ",r);n.length>0&&(n[n.length-1].type==t.expression.type.operator.unary||n[n.length-1].type==t.expression.type.operator.binary)&&(o.associativity===t.expression.operator.leftToRight&&o.precidence>=n[n.length-1].precidence||o.associativity===t.expression.operator.rightToLeft&&o.precidence>n[n.length-1].precidence);){var s=n.pop();i.push(s)}n.push(o)},parse:function(e,n,i){t.expression.operator.parse(e.value,n)}},{type:t.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:t.expression.set.operations_extended,compile:function(e,n,i){var r=e.value;delete e.match,r='"'===r.substring(0,1)?r.replace('\\"','"'):r.replace("\\'","'"),e.value=r.substring(1,r.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),t.log.trace("Twig.expression.compile: ","String value: ",e.value),i.push(e)},parse:t.expression.fn.parse.push_value},{type:t.expression.type.subexpression.start,regex:/^\(/,next:t.expression.set.expressions.concat([t.expression.type.subexpression.end]),compile:function(t,e,n){t.value="(",n.push(t),e.push(t)},parse:t.expression.fn.parse.push},{type:t.expression.type.subexpression.end,regex:/^\)/,next:t.expression.set.operations_extended,validate:function(e,n){for(var i=n.length-1,r=!1,o=!1,s=0;!r&&i>=0;){var a=n[i];(r=a.type===t.expression.type.subexpression.start)&&o&&(o=!1,r=!1),a.type===t.expression.type.parameter.start?s++:a.type===t.expression.type.parameter.end?s--:a.type===t.expression.type.subexpression.end&&(o=!0),i--}return r&&0===s},compile:function(e,n,i){var r,o=e;for(r=n.pop();n.length>0&&r.type!=t.expression.type.subexpression.start;)i.push(r),r=n.pop();for(var s=[];e.type!==t.expression.type.subexpression.start;)s.unshift(e),e=i.pop();s.unshift(e);void 0===(r=n[n.length-1])||r.type!==t.expression.type._function&&r.type!==t.expression.type.filter&&r.type!==t.expression.type.test&&r.type!==t.expression.type.key.brackets?(o.expression=!0,s.pop(),s.shift(),o.params=s,i.push(o)):(o.expression=!1,r.params=s)},parse:function(e,n,i){if(e.expression)return t.expression.parseAsync.call(this,e.params,i).then(function(t){n.push(t)});throw new t.Error("Unexpected subexpression end when token is not marked as an expression")}},{type:t.expression.type.parameter.start,regex:/^\(/,next:t.expression.set.expressions.concat([t.expression.type.parameter.end]),validate:function(e,n){var i=n[n.length-1];return i&&t.indexOf(t.expression.reservedWords,i.value.trim())<0},compile:t.expression.fn.compile.push_both,parse:t.expression.fn.parse.push},{type:t.expression.type.parameter.end,regex:/^\)/,next:t.expression.set.operations_extended,compile:function(e,n,i){var r,o=e;for(r=n.pop();n.length>0&&r.type!=t.expression.type.parameter.start;)i.push(r),r=n.pop();for(var s=[];e.type!==t.expression.type.parameter.start;)s.unshift(e),e=i.pop();s.unshift(e);void 0===(e=i[i.length-1])||e.type!==t.expression.type._function&&e.type!==t.expression.type.filter&&e.type!==t.expression.type.test&&e.type!==t.expression.type.key.brackets?(o.expression=!0,s.pop(),s.shift(),o.params=s,i.push(o)):(o.expression=!1,e.params=s)},parse:function(e,n,i){var r=[],o=!1,s=null;if(e.expression)return t.expression.parseAsync.call(this,e.params,i).then(function(t){n.push(t)});for(;n.length>0;){if((s=n.pop())&&s.type&&s.type==t.expression.type.parameter.start){o=!0;break}r.unshift(s)}if(!o)throw new t.Error("Expected end of parameter set.");n.push(r)}},{type:t.expression.type.slice,regex:/^\[(\d*\:\d*)\]/,next:t.expression.set.operations_extended,compile:function(t,e,n){var i=t.match[1].split(":"),r=i[0]?parseInt(i[0]):void 0,o=i[1]?parseInt(i[1]):void 0;t.value="slice",t.params=[r,o],o||(t.params=[r]),n.push(t)},parse:function(e,n,i){var r=n.pop(),o=e.params;n.push(t.filter.call(this,e.value,r,o))}},{type:t.expression.type.array.start,regex:/^\[/,next:t.expression.set.expressions.concat([t.expression.type.array.end]),compile:t.expression.fn.compile.push_both,parse:t.expression.fn.parse.push},{type:t.expression.type.array.end,regex:/^\]/,next:t.expression.set.operations_extended,compile:function(e,n,i){for(var r,o=n.length-1;o>=0&&(r=n.pop()).type!==t.expression.type.array.start;o--)i.push(r);i.push(e)},parse:function(e,n,i){for(var r=[],o=!1,s=null;n.length>0;){if((s=n.pop()).type&&s.type==t.expression.type.array.start){o=!0;break}r.unshift(s)}if(!o)throw new t.Error("Expected end of array.");n.push(r)}},{type:t.expression.type.object.start,regex:/^\{/,next:t.expression.set.expressions.concat([t.expression.type.object.end]),compile:t.expression.fn.compile.push_both,parse:t.expression.fn.parse.push},{type:t.expression.type.object.end,regex:/^\}/,next:t.expression.set.operations_extended,compile:function(e,n,i){for(var r,o=n.length-1;o>=0&&(!(r=n.pop())||r.type!==t.expression.type.object.start);o--)i.push(r);i.push(e)},parse:function(e,n,i){for(var r={},o=!1,s=null,a=!1,l=null;n.length>0;){if((s=n.pop())&&s.type&&s.type===t.expression.type.object.start){o=!0;break}if(s&&s.type&&(s.type===t.expression.type.operator.binary||s.type===t.expression.type.operator.unary)&&s.key){if(!a)throw new t.Error("Missing value for key '"+s.key+"' in object definition.");r[s.key]=l,void 0===r._keys&&(r._keys=[]),r._keys.unshift(s.key),l=null,a=!1}else a=!0,l=s}if(!o)throw new t.Error("Unexpected end of object.");n.push(r)}},{type:t.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:t.expression.set.operations_extended.concat([t.expression.type.parameter.start]),compile:function(t,e,n){t.value=t.match[1],n.push(t)},parse:function(n,i,r){var o=this,s=i.pop();return e(this,n.params,r).then(function(e){return t.filter.call(o,n.value,s,e)}).then(function(t){i.push(t)})}},{type:t.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:t.expression.type.parameter.start,validate:function(e,n){return e[1]&&t.indexOf(t.expression.reservedWords,e[1])<0},transform:function(t,e){return"("},compile:function(t,e,n){var i=t.match[1];t.fn=i,delete t.match,delete t.value,n.push(t)},parse:function(n,i,r){var o,s=this,a=n.fn;return e(this,n.params,r).then(function(e){if(t.functions[a])o=t.functions[a].apply(s,e);else{if("function"!=typeof r[a])throw new t.Error(a+" function does not exist and is not defined in the context");o=r[a].apply(r,e)}return o}).then(function(t){i.push(t)})}},{type:t.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:t.expression.set.operations_extended.concat([t.expression.type.parameter.start]),compile:t.expression.fn.compile.push,validate:function(e,n){return t.indexOf(t.expression.reservedWords,e[0])<0},parse:function(e,n,i){return t.expression.resolveAsync.call(this,i[e.value],i).then(function(t){n.push(t)})}},{type:t.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:t.expression.set.operations_extended.concat([t.expression.type.parameter.start]),compile:function(t,e,n){t.key=t.match[1],delete t.match,delete t.value,n.push(t)},parse:function(n,i,r,o){var s,a=this,l=n.key,u=i.pop();return e(this,n.params,r).then(function(e){if(null==u){if(a.options.strict_variables)throw new t.Error("Can't access a key "+l+" on an null or undefined object.");s=void 0}else{var n=function(t){return t.substr(0,1).toUpperCase()+t.substr(1)};s="object"==typeof u&&l in u?u[l]:void 0!==u["get"+n(l)]?u["get"+n(l)]:void 0!==u["is"+n(l)]?u["is"+n(l)]:void 0}return t.expression.resolveAsync.call(a,s,r,e,o,u)}).then(function(t){i.push(t)})}},{type:t.expression.type.key.brackets,regex:/^\[([^\]\:]*)\]/,next:t.expression.set.operations_extended.concat([t.expression.type.parameter.start]),compile:function(e,n,i){var r=e.match[1];delete e.value,delete e.match,e.stack=t.expression.compile({value:r}).stack,i.push(e)},parse:function(n,i,r,o){var s,a,l=this,u=null;return e(this,n.params,r).then(function(e){return u=e,t.expression.parseAsync.call(l,n.stack,r)}).then(function(e){if(null==(s=i.pop())){if(l.options.strict_variables)throw new t.Error("Can't access a key "+e+" on an null or undefined object.");return null}return a="object"==typeof s&&e in s?s[e]:null,t.expression.resolveAsync.call(l,a,s,u,o)}).then(function(t){i.push(t)})}},{type:t.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:t.expression.set.operations,compile:function(t,e,n){delete t.match,t.value=null,n.push(t)},parse:t.expression.fn.parse.push_value},{type:t.expression.type.context,regex:/^_context/,next:t.expression.set.operations_extended.concat([t.expression.type.parameter.start]),compile:t.expression.fn.compile.push,parse:function(t,e,n){e.push(n)}},{type:t.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:t.expression.set.operations,compile:function(t,e,n){t.value="true"===t.match[0].toLowerCase(),delete t.match,n.push(t)},parse:t.expression.fn.parse.push_value}],t.expression.resolveAsync=function(e,n,i,r,o){if("function"!=typeof e)return t.Promise.resolve(e);var s=t.Promise.resolve(i);if(r&&r.type===t.expression.type.parameter.end){s=s.then(function(){return r.params&&t.expression.parseAsync.call(this,r.params,n,!0)}).then(function(t){return r.cleanup=!0,t})}return s.then(function(t){return e.apply(o||n,t||[])})},t.expression.resolve=function(e,n,i,r,o){return t.async.potentiallyAsync(this,!1,function(){return t.expression.resolveAsync.call(this,e,n,i,r,o)})},t.expression.handler={},t.expression.extendType=function(e){t.expression.type[e]="Twig.expression.type."+e},t.expression.extend=function(e){if(!e.type)throw new t.Error("Unable to extend logic definition. No type provided for "+e);t.expression.handler[e.type]=e};t.expression.definitions.length>0;)t.expression.extend(t.expression.definitions.shift());return t.expression.tokenize=function(e){var n,i,r,o,s,a,l=[],u=0,c=null,h=[];for(a=function(){for(var e=arguments.length-2,i=new Array(e);e-- >0;)i[e]=arguments[e];if(t.log.trace("Twig.expression.tokenize","Matched a ",n," regular expression of ",i),c&&t.indexOf(c,n)<0)return h.push(n+" cannot follow a "+l[l.length-1].type+" at template:"+u+" near '"+i[0].substring(0,20)+"...'"),i[0];var r=t.expression.handler[n];return r.validate&&!r.validate(i,l)?i[0]:(h=[],l.push({type:n,value:i[0],match:i}),s=!0,c=o,u+=i[0].length,r.transform?r.transform(i,l):"")},t.log.debug("Twig.expression.tokenize","Tokenizing expression ",e);e.length>0;){for(n in e=e.trim(),t.expression.handler){if(o=t.expression.handler[n].next,i=t.expression.handler[n].regex,t.log.trace("Checking type ",n," on ",e),s=!1,t.lib.isArray(i))for(r=i.length;r-- >0;)e=e.replace(i[r],a);else e=e.replace(i,a);if(s)break}if(!s)throw h.length>0?new t.Error(h.join(" OR ")):new t.Error("Unable to parse '"+e+"' at template position"+u)}return t.log.trace("Twig.expression.tokenize","Tokenized to ",l),l},t.expression.compile=function(e){var n=e.value,i=t.expression.tokenize(n),r=null,o=[],s=[],a=null;for(t.log.trace("Twig.expression.compile: ","Compiling ",n);i.length>0;)r=i.shift(),a=t.expression.handler[r.type],t.log.trace("Twig.expression.compile: ","Compiling ",r),a.compile&&a.compile(r,s,o),t.log.trace("Twig.expression.compile: ","Stack is",s),t.log.trace("Twig.expression.compile: ","Output is",o);for(;s.length>0;)o.push(s.pop());return t.log.trace("Twig.expression.compile: ","Final output is",o),e.stack=o,delete e.value,e},t.expression.parse=function(e,n,i,r){var o=this;t.lib.isArray(e)||(e=[e]);var s=[],a=[],l=t.expression.type.operator.binary;return t.async.potentiallyAsync(this,r,function(){return t.async.forEach(e,function(i,r){var u,c=null,h=null;if(!i.cleanup)return e.length>r+1&&(h=e[r+1]),(c=t.expression.handler[i.type]).parse&&(u=c.parse.call(o,i,s,n,h)),i.type===l&&n.loop&&a.push(i),u}).then(function(){for(var t=a.length,e=null;t-- >0;)(e=a[t]).params&&e.key&&delete e.key;if(i){var n=s.splice(0);s.push(n)}return s.pop()})})},t}},function(t,e){t.exports=function(t){"use strict";t.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var e=function(t,e){if(null==e)return null;if(void 0!==e.indexOf)return t===e||""!==t&&e.indexOf(t)>-1;var n;for(n in e)if(e.hasOwnProperty(n)&&e[n]===t)return!0;return!1};return t.expression.operator.lookup=function(e,n){switch(e){case"..":n.precidence=20,n.associativity=t.expression.operator.leftToRight;break;case",":n.precidence=18,n.associativity=t.expression.operator.leftToRight;break;case"?:":case"?":case":":n.precidence=16,n.associativity=t.expression.operator.rightToLeft;break;case"??":n.precidence=15,n.associativity=t.expression.operator.rightToLeft;break;case"or":n.precidence=14,n.associativity=t.expression.operator.leftToRight;break;case"and":n.precidence=13,n.associativity=t.expression.operator.leftToRight;break;case"b-or":n.precidence=12,n.associativity=t.expression.operator.leftToRight;break;case"b-xor":n.precidence=11,n.associativity=t.expression.operator.leftToRight;break;case"b-and":n.precidence=10,n.associativity=t.expression.operator.leftToRight;break;case"==":case"!=":n.precidence=9,n.associativity=t.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":case"not in":case"in":n.precidence=8,n.associativity=t.expression.operator.leftToRight;break;case"~":case"+":case"-":n.precidence=6,n.associativity=t.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":n.precidence=5,n.associativity=t.expression.operator.leftToRight;break;case"not":n.precidence=3,n.associativity=t.expression.operator.rightToLeft;break;case"matches":case"starts with":case"ends with":n.precidence=8,n.associativity=t.expression.operator.leftToRight;break;default:throw new t.Error("Failed to lookup operator: "+e+" is an unknown operator.")}return n.operator=e,n},t.expression.operator.parse=function(n,i){var r,o,s;if(t.log.trace("Twig.expression.operator.parse: ","Handling ",n),"?"===n&&(s=i.pop()),o=i.pop(),"not"!==n&&(r=i.pop()),"in"!==n&&"not in"!==n&&(r&&Array.isArray(r)&&(r=r.length),o&&Array.isArray(o)&&(o=o.length)),"matches"===n&&o&&"string"==typeof o){var a=o.match(/^\/(.*)\/([gims]?)$/),l=a[1],u=a[2];o=new RegExp(l,u)}switch(n){case":":break;case"??":void 0===r&&(r=o,o=s,s=void 0),null!=r?i.push(r):i.push(o);break;case"?:":t.lib.boolval(r)?i.push(r):i.push(o);break;case"?":void 0===r&&(r=o,o=s,s=void 0),t.lib.boolval(r)?i.push(o):i.push(s);break;case"+":o=parseFloat(o),r=parseFloat(r),i.push(r+o);break;case"-":o=parseFloat(o),r=parseFloat(r),i.push(r-o);break;case"*":o=parseFloat(o),r=parseFloat(r),i.push(r*o);break;case"/":o=parseFloat(o),r=parseFloat(r),i.push(r/o);break;case"//":o=parseFloat(o),r=parseFloat(r),i.push(Math.floor(r/o));break;case"%":o=parseFloat(o),r=parseFloat(r),i.push(r%o);break;case"~":i.push((null!=r?r.toString():"")+(null!=o?o.toString():""));break;case"not":case"!":i.push(!t.lib.boolval(o));break;case"<":i.push(r<o);break;case"<=":i.push(r<=o);break;case">":i.push(r>o);break;case">=":i.push(r>=o);break;case"===":i.push(r===o);break;case"==":i.push(r==o);break;case"!==":i.push(r!==o);break;case"!=":i.push(r!=o);break;case"or":i.push(t.lib.boolval(r)||t.lib.boolval(o));break;case"b-or":i.push(r|o);break;case"b-xor":i.push(r^o);break;case"and":i.push(t.lib.boolval(r)&&t.lib.boolval(o));break;case"b-and":i.push(r&o);break;case"**":i.push(Math.pow(r,o));break;case"not in":i.push(!e(r,o));break;case"in":i.push(e(r,o));break;case"matches":i.push(o.test(r));break;case"starts with":i.push(0===r.indexOf(o));break;case"ends with":i.push(-1!==r.indexOf(o,r.length-o.length));break;case"..":i.push(t.functions.range(r,o));break;default:throw new t.Error("Failed to parse operator: "+n+" is an unknown operator.")}},t}},function(t,e){t.exports=function(t){function e(t,e){var n=Object.prototype.toString.call(e).slice(8,-1);return null!=e&&n===t}return t.filters={upper:function(t){return"string"!=typeof t?t:t.toUpperCase()},lower:function(t){return"string"!=typeof t?t:t.toLowerCase()},capitalize:function(t){return"string"!=typeof t?t:t.substr(0,1).toUpperCase()+t.toLowerCase().substr(1)},title:function(t){return"string"!=typeof t?t:t.toLowerCase().replace(/(^|\s)([a-z])/g,function(t,e,n){return e+n.toUpperCase()})},length:function(e){return t.lib.is("Array",e)||"string"==typeof e?e.length:t.lib.is("Object",e)?void 0===e._keys?Object.keys(e).length:e._keys.length:0},reverse:function(t){if(e("Array",t))return t.reverse();if(e("String",t))return t.split("").reverse().join("");if(e("Object",t)){var n=t._keys||Object.keys(t).reverse();return t._keys=n,t}},sort:function(t){if(e("Array",t))return t.sort();if(e("Object",t)){delete t._keys;var n=Object.keys(t).sort(function(e,n){var i;return t[e]>t[n]==!(t[e]<=t[n])?t[e]>t[n]?1:t[e]<t[n]?-1:0:isNaN(i=parseFloat(t[e]))||isNaN(b1=parseFloat(t[n]))?"string"==typeof t[e]?t[e]>t[n].toString()?1:t[e]<t[n].toString()?-1:0:"string"==typeof t[n]?t[e].toString()>t[n]?1:t[e].toString()<t[n]?-1:0:null:i>b1?1:i<b1?-1:0});return t._keys=n,t}},keys:function(e){if(null!=e){var n=e._keys||Object.keys(e),i=[];return t.forEach(n,function(t){"_keys"!==t&&e.hasOwnProperty(t)&&i.push(t)}),i}},url_encode:function(e){if(null!=e){if(t.lib.is("Object",e)){var n=function(e,i){var r=[],o=e._keys||Object.keys(e);return t.forEach(o,function(o){if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?i+"["+o+"]":o,a=e[o];r.push(t.lib.is("Object",a)||t.lib.isArray(a)?n(a,s):encodeURIComponent(s)+"="+encodeURIComponent(a))}}),r.join("&amp;")};return n(e)}var i=encodeURIComponent(e);return i=i.replace("'","%27")}},join:function(n,i){if(null!=n){var r="",o=[],s=null;return i&&i[0]&&(r=i[0]),e("Array",n)?o=n:(s=n._keys||Object.keys(n),t.forEach(s,function(t){"_keys"!==t&&n.hasOwnProperty(t)&&o.push(n[t])})),o.join(r)}},default:function(e,n){if(void 0!==n&&n.length>1)throw new t.Error("default filter expects one argument");return null==e||""===e?void 0===n?"":n[0]:e},json_encode:function(n){if(null==n)return"null";if("object"==typeof n&&e("Array",n))return r=[],t.forEach(n,function(e){r.push(t.filters.json_encode(e))}),"["+r.join(",")+"]";if("object"==typeof n&&e("Date",n))return'"'+n.toISOString()+'"';if("object"==typeof n){var i=n._keys||Object.keys(n),r=[];return t.forEach(i,function(e){r.push(JSON.stringify(e)+":"+t.filters.json_encode(n[e]))}),"{"+r.join(",")+"}"}return JSON.stringify(n)},merge:function(n,i){var r=[],o=0,s=[];if(e("Array",n)?t.forEach(i,function(t){e("Array",t)||(r={})}):r={},e("Array",r)||(r._keys=[]),e("Array",n)?t.forEach(n,function(t){r._keys&&r._keys.push(o),r[o]=t,o++}):(s=n._keys||Object.keys(n),t.forEach(s,function(t){r[t]=n[t],r._keys.push(t);var e=parseInt(t,10);!isNaN(e)&&e>=o&&(o=e+1)})),t.forEach(i,function(n){e("Array",n)?t.forEach(n,function(t){r._keys&&r._keys.push(o),r[o]=t,o++}):(s=n._keys||Object.keys(n),t.forEach(s,function(t){r[t]||r._keys.push(t),r[t]=n[t];var e=parseInt(t,10);!isNaN(e)&&e>=o&&(o=e+1)}))}),0===i.length)throw new t.Error("Filter merge expects at least one parameter");return r},date:function(e,n){var i=t.functions.date(e),r=n&&n.length?n[0]:"F j, Y H:i";return t.lib.date(r.replace(/\\\\/g,"\\"),i)},date_modify:function(e,n){if(null!=e){if(void 0===n||1!==n.length)throw new t.Error("date_modify filter expects 1 argument");var i,r=n[0];return t.lib.is("Date",e)&&(i=t.lib.strtotime(r,e.getTime()/1e3)),t.lib.is("String",e)&&(i=t.lib.strtotime(r,t.lib.strtotime(e))),t.lib.is("Number",e)&&(i=t.lib.strtotime(r,e)),new Date(1e3*i)}},replace:function(e,n){if(null!=e){var i,r=n[0];for(i in r)r.hasOwnProperty(i)&&"_keys"!==i&&(e=t.lib.replaceAll(e,i,r[i]));return e}},format:function(e,n){if(null!=e)return t.lib.vsprintf(e,n)},striptags:function(e,n){if(null!=e)return t.lib.strip_tags(e,n)},escape:function(e,n){if(null!=e){var i="html";if(n&&n.length&&!0!==n[0]&&(i=n[0]),"html"==i){var r=e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return t.Markup(r,"html")}if("js"==i){r=e.toString();for(var o="",s=0;s<r.length;s++){if(r[s].match(/^[a-zA-Z0-9,\._]$/))o+=r[s];else o+=(a=r.charCodeAt(s))<128?"\\x"+a.toString(16).toUpperCase():t.lib.sprintf("\\u%04s",a.toString(16).toUpperCase())}return t.Markup(o,"js")}if("css"==i){for(r=e.toString(),o="",s=0;s<r.length;s++){if(r[s].match(/^[a-zA-Z0-9]$/))o+=r[s];else o+="\\"+(a=r.charCodeAt(s)).toString(16).toUpperCase()+" "}return t.Markup(o,"css")}if("url"==i){o=t.filters.url_encode(e);return t.Markup(o,"url")}if("html_attr"==i){for(r=e.toString(),o="",s=0;s<r.length;s++)if(r[s].match(/^[a-zA-Z0-9,\.\-_]$/))o+=r[s];else if(r[s].match(/^[&<>"]$/))o+=r[s].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{var a;o+=(a=r.charCodeAt(s))<=31&&9!=a&&10!=a&&13!=a?"&#xFFFD;":a<128?t.lib.sprintf("&#x%02s;",a.toString(16).toUpperCase()):t.lib.sprintf("&#x%04s;",a.toString(16).toUpperCase())}return t.Markup(o,"html_attr")}throw new t.Error("escape strategy unsupported")}},e:function(e,n){return t.filters.escape(e,n)},nl2br:function(e){if(null!=e){var n="<br />BACKSLASH_n_replace";return e=t.filters.escape(e).replace(/\r\n/g,n).replace(/\r/g,n).replace(/\n/g,n),e=t.lib.replaceAll(e,"BACKSLASH_n_replace","\n"),t.Markup(e)}},number_format:function(t,e){var n=t,i=e&&e[0]?e[0]:void 0,r=e&&void 0!==e[1]?e[1]:".",o=e&&void 0!==e[2]?e[2]:",";n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var s=isFinite(+n)?+n:0,a=isFinite(+i)?Math.abs(i):0,l="";return(l=(a?function(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}(s,a):""+Math.round(s)).split("."))[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(l[1]||"").length<a&&(l[1]=l[1]||"",l[1]+=new Array(a-l[1].length+1).join("0")),l.join(r)},trim:function(t,e){if(null!=t){var n,i=""+t;n=e&&e[0]?""+e[0]:" \n\r\t\f\v            ​\u2028\u2029　";for(var r=0;r<i.length;r++)if(-1===n.indexOf(i.charAt(r))){i=i.substring(r);break}for(r=i.length-1;r>=0;r--)if(-1===n.indexOf(i.charAt(r))){i=i.substring(0,r+1);break}return-1===n.indexOf(i.charAt(0))?i:""}},truncate:function(t,e){var n=30,i=!1,r="...";if(t+="",e&&(e[0]&&(n=e[0]),e[1]&&(i=e[1]),e[2]&&(r=e[2])),t.length>n){if(i&&-1===(n=t.indexOf(" ",n)))return t;t=t.substr(0,n)+r}return t},slice:function(e,n){if(null!=e){if(void 0===n||n.length<1)throw new t.Error("slice filter expects at least 1 argument");var i=n[0]||0,r=n.length>1?n[1]:e.length,o=i>=0?i:Math.max(e.length+i,0);if(t.lib.is("Array",e)){for(var s=[],a=o;a<o+r&&a<e.length;a++)s.push(e[a]);return s}if(t.lib.is("String",e))return e.substr(o,r);throw new t.Error("slice filter expects value to be an array or string")}},abs:function(t){if(null!=t)return Math.abs(t)},first:function(t){if(e("Array",t))return t[0];if(e("Object",t)){if("_keys"in t)return t[t._keys[0]]}else if("string"==typeof t)return t.substr(0,1)},split:function(e,n){if(null!=e){if(void 0===n||n.length<1||n.length>2)throw new t.Error("split filter expects 1 or 2 argument");if(t.lib.is("String",e)){var i=n[0],r=n[1],o=e.split(i);if(void 0===r)return o;if(r<0)return e.split(i,o.length+r);var s=[];if(""==i)for(;o.length>0;){for(var a="",l=0;l<r&&o.length>0;l++)a+=o.shift();s.push(a)}else{for(l=0;l<r-1&&o.length>0;l++)s.push(o.shift());o.length>0&&s.push(o.join(i))}return s}throw new t.Error("split filter expects value to be a string")}},last:function(e){var n;return t.lib.is("Object",e)?e[(n=void 0===e._keys?Object.keys(e):e._keys)[n.length-1]]:e[e.length-1]},raw:function(e){return t.Markup(e)},batch:function(e,n){var i,r,o,s=n.shift(),a=n.shift();if(!t.lib.is("Array",e))throw new t.Error("batch filter expects items to be an array");if(!t.lib.is("Number",s))throw new t.Error("batch filter expects size to be a number");if(s=Math.ceil(s),i=t.lib.chunkArray(e,s),a&&e.length%s!=0){for(o=s-(r=i.pop()).length;o--;)r.push(a);i.push(r)}return i},round:function(e,n){var i=(n=n||[]).length>0?n[0]:0,r=n.length>1?n[1]:"common";if(e=parseFloat(e),i&&!t.lib.is("Number",i))throw new t.Error("round filter expects precision to be a number");if("common"===r)return t.lib.round(e,i);if(!t.lib.is("Function",Math[r]))throw new t.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[r](e*Math.pow(10,i))/Math.pow(10,i)}},t.filter=function(e,n,i){if(!t.filters[e])throw"Unable to find filter "+e;return t.filters[e].call(this,n,i)},t.filter.extend=function(e,n){t.filters[e]=n},t}},function(t,e,n){t.exports=function(e){return e.functions={range:function(t,e,n){var i,r,o=[],s=n||1,a=!1;if(isNaN(t)||isNaN(e)?isNaN(t)&&isNaN(e)?(a=!0,i=t.charCodeAt(0),r=e.charCodeAt(0)):(i=isNaN(t)?0:t,r=isNaN(e)?0:e):(i=parseInt(t,10),r=parseInt(e,10)),!(i>r))for(;i<=r;)o.push(a?String.fromCharCode(i):i),i+=s;else for(;i>=r;)o.push(a?String.fromCharCode(i):i),i-=s;return o},cycle:function(t,e){return t[e%t.length]},dump:function(){var t=arguments.length;for(args=new Array(t);t-- >0;)args[t]=arguments[t];var n="\n",i="  ",r=0,o="",s=function(t){for(var e="";t>0;)t--,e+=i;return e},a=function(t){o+=s(r),"object"==typeof t?l(t):"function"==typeof t?o+="function()"+n:"string"==typeof t?o+="string("+t.length+') "'+t+'"'+n:"number"==typeof t?o+="number("+t+")"+n:"boolean"==typeof t&&(o+="bool("+t+")"+n)},l=function(t){var e;if(null===t)o+="NULL"+n;else if(void 0===t)o+="undefined"+n;else if("object"==typeof t){for(e in o+=s(r)+typeof t,r++,o+="("+function(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(t)+") {"+n,t)o+=s(r)+"["+e+"]=> "+n,a(t[e]);o+=s(--r)+"}"+n}else a(t)};return 0==args.length&&args.push(this.context),e.forEach(args,function(t){l(t)}),o},date:function(t,n){var i;if(null==t||""===t)i=new Date;else if(e.lib.is("Date",t))i=t;else if(e.lib.is("String",t))i=t.match(/^[0-9]+$/)?new Date(1e3*t):new Date(1e3*e.lib.strtotime(t));else{if(!e.lib.is("Number",t))throw new e.Error("Unable to parse date "+t);i=new Date(1e3*t)}return i},block:function(t){return this.originalBlockTokens[t]?e.logic.parse.call(this,this.originalBlockTokens[t],this.context).output:this.blocks[t]},parent:function(){return e.placeholders.parent},attribute:function(t,n,i){return e.lib.is("Object",t)&&t.hasOwnProperty(n)?"function"==typeof t[n]?t[n].apply(void 0,i):t[n]:t[n]||void 0},max:function(t){return e.lib.is("Object",t)?(delete t._keys,e.lib.max(t)):e.lib.max.apply(null,arguments)},min:function(t){return e.lib.is("Object",t)?(delete t._keys,e.lib.min(t)):e.lib.min.apply(null,arguments)},template_from_string:function(t){return void 0===t&&(t=""),e.Templates.parsers.twig({options:this.options,data:t})},random:function(t){var n=2147483648;function i(t){var e=Math.floor(Math.random()*n),i=Math.min.call(null,0,t),r=Math.max.call(null,0,t);return i+Math.floor((r-i+1)*e/n)}if(e.lib.is("Number",t))return i(t);if(e.lib.is("String",t))return t.charAt(i(t.length-1));if(e.lib.is("Array",t))return t[i(t.length-1)];if(e.lib.is("Object",t)){var r=Object.keys(t);return t[r[i(r.length-1)]]}return i(n-1)},source:function(n,i){var r,o=!1,s={id:n,path:n,method:void 0!==t.exports&&"undefined"==typeof window?"fs":"ajax",parser:"source",async:!1,fetchTemplateSource:!0};void 0===i&&(i=!1);try{null==(r=e.Templates.loadRemote(n,s))?r="":o=!0}catch(t){e.log.debug("Twig.functions.source: ","Problem loading template  ",t)}return o||i?r:'Template "{name}" is not defined.'.replace("{name}",n)}},e._function=function(t,n,i){if(!e.functions[t])throw"Unable to find function "+t;return e.functions[t](n,i)},e._function.extend=function(t,n){e.functions[t]=n},e}},function(t,e,n){t.exports=function(t){t.lib={},t.lib.sprintf=n(0),t.lib.vsprintf=n(11),t.lib.round=n(12),t.lib.max=n(13),t.lib.min=n(14),t.lib.strip_tags=n(15),t.lib.strtotime=n(17),t.lib.date=n(18),t.lib.boolval=n(19);var e=Object.prototype.toString;return t.lib.is=function(t,n){return null!=n&&("Array"===t&&Array.isArray?Array.isArray(n):e.call(n).slice(8,-1)===t)},t.lib.isArray=Array.isArray||function(t){return"Array"===e.call(t).slice(8,-1)},t.lib.copy=function(t){var e,n={};for(e in t)n[e]=t[e];return n},t.lib.extend=function(t,e){var n,i=Object.keys(e||{});for(n=i.length;n--;)t[i[n]]=e[i[n]];return t},t.lib.replaceAll=function(t,e,n){return t.split(e).join(n)},t.lib.chunkArray=function(e,n){var i=[],r=0,o=e.length;if(n<1||!t.lib.is("Array",e))return[];for(;r<o;)i.push(e.slice(r,r+=n));return i},t}},function(t,e,n){"use strict";t.exports=function(t,e){return n(0).apply(this,[t].concat(e))}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i,r,o,s;if(e|=0,o=(t*=i=Math.pow(10,e))%1==.5*(s=t>0|-(t<0)),r=Math.floor(t),o)switch(n){case"PHP_ROUND_HALF_DOWN":t=r+(s<0);break;case"PHP_ROUND_HALF_EVEN":t=r+r%2*s;break;case"PHP_ROUND_HALF_ODD":t=r+!(r%2);break;default:t=r+(s>0)}return(o?t:Math.round(t))/i}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(){var t,e,n=0,r=0,o=arguments,s=o.length,a=function(t){if("[object Array]"===Object.prototype.toString.call(t))return t;var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},l=function t(e,n){var r=0,o=0,s=0,l=0,u=0;if(e===n)return 0;if("object"===(void 0===e?"undefined":i(e))){if("object"===(void 0===n?"undefined":i(n))){if(e=a(e),n=a(n),u=e.length,(l=n.length)>u)return 1;if(l<u)return-1;for(r=0,o=u;r<o;++r){if(1===(s=t(e[r],n[r])))return 1;if(-1===s)return-1}return 0}return-1}return"object"===(void 0===n?"undefined":i(n))?1:isNaN(n)&&!isNaN(e)?0===e?0:e<0?1:-1:isNaN(e)&&!isNaN(n)?0===n?0:n>0?1:-1:n===e?0:n>e?1:-1};if(0===s)throw new Error("At least one value should be passed to max()");if(1===s){if("object"!==i(o[0]))throw new Error("Wrong parameter count for max()");if(0===(t=a(o[0])).length)throw new Error("Array must contain at least one element for max()")}else t=o;for(e=t[0],n=1,r=t.length;n<r;++n)1===l(e,t[n])&&(e=t[n]);return e}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(){var t,e,n=0,r=0,o=arguments,s=o.length,a=function(t){if("[object Array]"===Object.prototype.toString.call(t))return t;var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},l=function t(e,n){var r=0,o=0,s=0,l=0,u=0;if(e===n)return 0;if("object"===(void 0===e?"undefined":i(e))){if("object"===(void 0===n?"undefined":i(n))){if(e=a(e),n=a(n),u=e.length,(l=n.length)>u)return 1;if(l<u)return-1;for(r=0,o=u;r<o;++r){if(1===(s=t(e[r],n[r])))return 1;if(-1===s)return-1}return 0}return-1}return"object"===(void 0===n?"undefined":i(n))?1:isNaN(n)&&!isNaN(e)?0===e?0:e<0?1:-1:isNaN(e)&&!isNaN(n)?0===n?0:n>0?1:-1:n===e?0:n>e?1:-1};if(0===s)throw new Error("At least one value should be passed to min()");if(1===s){if("object"!==i(o[0]))throw new Error("Wrong parameter count for min()");if(0===(t=a(o[0])).length)throw new Error("Array must contain at least one element for min()")}else t=o;for(e=t[0],n=1,r=t.length;n<r;++n)-1===l(e,t[n])&&(e=t[n]);return e}},function(t,e,n){"use strict";t.exports=function(t,e){var i=n(16);e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");for(var r=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,o=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,s=i(t);;){var a=s;if(s=a.replace(o,"").replace(r,function(t,n){return e.indexOf("<"+n.toLowerCase()+">")>-1?t:""}),a===s)return s}}},function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){switch(void 0===t?"undefined":i(t)){case"boolean":return t?"1":"";case"string":return t;case"number":return isNaN(t)?"NAN":isFinite(t)?t+"":(t<0?"-":"")+"INF";case"undefined":return"";case"object":return Array.isArray(t)?"Array":null!==t?"Object":"";case"function":default:throw new Error("Unsupported value type")}}},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,r,o,s,a,l,u,c,h;if(!t)return!1;t=t.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();var p=new RegExp(["^(\\d{1,4})","([\\-\\.\\/:])","(\\d{1,2})","([\\-\\.\\/:])","(\\d{1,4})","(?:\\s(\\d{1,2}):(\\d{2})?:?(\\d{2})?)?","(?:\\s([A-Z]+)?)?$"].join(""));if((i=t.match(p))&&i[2]===i[4])if(i[1]>1901)switch(i[2]){case"-":return!(i[3]>12||i[5]>31)&&new Date(i[1],parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3;case".":return!1;case"/":return!(i[3]>12||i[5]>31)&&new Date(i[1],parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}else if(i[5]>1901)switch(i[2]){case"-":case".":return!(i[3]>12||i[1]>31)&&new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3;case"/":return!(i[1]>12||i[3]>31)&&new Date(i[5],parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3}else switch(i[2]){case"-":return!(i[3]>12||i[5]>31||i[1]<70&&i[1]>38)&&(o=i[1]>=0&&i[1]<=38?+i[1]+2e3:i[1],new Date(o,parseInt(i[3],10)-1,i[5],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3);case".":return i[5]>=70?!(i[3]>12||i[1]>31)&&new Date(i[5],parseInt(i[3],10)-1,i[1],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3:i[5]<60&&!i[6]&&(!(i[1]>23||i[3]>59)&&(r=new Date,new Date(r.getFullYear(),r.getMonth(),r.getDate(),i[1]||0,i[3]||0,i[5]||0,i[9]||0)/1e3));case"/":return!(i[1]>12||i[3]>31||i[5]<70&&i[5]>38)&&(o=i[5]>=0&&i[5]<=38?+i[5]+2e3:i[5],new Date(o,parseInt(i[1],10)-1,i[3],i[6]||0,i[7]||0,i[8]||0,i[9]||0)/1e3);case":":return!(i[1]>23||i[3]>59||i[5]>59)&&(r=new Date,new Date(r.getFullYear(),r.getMonth(),r.getDate(),i[1]||0,i[3]||0,i[5]||0)/1e3)}if("now"===t)return null===e||isNaN(e)?(new Date).getTime()/1e3|0:0|e;if(!isNaN(n=Date.parse(t)))return n/1e3|0;if(p=new RegExp(["^([0-9]{4}-[0-9]{2}-[0-9]{2})","[ t]","([0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]+)?)","([\\+-][0-9]{2}(:[0-9]{2})?|z)"].join("")),(i=t.match(p))&&("z"===i[4]?i[4]="Z":i[4].match(/^([+-][0-9]{2})$/)&&(i[4]=i[4]+":00"),!isNaN(n=Date.parse(i[1]+"T"+i[2]+i[4]))))return n/1e3|0;function f(t){var e=t.split(" "),n=e[0],i=e[1].substring(0,3),r=/\d+/.test(n),o=("last"===n?-1:1)*("ago"===e[2]?-1:1);if(r&&(o*=parseInt(n,10)),l.hasOwnProperty(i)&&!e[1].match(/^mon(day|\.)?$/i))return s["set"+l[i]](s["get"+l[i]]()+o);if("wee"===i)return s.setDate(s.getDate()+7*o);if("next"===n||"last"===n)!function(t,e,n){var i,r=a[e];void 0!==r&&(0==(i=r-s.getDay())?i=7*n:i>0&&"last"===t?i-=7:i<0&&"next"===t&&(i+=7),s.setDate(s.getDate()+i))}(n,i,o);else if(!r)return!1;return!0}if(s=e?new Date(1e3*e):new Date,a={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},l={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},"([+-]?\\d+\\s"+(c="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)")+"|(last|next)\\s"+c+")(\\sago)?",!(i=t.match(new RegExp("([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)|(last|next)\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?))(\\sago)?","gi"))))return!1;for(h=0,u=i.length;h<u;h++)if(!f(i[h]))return!1;return s.getTime()/1e3}},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,r=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],o=/\\?(.?)/gi,s=function(t,e){return i[t]?i[t]():e},a=function(t,e){for(t=String(t);t.length<e;)t="0"+t;return t};i={d:function(){return a(i.j(),2)},D:function(){return i.l().slice(0,3)},j:function(){return n.getDate()},l:function(){return r[i.w()]+"day"},N:function(){return i.w()||7},S:function(){var t=i.j(),e=t%10;return e<=3&&1===parseInt(t%100/10,10)&&(e=0),["st","nd","rd"][e-1]||"th"},w:function(){return n.getDay()},z:function(){var t=new Date(i.Y(),i.n()-1,i.j()),e=new Date(i.Y(),0,1);return Math.round((t-e)/864e5)},W:function(){var t=new Date(i.Y(),i.n()-1,i.j()-i.N()+3),e=new Date(t.getFullYear(),0,4);return a(1+Math.round((t-e)/864e5/7),2)},F:function(){return r[6+i.n()]},m:function(){return a(i.n(),2)},M:function(){return i.F().slice(0,3)},n:function(){return n.getMonth()+1},t:function(){return new Date(i.Y(),i.n(),0).getDate()},L:function(){var t=i.Y();return t%4==0&t%100!=0|t%400==0},o:function(){var t=i.n(),e=i.W();return i.Y()+(12===t&&e<9?1:1===t&&e>9?-1:0)},Y:function(){return n.getFullYear()},y:function(){return i.Y().toString().slice(-2)},a:function(){return n.getHours()>11?"pm":"am"},A:function(){return i.a().toUpperCase()},B:function(){var t=3600*n.getUTCHours(),e=60*n.getUTCMinutes(),i=n.getUTCSeconds();return a(Math.floor((t+e+i+3600)/86.4)%1e3,3)},g:function(){return i.G()%12||12},G:function(){return n.getHours()},h:function(){return a(i.g(),2)},H:function(){return a(i.G(),2)},i:function(){return a(n.getMinutes(),2)},s:function(){return a(n.getSeconds(),2)},u:function(){return a(1e3*n.getMilliseconds(),6)},e:function(){throw new Error("Not supported (see source code of date() for timezone on how to add support)")},I:function(){return new Date(i.Y(),0)-Date.UTC(i.Y(),0)!=new Date(i.Y(),6)-Date.UTC(i.Y(),6)?1:0},O:function(){var t=n.getTimezoneOffset(),e=Math.abs(t);return(t>0?"-":"+")+a(100*Math.floor(e/60)+e%60,4)},P:function(){var t=i.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-n.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(o,s)},r:function(){return"D, d M Y H:i:s O".replace(o,s)},U:function(){return n/1e3|0}};return function(t,e){return n=void 0===e?new Date:e instanceof Date?new Date(e):new Date(1e3*e),t.replace(o,s)}(t,e)}},function(t,e,n){"use strict";t.exports=function(t){return!1!==t&&(0!==t&&0!==t&&(""!==t&&"0"!==t&&((!Array.isArray(t)||0!==t.length)&&null!=t)))}},function(t,e){t.exports=function(t){"use strict";t.Templates.registerLoader("ajax",function(e,n,i,r){var o,s,a=n.precompiled,l=this.parsers[n.parser]||this.parser.twig;if("undefined"==typeof XMLHttpRequest)throw new t.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');return(s=new XMLHttpRequest).onreadystatechange=function(){var u=null;4===s.readyState&&(200===s.status||window.cordova&&0==s.status?(t.log.debug("Got template ",s.responseText),u=!0===a?JSON.parse(s.responseText):s.responseText,n.url=e,n.data=u,o=l.call(this,n),"function"==typeof i&&i(o)):"function"==typeof r&&r(s))},s.open("GET",e,!!n.async),s.send(),!!n.async||o})}},function(t,e,n){t.exports=function(t){"use strict";var e,i;try{e=n(22),i=n(1)}catch(t){}t.Templates.registerLoader("fs",function(n,r,o,s){var a,l=null,u=r.precompiled,c=this.parsers[r.parser]||this.parser.twig;if(!e||!i)throw new t.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');var h=function(t,e){t?"function"==typeof s&&s(t):(!0===u&&(e=JSON.parse(e)),r.data=e,r.path=r.path||n,a=c.call(this,r),"function"==typeof o&&o(a))};if(r.path=r.path||n,r.async)return e.stat(r.path,function(n,i){!n&&i.isFile()?e.readFile(r.path,"utf8",h):"function"==typeof s&&s(new t.Error("Unable to find template file "+r.path))}),!0;try{if(!e.statSync(r.path).isFile())throw new t.Error("Unable to find template file "+r.path)}catch(e){throw new t.Error("Unable to find template file "+r.path)}return l=e.readFileSync(r.path,"utf8"),h(void 0,l),a})}},function(t,e){t.exports=n(215)},function(t,e){t.exports=function(t){"use strict";for(t.logic={},t.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed",with:"Twig.logic.type.with",endwith:"Twig.logic.type.endwith"},t.logic.definitions=[{type:t.logic.type.if_,regex:/^if\s?([\s\S]+)$/,next:[t.logic.type.else_,t.logic.type.elseif,t.logic.type.endif],open:!0,compile:function(e){var n=e.match[1];return e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,delete e.match,e},parse:function(e,n,i){var r=this;return t.expression.parseAsync.call(this,e.stack,n).then(function(o){return i=!0,t.lib.boolval(o)?(i=!1,t.parseAsync.call(r,e.output,n)):""}).then(function(t){return{chain:i,output:t}})}},{type:t.logic.type.elseif,regex:/^elseif\s?([^\s].*)$/,next:[t.logic.type.else_,t.logic.type.elseif,t.logic.type.endif],open:!1,compile:function(e){var n=e.match[1];return e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,delete e.match,e},parse:function(e,n,i){var r=this;return t.expression.parseAsync.call(this,e.stack,n).then(function(o){return i&&t.lib.boolval(o)?(i=!1,t.parseAsync.call(r,e.output,n)):""}).then(function(t){return{chain:i,output:t}})}},{type:t.logic.type.else_,regex:/^else$/,next:[t.logic.type.endif,t.logic.type.endfor],open:!1,parse:function(e,n,i){var r=t.Promise.resolve("");return i&&(r=t.parseAsync.call(this,e.output,n)),r.then(function(t){return{chain:i,output:t}})}},{type:t.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:t.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([\S\s]+?)(?:\s+if\s+([^\s].*))?$/,next:[t.logic.type.else_,t.logic.type.endfor],open:!0,compile:function(e){var n=e.match[1],i=e.match[2],r=e.match[3],o=null;if(e.key_var=null,e.value_var=null,n.indexOf(",")>=0){if(2!==(o=n.split(",")).length)throw new t.Error("Invalid expression in for loop: "+n);e.key_var=o[0].trim(),e.value_var=o[1].trim()}else e.value_var=n.trim();return e.expression=t.expression.compile.call(this,{type:t.expression.type.expression,value:i}).stack,r&&(e.conditional=t.expression.compile.call(this,{type:t.expression.type.expression,value:r}).stack),delete e.match,e},parse:function(e,n,i){var r,o,s=[],a=0,l=this,u=e.conditional,c=function(i,o){var c=t.ChildContext(n);return c[e.value_var]=o,e.key_var&&(c[e.key_var]=i),c.loop=function(t,e){var i=void 0!==u;return{index:t+1,index0:t,revindex:i?void 0:e-t,revindex0:i?void 0:e-t-1,first:0===t,last:i?void 0:t===e-1,length:i?void 0:e,parent:n}}(a,r),(void 0===u?t.Promise.resolve(!0):t.expression.parseAsync.call(l,u,c)).then(function(n){if(n)return t.parseAsync.call(l,e.output,c).then(function(t){s.push(t),a+=1})}).then(function(){delete c.loop,delete c[e.value_var],delete c[e.key_var],t.merge(n,c,!0)})};return t.expression.parseAsync.call(this,e.expression,n).then(function(e){return t.lib.isArray(e)?(r=e.length,t.async.forEach(e,function(t){return c(a,t)})):t.lib.is("Object",e)?(o=void 0!==e._keys?e._keys:Object.keys(e),r=o.length,t.async.forEach(o,function(t){if("_keys"!==t)return c(t,e[t])})):void 0}).then(function(){return{chain:0===s.length,output:t.output.call(l,s)}})}},{type:t.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:t.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(e){var n=e.match[1].trim(),i=e.match[2],r=t.expression.compile.call(this,{type:t.expression.type.expression,value:i}).stack;return e.key=n,e.expression=r,delete e.match,e},parse:function(e,n,i){var r=e.key;return t.expression.parseAsync.call(this,e.expression,n).then(function(e){return e===n&&(e=t.lib.copy(e)),n[r]=e,{chain:i,context:n}})}},{type:t.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[t.logic.type.endset],open:!0,compile:function(t){var e=t.match[1].trim();return t.key=e,delete t.match,t},parse:function(e,n,i){var r=this,o=e.key;return t.parseAsync.call(this,e.output,n).then(function(t){return r.context[o]=t,n[o]=t,{chain:i,context:n}})}},{type:t.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:t.logic.type.filter,regex:/^filter\s+(.+)$/,next:[t.logic.type.endfilter],open:!0,compile:function(e){var n="|"+e.match[1].trim();return e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,delete e.match,e},parse:function(e,n,i){var r=this;return t.parseAsync.call(this,e.output,n).then(function(i){var o=[{type:t.expression.type.string,value:i}].concat(e.stack);return t.expression.parseAsync.call(r,o,n)}).then(function(t){return{chain:i,output:t}})}},{type:t.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:t.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[t.logic.type.endblock],open:!0,compile:function(t){return t.block=t.match[1].trim(),delete t.match,t},parse:function(e,n,i){var r,o=this,s=t.Promise.resolve(),a=t.indexOf(this.importedBlocks,e.block)>-1,l=this.blocks[e.block]&&t.indexOf(this.blocks[e.block],t.placeholders.parent)>-1;return t.forEach(this.parseStack,function(n){n.type==t.logic.type.for_&&(e.overwrite=!0)}),(void 0===this.blocks[e.block]||a||l||e.overwrite)&&(s=(s=e.expression?t.expression.parseAsync.call(this,e.output,n).then(function(e){return t.expression.parseAsync.call(o,{type:t.expression.type.string,value:e},n)}):t.parseAsync.call(this,e.output,n).then(function(e){return t.expression.parseAsync.call(o,{type:t.expression.type.string,value:e},n)})).then(function(n){a&&o.importedBlocks.splice(o.importedBlocks.indexOf(e.block),1),o.blocks[e.block]=l?t.Markup(o.blocks[e.block].replace(t.placeholders.parent,n)):n,o.originalBlockTokens[e.block]={type:e.type,block:e.block,output:e.output,overwrite:!0}})),s.then(function(){return r=o.child.blocks[e.block]?o.child.blocks[e.block]:o.blocks[e.block],{chain:i,output:r}})}},{type:t.logic.type.shortblock,regex:/^block\s+([a-zA-Z0-9_]+)\s+(.+)$/,next:[],open:!0,compile:function(e){return e.expression=e.match[2].trim(),e.output=t.expression.compile({type:t.expression.type.expression,value:e.expression}).stack,e.block=e.match[1].trim(),delete e.match,e},parse:function(e,n,i){for(var r=new Array(arguments.length),o=arguments.length;o-- >0;)r[o]=arguments[o];return t.logic.handler[t.logic.type.block].parse.apply(this,r)}},{type:t.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:t.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(e){var n=e.match[1].trim();return delete e.match,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,e},parse:function(e,n,i){var r=this,o=t.ChildContext(n);return t.expression.parseAsync.call(this,e.stack,n).then(function(e){return r.extend=e,(e instanceof t.Template?e:r.importFile(e)).renderAsync(o)}).then(function(){return t.lib.extend(n,o),{chain:i,output:""}})}},{type:t.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(e){var n=e.match[1].trim();return delete e.match,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,e},parse:function(e,n,i){var r=this;return t.expression.parseAsync.call(this,e.stack,n).then(function(t){return r.importBlocks(t),{chain:i,output:""}})}},{type:t.logic.type.include,regex:/^include\s+(.+?)(?:\s|$)(ignore missing(?:\s|$))?(?:with\s+([\S\s]+?))?(?:\s|$)(only)?$/,next:[],open:!0,compile:function(e){var n=e.match,i=n[1].trim(),r=void 0!==n[2],o=n[3],s=void 0!==n[4]&&n[4].length;return delete e.match,e.only=s,e.ignoreMissing=r,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:i}).stack,void 0!==o&&(e.withStack=t.expression.compile.call(this,{type:t.expression.type.expression,value:o.trim()}).stack),e},parse:function(e,n,i){var r=e.only?{}:t.ChildContext(n),o=e.ignoreMissing,s=this,a={chain:i,output:""};return(void 0!==e.withStack?t.expression.parseAsync.call(this,e.withStack,n).then(function(e){t.lib.extend(r,e)}):t.Promise.resolve()).then(function(){return t.expression.parseAsync.call(s,e.stack,n)}).then(function(e){if(e instanceof t.Template)return e.renderAsync(r,{isInclude:!0});try{return s.importFile(e).renderAsync(r,{isInclude:!0})}catch(t){if(o)return"";throw t}}).then(function(t){return""!==t&&(a.output=t),a})}},{type:t.logic.type.spaceless,regex:/^spaceless$/,next:[t.logic.type.endspaceless],open:!0,parse:function(e,n,i){return t.parseAsync.call(this,e.output,n).then(function(e){var n=e.replace(/>\s+</g,"><").trim();return n=t.Markup(n),{chain:i,output:n}})}},{type:t.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:t.logic.type.macro,regex:/^macro\s+([a-zA-Z0-9_]+)\s*\(\s*((?:[a-zA-Z0-9_]+(?:\s*=\s*([\s\S]+))?(?:,\s*)?)*)\s*\)$/,next:[t.logic.type.endmacro],open:!0,compile:function(e){var n=e.match[1],i=e.match[2].split(/\s*,\s*/),r=i.map(function(t){return t.split(/\s*=\s*/)[0]}),o=r.length;if(o>1)for(var s={},a=0;a<o;a++){var l=r[a];if(s[l])throw new t.Error("Duplicate arguments for parameter: "+l);s[l]=1}return e.macroName=n,e.parameters=r,e.defaults=i.reduce(function(e,n){var i=n.split(/\s*=\s*/),r=i[0],o=i[1];return e[r]=o?t.expression.compile.call(this,{type:t.expression.type.expression,value:o}).stack:void 0,e},{}),delete e.match,e},parse:function(e,n,i){var r=this;return this.macros[e.macroName]=function(){var i={_self:r.macros},o=Array.prototype.slice.call(arguments);return t.async.forEach(e.parameters,function(r,s){return void 0!==o[s]?(i[r]=o[s],!0):void 0!==e.defaults[r]?t.expression.parseAsync.call(this,e.defaults[r],n).then(function(e){return i[r]=e,t.Promise.resolve()}):(i[r]=void 0,!0)}).then(function(){return t.parseAsync.call(r,e.output,i)})},{chain:i,output:""}}},{type:t.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:t.logic.type.import_,regex:/^import\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(e){var n=e.match[1].trim(),i=e.match[2].trim();return delete e.match,e.expression=n,e.contextName=i,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,e},parse:function(e,n,i){var r=this,o={chain:i,output:""};return"_self"===e.expression?(n[e.contextName]=this.macros,t.Promise.resolve(o)):t.expression.parseAsync.call(this,e.stack,n).then(function(t){return r.importFile(t||e.expression)}).then(function(t){return n[e.contextName]=t.renderAsync({},{output:"macros"}),o})}},{type:t.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(e){for(var n=e.match[1].trim(),i=e.match[2].trim().split(/\s*,\s*/),r={},o=0;o<i.length;o++){var s=i[o],a=s.match(/^([a-zA-Z0-9_]+)\s+as\s+([a-zA-Z0-9_]+)$/);a?r[a[1].trim()]=a[2].trim():s.match(/^([a-zA-Z0-9_]+)$/)&&(r[s]=s)}return delete e.match,e.expression=n,e.macroNames=r,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:n}).stack,e},parse:function(e,n,i){var r=this,o=t.Promise.resolve(this.macros);return"_self"!==e.expression&&(o=t.expression.parseAsync.call(this,e.stack,n).then(function(t){return r.importFile(t||e.expression)}).then(function(t){return t.renderAsync({},{output:"macros"})})),o.then(function(t){for(var r in e.macroNames)t.hasOwnProperty(r)&&(n[e.macroNames[r]]=t[r]);return{chain:i,output:""}})}},{type:t.logic.type.embed,regex:/^embed\s+(.+?)(?:\s+(ignore missing))?(?:\s+with\s+([\S\s]+?))?(?:\s+(only))?$/,next:[t.logic.type.endembed],open:!0,compile:function(e){var n=e.match,i=n[1].trim(),r=void 0!==n[2],o=n[3],s=void 0!==n[4]&&n[4].length;return delete e.match,e.only=s,e.ignoreMissing=r,e.stack=t.expression.compile.call(this,{type:t.expression.type.expression,value:i}).stack,void 0!==o&&(e.withStack=t.expression.compile.call(this,{type:t.expression.type.expression,value:o.trim()}).stack),e},parse:function(e,n,i){var r,o,s={},a=this,l=t.Promise.resolve();if(!e.only)for(r in n)n.hasOwnProperty(r)&&(s[r]=n[r]);return void 0!==e.withStack&&(l=t.expression.parseAsync.call(this,e.withStack,n).then(function(t){for(r in t)t.hasOwnProperty(r)&&(s[r]=t[r])})),l.then(function(){return l=null,t.expression.parseAsync.call(a,e.stack,s)}).then(function(n){if(n instanceof t.Template)o=n;else try{o=a.importFile(n)}catch(t){if(e.ignoreMissing)return"";throw a=null,t}return a._blocks=t.lib.copy(a.blocks),a.blocks={},t.parseAsync.call(a,e.output,s).then(function(){return o.renderAsync(s,{blocks:a.blocks})})}).then(function(e){return a.blocks=t.lib.copy(a._blocks),{chain:i,output:e}})}},{type:t.logic.type.endembed,regex:/^endembed$/,next:[],open:!1},{type:t.logic.type.with,regex:/^(?:with\s+([\S\s]+?))(?:\s|$)(only)?$/,next:[t.logic.type.endwith],open:!0,compile:function(e){var n=e.match,i=n[1],r=void 0!==n[2]&&n[2].length;return delete e.match,e.only=r,void 0!==i&&(e.withStack=t.expression.compile.call(this,{type:t.expression.type.expression,value:i.trim()}).stack),e},parse:function(e,n,i){var r,o={},s=this,a=t.Promise.resolve();return e.only||(o=t.ChildContext(n)),void 0!==e.withStack&&(a=t.expression.parseAsync.call(this,e.withStack,n).then(function(t){for(r in t)t.hasOwnProperty(r)&&(o[r]=t[r])})),a.then(function(){return t.parseAsync.call(s,e.output,o)}).then(function(t){return{chain:i,output:t}})}},{type:t.logic.type.endwith,regex:/^endwith$/,next:[],open:!1}],t.logic.handler={},t.logic.extendType=function(e,n){n=n||"Twig.logic.type"+e,t.logic.type[e]=n},t.logic.extend=function(e){if(!e.type)throw new t.Error("Unable to extend logic definition. No type provided for "+e);t.logic.extendType(e.type),t.logic.handler[e.type]=e};t.logic.definitions.length>0;)t.logic.extend(t.logic.definitions.shift());return t.logic.compile=function(e){var n=e.value.trim(),i=t.logic.tokenize.call(this,n),r=t.logic.handler[i.type];return r.compile&&(i=r.compile.call(this,i),t.log.trace("Twig.logic.compile: ","Compiled logic token to ",i)),i},t.logic.tokenize=function(e){var n=null,i=null,r=null,o=null,s=null,a=null,l=null;for(n in e=e.trim(),t.logic.handler)for(i=t.logic.handler[n].type,o=r=t.logic.handler[n].regex,t.lib.isArray(r)||(o=[r]),s=o.length,a=0;a<s;a++)if(null!==(l=o[a].exec(e)))return t.log.trace("Twig.logic.tokenize: ","Matched a ",i," regular expression of ",l),{type:i,match:l};throw new t.Error("Unable to parse '"+e.trim()+"'")},t.logic.parse=function(e,n,i,r){return t.async.potentiallyAsync(this,r,function(){t.log.debug("Twig.logic.parse: ","Parsing logic token ",e);var r,o=t.logic.handler[e.type],s=this;return o.parse?(s.parseStack.unshift(e),r=o.parse.call(s,e,n||{},i),t.isPromise(r)?r=r.then(function(t){return s.parseStack.shift(),t}):s.parseStack.shift(),r):""})},t}},function(t,e){t.exports=function(t){"use strict";t.Templates.registerParser("source",function(t){return t.data||""})}},function(t,e){t.exports=function(t){"use strict";t.Templates.registerParser("twig",function(e){return new t.Template(e)})}},function(t,e,n){t.exports=function(t){"use strict";return t.path={},t.path.parsePath=function(e,n){var i=null,r=e.options.namespaces,o=n||"";if(r&&"object"==typeof r)for(i in r)if(-1!==o.indexOf(i)){var s=new RegExp("^"+i+"::"),a=new RegExp("^@"+i+"/"),l=r[i].replace(/([^\/])$/,"$1/");if(s.test(o))return o=o.replace(s,l);if(a.test(o))return o=o.replace(a,l)}return t.path.relativePath(e,o)},t.path.relativePath=function(e,i){var r,o,s,a="/",l=[],u=i||"";if(e.url)r=void 0!==e.base?e.base.replace(/([^\/])$/,"$1/"):e.url;else if(e.path){var c=n(1),h=c.sep||a,p=new RegExp("^\\.{1,2}"+h.replace("\\","\\\\"));u=u.replace(/\//g,h),void 0!==e.base&&null==u.match(p)?(u=u.replace(e.base,""),r=e.base+h):r=c.normalize(e.path),r=r.replace(h+h,h),a=h}else{if(!e.name&&!e.id||!e.method||"fs"===e.method||"ajax"===e.method)throw new t.Error("Cannot extend an inline template.");r=e.base||e.name||e.id}for((o=r.split(a)).pop(),o=o.concat(u.split(a));o.length>0;)"."===(s=o.shift())||(".."===s&&l.length>0&&".."!==l[l.length-1]?l.pop():l.push(s));return l.join(a)},t}},function(t,e){t.exports=function(t){"use strict";return t.tests={empty:function(t){if(null==t)return!0;if("number"==typeof t)return!1;if(t.length&&t.length>0)return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},odd:function(t){return t%2==1},even:function(t){return t%2==0},divisibleby:function(t,e){return t%e[0]==0},defined:function(t){return void 0!==t},none:function(t){return null===t},null:function(t){return this.none(t)},"same as":function(t,e){return t===e[0]},sameas:function(e,n){return console.warn("`sameas` is deprecated use `same as`"),t.tests["same as"](e,n)},iterable:function(e){return e&&(t.lib.is("Array",e)||t.lib.is("Object",e))}},t.test=function(e,n,i){if(!t.tests[e])throw"Test "+e+" is not defined.";return t.tests[e](n,i)},t.test.extend=function(e,n){t.tests[e]=n},t}},function(t,e){t.exports=function(t){"use strict";var e=1,n=2;return t.parseAsync=function(e,n){return t.parse.call(this,e,n,!0)},t.expression.parseAsync=function(e,n,i){return t.expression.parse.call(this,e,n,i,!0)},t.logic.parseAsync=function(e,n,i){return t.logic.parse.call(this,e,n,i,!0)},t.Template.prototype.renderAsync=function(t,e){return this.render(t,e,!0)},t.async={},t.isPromise=function(t){return t&&t.then&&"function"==typeof t.then},t.async.potentiallyAsync=function(e,n,i){return n?t.Promise.resolve(i.call(e)):function(e,n,i){var r=i.call(e),o=null,s=!0;if(!t.isPromise(r))return r;if(r.then(function(t){r=t,s=!1}).catch(function(t){o=t}),null!==o)throw o;if(s)throw new t.Error("You are using Twig.js in sync mode in combination with async extensions.");return r}(e,0,i)},t.Thenable=function(t,e,n){this.then=t,this._value=n?e:null,this._state=n||0},t.Thenable.prototype.catch=function(t){return this._state==e?this:this.then(null,t)},t.Thenable.resolvedThen=function(e){try{return t.Promise.resolve(e(this._value))}catch(e){return t.Promise.reject(e)}},t.Thenable.rejectedThen=function(e,n){if(!n||"function"!=typeof n)return this;var i=this._value,r=t.attempt(function(){return n(i)},t.Promise.reject);return t.Promise.resolve(r)},t.Promise=function(i){var r=0,o=null,s=function(t,e){r=t,o=e};return function(t,e,n){try{t(e,n)}catch(t){n(t)}}(i,function(t){s(e,t)},function(t){s(n,t)}),r===e?t.Promise.resolve(o):r===n?t.Promise.reject(o):(s=t.FullPromise()).promise},t.FullPromise=function(){var n=null;function i(t){t(a._value)}function r(t,e){e(a._value)}var o=function(t,e){n=function(t,e,n){var i=[e,n,-2];return t?-2==t[2]?t=[t,i]:t.push(i):t=i,t}(n,t,e)};function s(s,l){a._state||(a._value=l,a._state=s,o=s==e?i:r,n&&(-2===n[2]&&(o(n[0],n[1]),n=null),t.forEach(n,function(t){o(t[0],t[1])}),n=null))}var a=new t.Thenable(function(n,i){var r="function"==typeof n;if(a._state==e&&!r)return t.Promise.resolve(a._value);if(a._state===e)return t.attempt(function(){return t.Promise.resolve(n(a._value))},t.Promise.reject);var s="function"==typeof i;return t.Promise(function(e,a){o(r?function(i){t.attempt(function(){e(n(i))},a)}:e,s?function(n){t.attempt(function(){e(i(n))},a)}:a)})});return s.promise=a,s},t.Promise.defaultResolved=new t.Thenable(t.Thenable.resolvedThen,void 0,e),t.Promise.emptyStringResolved=new t.Thenable(t.Thenable.resolvedThen,"",e),t.Promise.resolve=function(n){return arguments.length<1||void 0===n?t.Promise.defaultResolved:t.isPromise(n)?n:""===n?t.Promise.emptyStringResolved:new t.Thenable(t.Thenable.resolvedThen,n,e)},t.Promise.reject=function(e){return new t.Thenable(t.Thenable.rejectedThen,e,n)},t.Promise.all=function(n){var i=new Array(n.length);return t.async.forEach(n,function(n,r){if(t.isPromise(n)){if(n._state!=e)return n.then(function(t){i[r]=t});i[r]=n._value}else i[r]=n}).then(function(){return i})},t.async.forEach=function(n,i){var r=n.length,o=0;return function s(){var a=null;do{if(o==r)return t.Promise.resolve();a=i(n[o],o),o++}while(!a||!t.isPromise(a)||a._state==e);return a.then(s)}()},t}},function(t,e){t.exports=function(t){"use strict";return t.exports={VERSION:t.VERSION},t.exports.twig=function(e){var n=e.id,i={strict_variables:e.strict_variables||!1,autoescape:null!=e.autoescape&&e.autoescape||!1,allowInlineIncludes:e.allowInlineIncludes||!1,rethrow:e.rethrow||!1,namespaces:e.namespaces};if(t.cache&&n&&t.validateId(n),void 0!==e.debug&&(t.debug=e.debug),void 0!==e.trace&&(t.trace=e.trace),void 0!==e.data)return t.Templates.parsers.twig({data:e.data,path:e.hasOwnProperty("path")?e.path:void 0,module:e.module,id:n,options:i});if(void 0!==e.ref){if(void 0!==e.id)throw new t.Error("Both ref and id cannot be set on a twig.js template.");return t.Templates.load(e.ref)}if(void 0!==e.method){if(!t.Templates.isRegisteredLoader(e.method))throw new t.Error('Loader for "'+e.method+'" is not defined.');return t.Templates.loadRemote(e.name||e.href||e.path||n||void 0,{id:n,method:e.method,parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:i},e.load,e.error)}return void 0!==e.href?t.Templates.loadRemote(e.href,{id:n,method:"ajax",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:i},e.load,e.error):void 0!==e.path?t.Templates.loadRemote(e.path,{id:n,method:"fs",parser:e.parser||"twig",base:e.base,module:e.module,precompiled:e.precompiled,async:e.async,options:i},e.load,e.error):void 0},t.exports.extendFilter=function(e,n){t.filter.extend(e,n)},t.exports.extendFunction=function(e,n){t._function.extend(e,n)},t.exports.extendTest=function(e,n){t.test.extend(e,n)},t.exports.extendTag=function(e){t.logic.extend(e)},t.exports.extend=function(e){e(t)},t.exports.compile=function(e,n){var i,r=n.filename,o=n.filename;return i=new t.Template({data:e,path:o,id:r,options:n.settings["twig options"]}),function(t){return i.render(t)}},t.exports.renderFile=function(e,n,i){"function"==typeof n&&(i=n,n={});var r=(n=n||{}).settings||{},o=r["twig options"],s={path:e,base:r.views,load:function(t){o&&o.allow_async?t.renderAsync(n).then(function(t){i(null,t)},i):i(null,""+t.render(n))}};if(o)for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);t.exports.twig(s)},t.exports.__express=t.exports.renderFile,t.exports.cache=function(e){t.cache=e},t.exports.path=t.path,t.exports.filters=t.filters,t.exports.Promise=t.Promise,t}}])},t.exports=i()}).call(this,n(24))},210:function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}},211:function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},212:function(t,e,n){var i=n(92),r=1,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,s,a,l){var u=n&r,c=i(t),h=c.length;if(h!=i(e).length&&!u)return!1;for(var p=h;p--;){var f=c[p];if(!(u?f in e:o.call(e,f)))return!1}var d=l.get(t);if(d&&l.get(e))return d==e;var g=!0;l.set(t,e),l.set(e,t);for(var y=u;++p<h;){var v=t[f=c[p]],m=e[f];if(s)var _=u?s(m,v,f,e,t,l):s(v,m,f,t,e,l);if(!(void 0===_?v===m||a(v,m,n,s,l):_)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var x=t.constructor,b=e.constructor;x!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b)&&(g=!1)}return l.delete(t),l.delete(e),g}},213:function(t,e,n){"use strict";n.r(e);var i=n(2),r=n(23);e.default={register:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if(!t||!t.length)return Object(i.a)("ComponentFactory","A component always needs a name.",e),!1;if(o.has(t))return Object(i.a)("ComponentFactory",'The component "'.concat(t,'" is already registered. Please select a unique name for your component.'),n),!1;if(n.name=t,n.template)r.default.registerComponentTemplate(t,n.template),delete n.template;else if(!n.functional&&"function"!=typeof n.render)return Object(i.a)("ComponentFactory",'The component "'.concat(n.name,'" needs a template to be functional.'),'Please add a "template" property to your component definition',n),!1;return o.set(t,n),n},extend:function(t,e,n){var i=n;i.template?(r.default.extendComponentTemplate(t,e,i.template),delete i.template):r.default.extendComponentTemplate(t,e);return i.name=t,i.extends=e,o.set(t,i),i},override:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e;i.name=t,i.template&&(r.default.registerTemplateOverride(t,i.template,n),delete i.template);var o=s.get(t)||[];null!==n&&n>=0&&o.length>0?o.splice(n,0,i):o.push(i);return s.set(t,o),i},build:function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!o.has(e))return!1;var i=Object.create(o.get(e));if(i.extends){var r=t(i.extends,!0);r?i.extends=r:delete i.extends}if(s.has(e)){var a=s.get(e);a.forEach(function(t){var e=Object.create(t);e.extends=Object.create(i),i=e})}!0!==n?i.template=l(e):delete i.template;return i},getComponentTemplate:l,getComponentRegistry:function(){return o},getOverrideRegistry:function(){return s},getComponentHelper:function(){return a}};var o=new Map,s=new Map,a={};function l(t){return r.default.getRenderedTemplate(t)}},214:function(t,e,n){(function(t){function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return(r?"/":"")+(e=n(i(e.split("/"),function(t){return!!t}),!r).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),s="/"===r(t,-1);return(t=n(i(t.split("/"),function(t){return!!t}),!o).join("/"))||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var r=i(t.split("/")),o=i(n.split("/")),s=Math.min(r.length,o.length),a=s,l=0;l<s;l++)if(r[l]!==o[l]){a=l;break}var u=[];for(l=a;l<r.length;l++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,i=-1,r=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!r){i=o;break}}else r=!1;return-1===i?n?"/":".":n&&1===i?"/":t.slice(0,i)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,i=-1,r=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!r){n=e+1;break}}else-1===i&&(r=!1,i=e+1);return-1===i?"":t.slice(n,i)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,i=-1,r=!0,o=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===i&&(r=!1,i=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!r){n=s+1;break}}return-1===e||-1===i||0===o||1===o&&e===i-1&&e===n+1?"":t.slice(e,i)};var r="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(108))},215:function(t,e){},216:function(t,e,n){"use strict";n.r(e);var i=n(6);e.default={addEntityDefinition:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.length)return!1;return r.set(t,e),!0},getEntityDefinition:o,getDefinitionRegistry:function(){return r},getRawEntityObject:s,getPropertyBlacklist:a,getRequiredProperties:function(t){if(!r.has(t))return[];var e=r.get(t),n=["createdAt","updatedAt","uploadedAt","childCount","versionId","links","extensions","mimeType","fileExtension","metaData","fileSize","fileName","mediaType","mediaFolder"],i=[];return e.required.forEach(function(t){n.includes(t)||i.push(t)}),i},getAssociatedProperties:function(t){var e=r.get(t);return Object.keys(e.properties).reduce(function(t,n){var r=e.properties[n];return"array"===r.type&&Object(i.e)(r,"entity")&&t.push(n),t},[])},getTranslatableProperties:function(t){if(!r.has(t))return[];return r.get(t).translatable}};var r=new Map;function o(t){return r.get(t)}function s(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.properties,i={};return Object.keys(n).forEach(function(t){var r=n[t];i[t]=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("boolean"===t.type)return null;if("string"===t.type)return"";if("number"===t.type||"integer"===t.type)return null;if("array"===t.type)return[];if("object"===t.type&&t.entity)return!0===e?s(o(t.entity),!1):{};if("object"===t.type)return!0===e&&t.properties?s(t,!1):{};if("string"===t.type&&"date-time"===t.format)return"";return null}(r,e)}),i}function a(){return["createdAt","updatedAt","uploadedAt","childCount","versionId","links","extensions","mimeType","fileExtension","metaData","fileSize","fileName","mediaType","mediaFolder"]}},217:function(t,e,n){"use strict";n.r(e),e.default={registerStore:function(t,e){if(!t||!t.length)return;i.set(t,e)},getStore:function(t){return i.get(t)},getStoreRegistry:function(){return i}};var i=new Map},218:function(t,e,n){"use strict";n.r(e);var i=n(2);e.default={register:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.length)return Object(i.a)("MixinFactory","A mixin always needs a name.",e),!1;if(r.has(t))return Object(i.a)("MixinFactory",'The mixin "'.concat(t,'" is already registered. Please select a unique name for your mixin.'),e),!1;return r.set(t,e),e},getByName:function(t){return r.get(t)},getMixinRegistry:function(){return r}};var r=new Map},219:function(t,e,n){"use strict";n.r(e);var i=n(2);e.default={getRegistry:function(){return r},register:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if(!t||!t.length)return Object(i.a)(s,"A filter always needs a name"),!1;if(r.has(t))return Object(i.a)(s,'The filter "'.concat(t,'" is already registered. Please select a unique name for your filter.')),!1;return r.set(t,e),!0},getByName:function(t){return r.get(t)}};var r=new Map,o=function(){},s="FilterFactory"},22:function(t,e,n){var i=n(135),r=n(140);t.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},220:function(t,e,n){"use strict";n.r(e);var i=n(2);e.default={registerDirective:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.length)return Object(i.a)("DirectiveFactory","A directive always needs a name.",e),!1;if(r.has(t))return Object(i.a)("DirectiveFactory","A directive with the name ".concat(t," already exists."),e),!1;return r.set(t,e),!0},getDirectiveByName:function(t){return r.get(t)},getDirectiveRegistry:function(){return r}};var r=new Map},221:function(t,e,n){"use strict";n.r(e);var i=n(40),r=n.n(i),o=n(2),s=n(5);e.default={getLocaleByName:function(t){if(!a.has(t))return!1;return a.get(t)},getLocaleRegistry:function(){return a},register:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.length)return Object(o.a)("LocaleFactory","A locale always needs a name"),!1;if(t.split("-").length<2)return Object(o.a)("LocaleFactory",'The locale name should follow the RFC-4647 standard e.g. [languageCode-countryCode] for example "en-US"'),!1;if(a.has(t))return Object(o.a)("LocaleFactory",'The locale "'.concat(t,'" is registered already.'),"Please use the extend method to extend and override certain keys"),!1;return a.set(t,e),t},extend:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.split("-").length<2)return Object(o.a)("LocaleFactory",'The locale name should follow the RFC-4647 standard e.g. [languageCode-countryCode]] for example "en-US"'),!1;if(!a.has(t))return Object(o.a)("LocaleFactory",'The locale "'.concat(t,"\" doesn't exists. Please use the register method to register a new locale")),!1;var n=a.get(t);return a.set(t,s.object.merge(n,e)),t},getBrowserLanguage:c,getBrowserLanguages:h,getLastKnownLocale:function(){var t=c();null!==window.localStorage.getItem(u)&&(t=window.localStorage.getItem(u));return t},storeCurrentLocale:function(t){if("object"===("undefined"==typeof document?"undefined":r()(document))){var e=t.split("-")[0];document.querySelector("html").setAttribute("lang",e)}return window.localStorage.setItem(u,t),t}};var a=new Map,l="en-GB",u="sw-admin-locale";function c(){var t=h(),e=t.map(function(t){return t.split("-")[0].toLowerCase()}),n=null;return t.forEach(function(t){var i=t.split("-")[0];!n&&e.includes(i)&&(n=t)}),n||(n=l),n}function h(){var t=[];return navigator.language&&t.push(navigator.language),navigator.languages&&navigator.languages.length&&navigator.languages.forEach(function(e){t.push(e)}),navigator.userLanguage&&t.push(navigator.userLanguage),navigator.systemLanguage&&t.push(navigator.systemLanguage),t}},222:function(t,e,n){var i=n(17);t.exports=function(){return i.Date.now()}},223:function(t,e,n){var i=n(15),r=n(55),o=NaN,s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return o;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=l.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):a.test(t)?o:+t}},224:function(t,e,n){var i=n(65),r=n(225);t.exports=function t(e,n,o,s,a){var l=-1,u=e.length;for(o||(o=r),a||(a=[]);++l<u;){var c=e[l];n>0&&o(c)?n>1?t(c,n-1,o,s,a):i(a,c):s||(a[a.length]=c)}return a}},225:function(t,e,n){var i=n(26),r=n(47),o=n(14),s=i?i.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||r(t)||!!(s&&t&&t[s])}},226:function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},227:function(t,e){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0,r=n;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}},228:function(t,e,n){var i=n(229)("toUpperCase");t.exports=i},229:function(t,e,n){var i=n(230),r=n(95),o=n(231),s=n(38);t.exports=function(t){return function(e){e=s(e);var n=r(e)?o(e):void 0,a=n?n[0]:e.charAt(0),l=n?i(n,1).join(""):e.slice(1);return a[t]()+l}}},23:function(t,e,n){"use strict";n.r(e);var i=n(21),r=n.n(i),o=n(2);e.default={registerComponentTemplate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=s.get(t)||{};null===e&&(e=l(t));var i={id:"".concat(t,"-baseTemplate"),data:e};try{n.baseTemplate=r.a.twig(i)}catch(t){return Object(o.a)(t.message),!1}return s.set(t,n),!0},extendComponentTemplate:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={extendsFrom:e,baseTemplate:null,overrides:[]};s.set(t,i),null!==n&&a(t,n,0)},registerTemplateOverride:a,getRenderedTemplate:function(t){if(!s.has(t))return"";var e=s.get(t);if(!e.baseTemplate){if(!e.extendsFrom)return Object(o.a)("missing baseTemplate",t),"";var n={};if(function(t){var e=s.get(t).baseTemplate;if(null===e)return!1;return n=e.render({},{output:"blocks"}),!(0===Object.entries(n).length&&n.constructor===Object);var n}(e.extendsFrom)){var i=s.get(e.extendsFrom);n={id:"".concat(t,"-baseTemplate"),data:i.baseTemplate.tokens},e.baseTemplate=r.a.twig(n)}else{if(!(e.overrides.length>0))return Object(o.a)(t,"has no overrides or template to extend from!"),"";var a=e.overrides.shift();e.baseTemplate=a}}var l=e.baseTemplate,u=e.overrides,c=r.a.placeholders.parent,h={};u&&u.forEach(function(t){var e=t.render({},{output:"blocks"});Object.keys(h).forEach(function(t){e[t]&&(e[t]=e[t].replace(c,h[t]))}),Object.assign(h,e)});return l.render({},{blocks:h})},getTemplateOverrides:function(t){if(!s.has(t))return[];return s.get(t).overrides||[]},getTemplateRegistry:function(){return s},findCustomTemplate:l,findCustomOverride:u,clearTwigCache:function(){r.a.clearRegistry()},getTwigCache:function(){return r.a.getRegistry()},disableTwigCache:function(){r.a.cache(!1)}};var s=new Map;function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=s.get(t)||{};i.overrides=i.overrides||[],null===e&&(e=u(t));var o={id:"".concat(t,"-").concat(i.overrides.length),data:e},a=r.a.twig(o);null!==n?i.overrides.splice(n,0,a):i.overrides.push(a),s.set(t,i)}function l(t){var e=document.querySelector('template[component="'.concat(t,'"]'));return null!==e?e.innerHTML:""}function u(t){var e=document.querySelector('template[override="'.concat(t,'"]'));return null!==e?e.innerHTML:""}r.a.extend(function(t){t.token.definitions=[t.token.definitions[0],t.token.definitions[1],t.token.definitions[5],t.token.definitions[6],t.token.definitions[7],t.token.definitions[9],t.token.definitions[10]],t.exports.extendTag({type:"parent",regex:/^parent/,next:[],open:!0,parse:function(e,n,i){return{chain:i,output:t.placeholders.parent}}}),t.exports.placeholders=t.placeholders,t.exports.getRegistry=function(){return t.Templates.registry},t.exports.clearRegistry=function(){t.Templates.registry={}}})},230:function(t,e,n){var i=n(117);t.exports=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:i(t,e,n)}},231:function(t,e,n){var i=n(232),r=n(95),o=n(233);t.exports=function(t){return r(t)?o(t):i(t)}},232:function(t,e){t.exports=function(t){return t.split("")}},2320:function(t,e,n){var i,r,o;
/* @license
Papa Parse
v5.0.1
https://github.com/mholt/PapaParse
License: MIT
*/r=[],void 0===(o="function"==typeof(i=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},i=!e.document&&!!e.postMessage,r=i&&/blob:/i.test((e.location||{}).protocol),o={},s=0,a={parse:function(n,i){var r=(i=i||{}).dynamicTyping||!1;if(E(r)&&(i.dynamicTypingFunction=r,r={}),i.dynamicTyping=r,i.transform=!!E(i.transform)&&i.transform,i.worker&&a.WORKERS_SUPPORTED){var l=function(){if(!a.WORKERS_SUPPORTED)return!1;var n,i,r=(n=e.URL||e.webkitURL||null,i=t.toString(),a.BLOB_URL||(a.BLOB_URL=n.createObjectURL(new Blob(["(",i,")();"],{type:"text/javascript"})))),l=new e.Worker(r);return l.onmessage=m,l.id=s++,o[l.id]=l,l}();return l.userStep=i.step,l.userChunk=i.chunk,l.userComplete=i.complete,l.userError=i.error,i.step=E(i.step),i.chunk=E(i.chunk),i.complete=E(i.complete),i.error=E(i.error),delete i.worker,void l.postMessage({input:n,config:i,workerId:l.id})}var u=null;return n===a.NODE_STREAM_INPUT&&"undefined"==typeof PAPA_BROWSER_CONTEXT?(u=new d(i)).getStream():("string"==typeof n?u=i.download?new c(i):new p(i):!0===n.readable&&E(n.read)&&E(n.on)?u=new f(i):(e.File&&n instanceof File||n instanceof Object)&&(u=new h(i)),u.stream(n))},unparse:function(t,e){var n=!1,i=!0,r=",",o="\r\n",s='"',l=s+s,u=!1,c=null;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter(function(t){return-1!==e.delimiter.indexOf(t)}).length||(r=e.delimiter),("boolean"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(u=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(s=e.quoteChar),"boolean"==typeof e.header&&(i=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");c=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+s)}}();var h=new RegExp(y(s),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return f(null,t,u);if("object"==typeof t[0])return f(c||p(t[0]),t,u)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:p(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),f(t.fields||[],t.data||[],u);throw new Error("Unable to serialize unrecognized input");function p(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function f(t,e,n){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&t.length>0,l=!Array.isArray(e[0]);if(a&&i){for(var u=0;u<t.length;u++)u>0&&(s+=r),s+=d(t[u],u);e.length>0&&(s+=o)}for(var c=0;c<e.length;c++){var h=a?t.length:e[c].length,p=!1,f=a?0===Object.keys(e[c]).length:0===e[c].length;if(n&&!a&&(p="greedy"===n?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===n&&a){for(var g=[],y=0;y<h;y++){var v=l?t[y]:y;g.push(e[c][v])}p=""===g.join("").trim()}if(!p){for(var m=0;m<h;m++){m>0&&!f&&(s+=r);var _=a&&l?t[m]:m;s+=d(e[c][_],m)}c<e.length-1&&(!n||h>0&&!f)&&(s+=o)}}return s}function d(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);t=t.toString().replace(h,l);var i="boolean"==typeof n&&n||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return!0;return!1}(t,a.BAD_DELIMITERS)||t.indexOf(r)>-1||" "===t.charAt(0)||" "===t.charAt(t.length-1);return i?s+t+s:t}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=v,a.ParserHandle=g,a.NetworkStreamer=c,a.FileStreamer=h,a.StringStreamer=p,a.ReadableStreamStreamer=f,"undefined"==typeof PAPA_BROWSER_CONTEXT&&(a.DuplexStreamStreamer=d),e.jQuery){var l=e.jQuery;l.fn.parse=function(t){var n=t.config||{},i=[];return this.each(function(t){var r="INPUT"===l(this).prop("tagName").toUpperCase()&&"file"===l(this).attr("type").toLowerCase()&&e.FileReader;if(!r||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)i.push({file:this.files[o],inputElem:this,instanceConfig:l.extend({},n)})}),r(),this;function r(){if(0!==i.length){var e,n,r,s,u=i[0];if(E(t.before)){var c=t.before(u.file,u.inputElem);if("object"==typeof c){if("abort"===c.action)return e="AbortError",n=u.file,r=u.inputElem,s=c.reason,void(E(t.error)&&t.error({name:e},n,r,s));if("skip"===c.action)return void o();"object"==typeof c.config&&(u.instanceConfig=l.extend(u.instanceConfig,c.config))}else if("skip"===c)return void o()}var h=u.instanceConfig.complete;u.instanceConfig.complete=function(t){E(h)&&h(t,u.file,u.inputElem),o()},a.parse(u.file,u.instanceConfig)}else E(t.complete)&&t.complete()}function o(){i.splice(0,1),r()}}}function u(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=b(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new g(e),this._handle.streamer=this,this._config=e}.call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&E(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=s.meta.cursor;this._finished||(this._partialLine=o.substring(l-this._baseIndex),this._baseIndex=l),s&&s.data&&(this._rowCount+=s.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)e.postMessage({results:s,workerId:a.WORKER_ID,finished:u});else if(E(this._config.chunk)&&!n){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!u||!E(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(t){E(this._config.error)?this._config.error(t):r&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function c(t){var e;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),u.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),i||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open("GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var n in t)e.setRequestHeader(n,t[n])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{e.send()}catch(t){this._chunkError(t.message)}i&&0===e.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||e.status>=400?this._chunkError():(this._finished=!this._config.chunkSize||this._start>function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substr(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function h(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),u.call(this,t);var i="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,i?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,r)}var o=e.readAsText(t,this._config.encoding);i||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function p(t){var e;t=t||{},u.call(this,t),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t=this._config.chunkSize,n=t?e.substr(0,t):e;return e=t?e.substr(t):"",this._finished=!e,this.parseChunk(n)}}}function f(t){t=t||{},u.call(this,t);var e=[],n=!0,i=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=w(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=w(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=w(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function d(t){var e=n(2321).Duplex,i=b(t),r=!0,o=!1,s=[],a=null;this._onCsvData=function(t){var e=t.data;a.push(e)||this._handle.paused()||this._handle.pause()},this._onCsvComplete=function(){a.push(null)},i.step=w(this._onCsvData,this),i.complete=w(this._onCsvComplete,this),u.call(this,i),this._nextChunk=function(){o&&1===s.length&&(this._finished=!0),s.length?s.shift()():r=!0},this._addToParseQueue=function(t,e){s.push(w(function(){if(this.parseChunk("string"==typeof t?t:t.toString(i.encoding)),E(e))return e()},this)),r&&(r=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(t,e,n){this._addToParseQueue(t,n)},this._onWriteComplete=function(){o=!0,this._addToParseQueue("")},this.getStream=function(){return a},(a=new e({readableObjectMode:!0,decodeStrings:!1,read:w(this._onRead,this),write:w(this._onWrite,this)})).once("finish",w(this._onWriteComplete,this))}function g(t){var e,n,i,r=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,o=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,s=this,l=0,u=0,c=!1,h=!1,p=[],f={data:[],errors:[],meta:{}};if(E(t.step)){var d=t.step;t.step=function(e){if(f=e,_())m();else{if(m(),0===f.data.length)return;l+=e.data.length,t.preview&&l>t.preview?n.abort():d(f,s)}}}function g(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function m(){if(f&&i&&(w("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),i=!1),t.skipEmptyLines)for(var e=0;e<f.data.length;e++)g(f.data[e])&&f.data.splice(e--,1);return _()&&function(){if(f)if(Array.isArray(f.data[0])){for(var e=0;_()&&e<f.data.length;e++)f.data[e].forEach(n);f.data.splice(0,1)}else f.data.forEach(n);function n(e){E(t.transformHeader)&&(e=t.transformHeader(e)),p.push(e)}}(),function(){if(!f||!t.header&&!t.dynamicTyping&&!t.transform)return f;function e(e,n){var i,r=t.header?{}:[];for(i=0;i<e.length;i++){var o=i,s=e[i];t.header&&(o=i>=p.length?"__parsed_extra":p[i]),t.transform&&(s=t.transform(s,o)),s=x(o,s),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(s)):r[o]=s}return t.header&&(i>p.length?w("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+i,u+n):i<p.length&&w("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+i,u+n)),r}var n=1;return!f.data[0]||Array.isArray(f.data[0])?(f.data=f.data.map(e),n=f.data.length):f.data=e(f.data,0),t.header&&f.meta&&(f.meta.fields=p),u+=n,f}()}function _(){return t.header&&0===p.length}function x(e,n){return function(e){return t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)}(e)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(r.test(n)?parseFloat(n):o.test(n)?new Date(n):""===n?null:n):n}function w(t,e,n,i){f.errors.push({type:t,code:e,message:n,row:i})}this.parse=function(r,o,s){var l=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substr(0,1048576);var n=new RegExp(y(e)+"([^]*?)"+y(e),"gm"),i=(t=t.replace(n,"")).split("\r"),r=t.split("\n"),o=r.length>1&&r[0].length<i[0].length;if(1===i.length||o)return"\n";for(var s=0,a=0;a<i.length;a++)"\n"===i[a][0]&&s++;return s>=i.length/2?"\r\n":"\r"}(r,l)),i=!1,t.delimiter)E(t.delimiter)&&(t.delimiter=t.delimiter(r),f.meta.delimiter=t.delimiter);else{var u=function(e,n,i,r,o){var s,l,u,c;o=o||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var h=0;h<o.length;h++){var p=o[h],f=0,d=0,y=0;u=void 0;for(var m=new v({comments:r,delimiter:p,newline:n,preview:10}).parse(e),_=0;_<m.data.length;_++)if(i&&g(m.data[_]))y++;else{var x=m.data[_].length;d+=x,void 0!==u?x>0&&(f+=Math.abs(x-u),u=x):u=x}m.data.length>0&&(d/=m.data.length-y),(void 0===l||f<=l)&&(void 0===c||d>c)&&d>1.99&&(l=f,s=p,c=d)}return t.delimiter=s,{successful:!!s,bestDelimiter:s}}(r,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);u.successful?t.delimiter=u.bestDelimiter:(i=!0,t.delimiter=a.DefaultDelimiter),f.meta.delimiter=t.delimiter}var h=b(t);return t.preview&&t.header&&h.preview++,e=r,n=new v(h),f=n.parse(e,o,s),m(),c?{meta:{paused:!0}}:f||{meta:{paused:!1}}},this.paused=function(){return c},this.pause=function(){c=!0,n.abort(),e=e.substr(n.getCharIndex())},this.resume=function(){s.streamer._halted?(c=!1,s.streamer.parseChunk(e,!0)):setTimeout(this.resume,3)},this.aborted=function(){return h},this.abort=function(){h=!0,n.abort(),f.meta.aborted=!0,E(t.complete)&&t.complete(f),e=""}}function y(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(t){var e,n=(t=t||{}).delimiter,i=t.newline,r=t.comments,o=t.step,s=t.preview,l=t.fastMode,u=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(u=t.escapeChar),("string"!=typeof n||a.BAD_DELIMITERS.indexOf(n)>-1)&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||a.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var c=0,h=!1;this.parse=function(t,a,p){if("string"!=typeof t)throw new Error("Input must be a string");var f=t.length,d=n.length,g=i.length,v=r.length,m=E(o);c=0;var _=[],x=[],b=[],w=0;if(!t)return G();if(l||!1!==l&&-1===t.indexOf(e)){for(var T=t.split(i),S=0;S<T.length;S++){if(b=T[S],c+=b.length,S!==T.length-1)c+=i.length;else if(p)return G();if(!r||b.substr(0,v)!==r){if(m){if(_=[],F(b.split(n)),B(),h)return G()}else F(b.split(n));if(s&&S>=s)return _=_.slice(0,s),G(!0)}}return G()}for(var C=t.indexOf(n,c),R=t.indexOf(i,c),k=new RegExp(y(u)+y(e),"g"),O=t.indexOf(e,c);;)if(t[c]!==e)if(r&&0===b.length&&t.substr(c,v)===r){if(-1===R)return G();c=R+g,R=t.indexOf(i,c),C=t.indexOf(n,c)}else{if(-1!==C&&(C<R||-1===R)){if(-1===O){b.push(t.substring(c,C)),c=C+d,C=t.indexOf(n,c);continue}var I=U(C,O,R);if(I&&I.nextDelim){C=I.nextDelim,O=I.quoteSearch,b.push(t.substring(c,C)),c=C+d,C=t.indexOf(n,c);continue}}if(-1===R)break;if(b.push(t.substring(c,R)),N(R+g),m&&(B(),h))return G();if(s&&_.length>=s)return G(!0)}else for(O=c,c++;;){if(-1===(O=t.indexOf(e,O+1)))return p||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:c}),j();if(O===f-1){var A=t.substring(c,O).replace(k,e);return j(A)}if(e!==u||t[O+1]!==u){if(e===u||0===O||t[O-1]!==u){var L=-1===R?C:Math.min(C,R),M=D(L);if(t[O+1+M]===n){b.push(t.substring(c,O).replace(k,e)),c=O+1+M+d,t[O+1+M+d]!==e&&(O=t.indexOf(e,c)),C=t.indexOf(n,c),R=t.indexOf(i,c);break}var P=D(R);if(t.substr(O+1+P,g)===i){if(b.push(t.substring(c,O).replace(k,e)),N(O+1+P+g),C=t.indexOf(n,c),O=t.indexOf(e,c),m&&(B(),h))return G();if(s&&_.length>=s)return G(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:c}),O++}}else O++}return j();function F(t){_.push(t),w=c}function D(e){var n=0;if(-1!==e){var i=t.substring(O+1,e);i&&""===i.trim()&&(n=i.length)}return n}function j(e){return p?G():(void 0===e&&(e=t.substr(c)),b.push(e),c=f,F(b),m&&B(),G())}function N(e){c=e,F(b),b=[],R=t.indexOf(i,c)}function G(t,e){var r=e||!1;return{data:r?_[0]:_,errors:x,meta:{delimiter:n,linebreak:i,aborted:h,truncated:!!t,cursor:w+(a||0)}}}function B(){o(G(void 0,!0)),_=[],x=[]}function U(i,r,o){var s={nextDelim:void 0,quoteSearch:void 0},a=t.indexOf(e,r+1);if(i>r&&i<a&&(a<o||-1===o)){var l=t.indexOf(n,a);if(-1===l)return s;l>a&&(a=t.indexOf(e,a+1)),s=U(l,a,o)}else s={nextDelim:i,quoteSearch:r};return s}},this.abort=function(){h=!0},this.getCharIndex=function(){return c}}function m(t){var e=t.data,n=o[e.workerId],i=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var r={abort:function(){i=!0,_(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(E(n.userStep)){for(var s=0;s<e.results.data.length&&(n.userStep({data:e.results.data[s],errors:e.results.errors,meta:e.results.meta},r),!i);s++);delete e.results}else E(n.userChunk)&&(n.userChunk(e.results,r,e.file),delete e.results)}e.finished&&!i&&_(e.workerId,e.results)}function _(t,e){var n=o[t];E(n.userComplete)&&n.userComplete(e),n.terminate(),delete o[t]}function x(){throw new Error("Not implemented.")}function b(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=b(t[n]);return e}function w(t,e){return function(){t.apply(e,arguments)}}function E(t){return"function"==typeof t}return r&&(e.onmessage=function(t){var n=t.data;if(void 0===a.WORKER_ID&&n&&(a.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:a.WORKER_ID,results:a.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var i=a.parse(n.input,n.config);i&&e.postMessage({workerId:a.WORKER_ID,results:i,finished:!0})}}),c.prototype=Object.create(u.prototype),c.prototype.constructor=c,h.prototype=Object.create(u.prototype),h.prototype.constructor=h,p.prototype=Object.create(p.prototype),p.prototype.constructor=p,f.prototype=Object.create(u.prototype),f.prototype.constructor=f,"undefined"==typeof PAPA_BROWSER_CONTEXT&&(d.prototype=Object.create(u.prototype),d.prototype.constructor=d),a})?i.apply(e,r):i)||(t.exports=o)},2321:function(t,e,n){t.exports=r;var i=n(256).EventEmitter;function r(){i.call(this)}n(262)(r,i),r.Readable=n(283),r.Writable=n(2329),r.Duplex=n(2330),r.Transform=n(2331),r.PassThrough=n(2332),r.Stream=r,r.prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",a),n.on("close",l));var s=!1;function a(){s||(s=!0,t.end())}function l(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(c(),0===i.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",r),t.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",u),t.on("error",u),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},2322:function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){for(var e,n=u(t),i=n[0],s=n[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,i,s)),l=0,c=s>0?i-4:i,h=0;h<c;h+=4)e=r[t.charCodeAt(h)]<<18|r[t.charCodeAt(h+1)]<<12|r[t.charCodeAt(h+2)]<<6|r[t.charCodeAt(h+3)],a[l++]=e>>16&255,a[l++]=e>>8&255,a[l++]=255&e;2===s&&(e=r[t.charCodeAt(h)]<<2|r[t.charCodeAt(h+1)]>>4,a[l++]=255&e);1===s&&(e=r[t.charCodeAt(h)]<<10|r[t.charCodeAt(h+1)]<<4|r[t.charCodeAt(h+2)]>>2,a[l++]=e>>8&255,a[l++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],s=0,a=n-r;s<a;s+=16383)o.push(c(t,s,s+16383>a?a:s+16383));1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var r,o,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},2323:function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,u=l>>1,c=-7,h=n?r-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=u}return(f?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,l,u=8*o-r-1,c=(1<<u)-1,h=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+f]=255&a,f+=d,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;t[n+f]=255&s,f+=d,s/=256,u-=8);t[n+f-d]|=128*g}},2324:function(t,e){},2325:function(t,e,n){"use strict";var i=n(273).Buffer,r=n(2326);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e,n,r,o=i.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,r=a,e.copy(n,r),a+=s.data.length,s=s.next;return o},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},2326:function(t,e){},2327:function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}}).call(this,n(24))},2328:function(t,e,n){"use strict";t.exports=o;var i=n(305),r=n(267);function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}r.inherits=n(262),r.inherits(o,i),o.prototype._transform=function(t,e,n){n(null,t)}},2329:function(t,e,n){t.exports=n(284)},233:function(t,e){var n="[\\ud800-\\udfff]",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+i+"|"+r+")"+"?",u="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[o,s,a].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),c="(?:"+[o+i+"?",i,s,a,n].join("|")+")",h=RegExp(r+"(?="+r+")|"+c+u,"g");t.exports=function(t){return t.match(h)||[]}},2330:function(t,e,n){t.exports=n(259)},2331:function(t,e,n){t.exports=n(283).Transform},2332:function(t,e,n){t.exports=n(283).PassThrough},2333:function(t,e,n){t.exports=function(){"use strict";function t(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function e(t,e){return t<e?-1:t>e?1:0}return function(n,i,r,o,s){!function e(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1),p=Math.max(r,Math.floor(i-l*c/a+h)),f=Math.min(o,Math.floor(i+(a-l)*c/a+h));e(n,i,p,f,s)}var d=n[i],g=r,y=o;for(t(n,r,i),s(n[o],d)>0&&t(n,r,o);g<y;){for(t(n,g,y),g++,y--;s(n[g],d)<0;)g++;for(;s(n[y],d)>0;)y--}0===s(n[r],d)?t(n,r,y):t(n,++y,o),y<=i&&(r=y+1),i<=y&&(o=y-1)}}(n,i,r||0,o||n.length-1,s||e)}}()},2334:function(t,e,n){var i=n(2335);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(1).default)("3609b727",i,!0,{})},2335:function(t,e,n){},2336:function(t,e,n){var i=n(2337);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(1).default)("13e344f4",i,!0,{})},2337:function(t,e,n){},2338:function(t,e,n){var i=n(2339);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(1).default)("a2804f0a",i,!0,{})},2339:function(t,e,n){},234:function(t,e,n){var i=n(235),r=n(236),o=n(239),s=RegExp("['’]","g");t.exports=function(t){return function(e){return i(o(r(e).replace(s,"")),t,"")}}},2340:function(t,e,n){var i=n(2341);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(1).default)("5cc85d3b",i,!0,{})},2341:function(t,e,n){},2342:function(t,e,n){var i=n(2343);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(1).default)("75b533fa",i,!0,{})},2343:function(t,e,n){},2344:function(t,e,n){var i=n(2345);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(1).default)("3e6abbb6",i,!0,{})},2345:function(t,e,n){},235:function(t,e){t.exports=function(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}},2356:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n(3),o=n(959),s=n.n(o);const a=n(2320);i.Component.register("moorl-merchant-finder-list",{template:s.a,inject:["repositoryFactory","context"],mixins:[i.Mixin.getByName("notification"),i.Mixin.getByName("listing"),i.Mixin.getByName("placeholder")],data:()=>({repository:null,merchants:null,sortBy:"company",showImportModal:!1,isLoading:!0,selectedFile:null,isImporting:!1}),metaInfo(){return{title:this.$createTitle()}},computed:{moorlMerchantRepository(){return this.repositoryFactory.create("moorl_merchant")},customerGroupRepository(){return this.repositoryFactory.create("customer_group")},countryRepository(){return this.repositoryFactory.create("country")},salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},customFieldSetRepository(){return this.repositoryFactory.create("custom_field_set")},columns(){return[{property:"active",dataIndex:"active",label:this.$t("moorl-merchant-finder.properties.active"),inlineEdit:"boolean",allowResize:!0,align:"center"},{property:"company",dataIndex:"company",label:this.$t("moorl-merchant-finder.properties.company"),routerLink:"moorl.merchant.finder.detail",inlineEdit:"string",allowResize:!0,primary:!0},{property:"zipcode",dataIndex:"zipcode",label:this.$t("moorl-merchant-finder.properties.zipcode"),inlineEdit:"string",allowResize:!0},{property:"city",dataIndex:"city",label:this.$t("moorl-merchant-finder.properties.city"),inlineEdit:"string",allowResize:!0},{property:"email",dataIndex:"email",label:this.$t("moorl-merchant-finder.properties.email"),inlineEdit:"string",allowResize:!0},{property:"locationLon",dataIndex:"locationLon",label:this.$t("moorl-merchant-finder.properties.location"),allowResize:!0,align:"center"}]}},created(){this.repository=this.moorlMerchantRepository,this.csv={data:[],matches:0,schemaProperties:Object.keys(this.moorlMerchantRepository.schema.properties),filterSchemaProperties:["id","mediaId","productManufacturerId","customFields","autoIncrement","data","createdAt","updatedAt","media"],csvProperties:[],propertyMapping:{},options:{overwrite:!0,getPosition:!1,silentMode:!1}},this.getList(),this.initializeFurtherComponents()},methods:{initializeFurtherComponents(){this.salesChannelRepository.search(new r.a(1,100),this.context).then(t=>{this.salesChannels=t}),this.customerGroupRepository.search(new r.a(1,100),this.context).then(t=>{this.customerGroups=t});const t=new r.a(1,100);t.addSorting(r.a.sort("name")),this.countryRepository.search(t,this.context).then(t=>{this.countries=t})},getList(){const t=new r.a(this.page,this.limit);this.isLoading=!0,this.naturalSorting="company"===this.sortBy,t.setTerm(this.term),t.addSorting(r.a.sort(this.sortBy,this.sortDirection,this.naturalSorting)),this.moorlMerchantRepository.search(t,this.context).then(t=>(this.total=t.total,this.tax=t,this.isLoading=!1,this.merchants=t,t)).catch(()=>{this.isLoading=!1})},updateSelection(){console.log("ok")},updateTotal({total:t}){this.total=t},onClickUpload(){this.$refs.fileInput.click()},onFileInputChange(){const t=this;a.parse(this.$refs.fileInput.files[0],{header:!0,skipEmptyLines:!0,complete:function(e,n){console.log("NOTICE: Parsing complete",e,n),t.csv.data=e.data,t.validateCsv(),t.$refs.fileForm.reset()}})},validateCsv(){const t=this;let e=!1;this.csv.csvProperties=Object.keys(this.csv.data[0]),this.csv.matches=0,this.csv.schemaProperties.forEach(function(n){-1!=(e=t.csv.csvProperties.indexOf(n))&&(t.csv.propertyMapping[n]=t.csv.csvProperties[e],t.csv.matches++)}),this.showImportModal=!0},onClickImport(){this.createSystemNotificationSuccess({title:this.$t("moorl-merchant-finder.notification.importTitle"),message:this.$t("moorl-merchant-finder.notification.importText"),autoClose:!1,isLoading:!0}),this.importCsvRow()},importCsvRow(){this.isImporting=!0,this.showImportModal=!1;let t=this.csv.data.shift();t=this.sanitizeItem(t),this.csv.options.getPosition?this.getPositionByAddress(t):this.prepareSaveItem(t)},sanitizeItem(t){console.log("sanitizeItem() ",t);const e=this;let n=/^\s*(true|1|on|yes|ja|an)\s*$/i,i={};return this.csv.schemaProperties.forEach(function(r){if("string"==typeof e.csv.propertyMapping[r]){switch(e.moorlMerchantRepository.schema.properties[r].type){case"boolean":-1!=["1","0"].indexOf(e.csv.propertyMapping[r])?i[r]=n.test(e.csv.propertyMapping[r]):i[r]=n.test(t[e.csv.propertyMapping[r]]);break;case"int":i[r]=parseInt(t[e.csv.propertyMapping[r]]);break;case"float":i[r]=parseFloat(t[e.csv.propertyMapping[r]]);break;case"uuid":32==e.csv.propertyMapping[r].length&&(i[r]=e.csv.propertyMapping[r]);break;case"date":break;default:i[r]=t[e.csv.propertyMapping[r]]}}}),i},prepareSaveItem(t){if(console.log("prepareSaveItem()",t),t.originId&&this.csv.options.overwrite){const e=new r.a;e.addFilter(r.a.equals("originId",t.originId)),this.moorlMerchantRepository.search(e,this.context).then(e=>{0==e.length?(e=this.moorlMerchantRepository.create(this.context),Object.assign(e,t),this.saveItem(e)):(e=e.first(),Object.assign(e,t),this.saveItem(e))})}else{let e=this.moorlMerchantRepository.create(this.context);Object.assign(e,t),this.saveItem(e)}},saveItem(t){console.log("saveItem()",t),this.moorlMerchantRepository.save(t,this.context).then(()=>{0!=this.csv.data.length?this.importCsvRow():(this.isImporting=!1,this.createSystemNotificationSuccess({title:this.$t("moorl-merchant-finder.notification.successTitle"),message:this.$t("moorl-merchant-finder.notification.successText")}),this.getList())}).catch(t=>{console.log(t),this.createNotificationError({title:this.$t("moorl-merchant-finder.notification.errorTitle"),message:t})})},getPositionByAddress(t){console.log("getPositionByAddress()",t);const e=this;["zipcode","city","street","countryCode"].forEach(function(n){if("string"!=typeof t[n]||""==t[n].trim())return console.log("NOTICE: missing property",n),void e.prepareSaveItem(t)});const n=i.Application.getContainer("init").httpClient,r=new URLSearchParams({format:"json",zipcode:t.zipcode,city:t.city,street:t.street+" "+t.streetNumber,country:t.countryCode});n.get("http://nominatim.openstreetmap.org/search?"+r).then(e=>{console.log(e),e.data.length>0?(console.log("NOTICE: Position found"),t.locationLon=parseFloat(e.data[0].lon),t.locationLat=parseFloat(e.data[0].lat)):console.log("NOTICE: No Position found"),this.prepareSaveItem(t)}).catch(t=>{throw console.log(t),this.isImporting=!1,t})},onCloseModal(){this.showImportModal=!1,this.showExportModal=!1,this.showModal=!1},onRefresh(){this.getList()},onClickDownload(){console.log("onClickDownload()"),i.Application.getContainer("init").httpClient.get("/moorl/merchant-finder/export").then(t=>{console.log(t.data);let e=document.createElement("a");e.href="data:attachment/csv,"+encodeURIComponent(t.data),e.target="_blank",e.download="export.csv",document.body.appendChild(e),e.click()})}}});var l=n(5),u=n(960),c=n.n(u);function h(){return function(){throw new Error("Unimplemented abstract method.")}()}var p=0;function f(t){return t.ol_uid||(t.ol_uid=String(++p))}var d="5.3.3",g=function(t){function e(e){var n="Assertion failed. See https://openlayers.org/en/"+("latest"===d?d:"v"+d.split("-")[0])+"/doc/errors/#"+e+" for details.";t.call(this,n),this.code=e,this.name="AssertionError",this.message=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);function y(t,e){if(!t)throw new g(e)}function v(t,e,n){return Math.min(Math.max(t,e),n)}var m="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function _(t,e,n,i,r,o){var s=r-n,a=o-i;if(0!==s||0!==a){var l=((t-n)*s+(e-i)*a)/(s*s+a*a);l>1?(n=r,i=o):l>0&&(n+=s*l,i+=a*l)}return x(t,e,n,i)}function x(t,e,n,i){var r=n-t,o=i-e;return r*r+o*o}function b(t){return t*Math.PI/180}function w(t,e){var n=t%e;return n*e<0?n+e:n}function E(t,e,n){return t+n*(e-t)}var T={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},S=6371008.8;
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */function C(t,e,n){var i=n||S,r=b(t[1]),o=b(e[1]),s=(o-r)/2,a=b(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(o);return 2*i*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}var R={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},k={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function O(t){for(var e=j(),n=0,i=t.length;n<i;++n)z(e,t[n]);return e}function I(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function A(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function L(t,e,n){var i,r;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*r}function M(t,e){return F(t,e[0],e[1])}function P(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function F(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function D(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=e[0],a=e[1],l=k.UNKNOWN;return s<n?l|=k.LEFT:s>r&&(l|=k.RIGHT),a<i?l|=k.BELOW:a>o&&(l|=k.ABOVE),l===k.UNKNOWN&&(l=k.INTERSECTING),l}function j(){return[1/0,1/0,-1/0,-1/0]}function N(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function G(t){return N(1/0,1/0,-1/0,-1/0,t)}function B(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function U(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function z(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Y(t,e){for(var n=0,i=e.length;n<i;++n)z(t,e[n]);return t}function W(t,e,n,i,r){for(;n<i;n+=r)X(t,e[n],e[n+1]);return t}function X(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function K(t){var e=0;return rt(t)||(e=nt(t)*J(t)),e}function H(t){return[t[0],t[1]]}function Z(t){return[t[2],t[1]]}function V(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function $(t,e){var n;return e===R.BOTTOM_LEFT?n=H(t):e===R.BOTTOM_RIGHT?n=Z(t):e===R.TOP_LEFT?n=tt(t):e===R.TOP_RIGHT?n=et(t):y(!1,13),n}function q(t,e,n,i,r){var o=e*i[0]/2,s=e*i[1]/2,a=Math.cos(n),l=Math.sin(n),u=o*a,c=o*l,h=s*a,p=s*l,f=t[0],d=t[1],g=f-u+p,y=f-u-p,v=f+u-p,m=f+u+p,_=d-c-h,x=d-c+h,b=d+c+h,w=d+c-h;return N(Math.min(g,y,v,m),Math.min(_,x,b,w),Math.max(g,y,v,m),Math.max(_,x,b,w),r)}function J(t){return t[3]-t[1]}function Q(t,e,n){var i=n||[1/0,1/0,-1/0,-1/0];return it(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):G(i),i}function tt(t){return[t[0],t[3]]}function et(t){return[t[2],t[3]]}function nt(t){return t[2]-t[0]}function it(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function rt(t){return t[2]<t[0]||t[3]<t[1]}var ot={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},st={};st[ot.DEGREES]=2*Math.PI*6370997/360,st[ot.FEET]=.3048,st[ot.METERS]=1,st[ot.USFEET]=1200/3937;var at=ot,lt=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};lt.prototype.canWrapX=function(){return this.canWrapX_},lt.prototype.getCode=function(){return this.code_},lt.prototype.getExtent=function(){return this.extent_},lt.prototype.getUnits=function(){return this.units_},lt.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||st[this.units_]},lt.prototype.getWorldExtent=function(){return this.worldExtent_},lt.prototype.getAxisOrientation=function(){return this.axisOrientation_},lt.prototype.isGlobal=function(){return this.global_},lt.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},lt.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},lt.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},lt.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},lt.prototype.setWorldExtent=function(t){this.worldExtent_=t},lt.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},lt.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var ut=lt,ct=6378137,ht=Math.PI*ct,pt=[-ht,-ht,ht,ht],ft=[-180,-85,180,85],dt=function(t){function e(e){t.call(this,{code:e,units:at.METERS,extent:pt,global:!0,worldExtent:ft,getPointResolution:function(t,e){return t/m(e[1]/ct)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ut),gt=[new dt("EPSG:3857"),new dt("EPSG:102100"),new dt("EPSG:102113"),new dt("EPSG:900913"),new dt("urn:ogc:def:crs:EPSG:6.18:3:3857"),new dt("urn:ogc:def:crs:EPSG::3857"),new dt("http://www.opengis.net/gml/srs/epsg.xml#3857")];function yt(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var s=ht,a=0;a<i;a+=r){o[a]=s*t[a]/180;var l=ct*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));l>s?l=s:l<-s&&(l=-s),o[a+1]=l}return o}function vt(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var s=0;s<i;s+=r)o[s]=180*t[s]/ht,o[s+1]=360*Math.atan(Math.exp(t[s+1]/ct))/Math.PI-90;return o}var mt=[-180,-90,180,90],_t=6378137*Math.PI/180,xt=function(t){function e(e,n){t.call(this,{code:e,units:at.DEGREES,extent:mt,axisOrientation:n,global:!0,metersPerUnit:_t,worldExtent:mt})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ut),bt=[new xt("CRS:84"),new xt("EPSG:4326","neu"),new xt("urn:ogc:def:crs:EPSG::4326","neu"),new xt("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new xt("urn:ogc:def:crs:OGC:1.3:CRS84"),new xt("urn:ogc:def:crs:OGC:2:84"),new xt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new xt("urn:x-ogc:def:crs:EPSG:4326","neu")],wt={};var Et="function"==typeof Object.assign?Object.assign:function(t,e){var n=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),r=1,o=arguments.length;r<o;++r){var s=n[r];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(i[a]=s[a])}return i};function Tt(t){for(var e in t)delete t[e]}function St(t){var e=[];for(var n in t)e.push(t[n]);return e}function Ct(t){var e;for(e in t)return!1;return!e}var Rt,kt,Ot,It={};function At(t,e,n){var i=t.getCode(),r=e.getCode();i in It||(It[i]={}),It[i][r]=n}function Lt(t,e,n){var i;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];i=e}else i=t.slice();return i}function Mt(t,e,n){if(void 0!==e&&t!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];t=e}return t}function Pt(t){!function(t,e){wt[t]=e}(t.getCode(),t),At(t,t,Lt)}function Ft(t){return"string"==typeof t?wt[t]||null:t||null}function Dt(t,e,n,i){var r,o=(t=Ft(t)).getPointResolutionFunc();if(o)r=o(e,n);else if(t.getUnits()==at.DEGREES&&!i||i==at.DEGREES)r=e;else{var s=Ut(t,Ft("EPSG:4326")),a=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];r=(C((a=s(a,a,2)).slice(0,2),a.slice(2,4))+C(a.slice(4,6),a.slice(6,8)))/2;var l=i?st[i]:t.getMetersPerUnit();void 0!==l&&(r/=l)}return r}function jt(t){!function(t){t.forEach(Pt)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&At(e,t,Lt)})})}function Nt(t,e){return t?"string"==typeof t?Ft(t):t:Ft(e)}function Gt(t,e){return Yt(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function Bt(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?n:Ut(t,e)===Lt&&n}function Ut(t,e){var n=function(t,e){var n;return t in It&&e in It[t]&&(n=It[t][e]),n}(t.getCode(),e.getCode());return n||(n=Mt),n}function zt(t,e){return Ut(Ft(t),Ft(e))}function Yt(t,e,n){return zt(e,n)(t,void 0,t.length)}function Wt(t,e,n,i){for(var r,o=0,s=t.length;o<s;++o)if((r=t[o]).listener===e&&r.bindTo===n)return i&&(r.deleteIndex=o),r}function Xt(t,e){var n=Kt(t);return n?n[e]:void 0}function Kt(t,e){var n=t.ol_lm;return!n&&e&&(n=t.ol_lm={}),n}function Ht(t,e){var n=Xt(t,e);if(n){for(var i=0,r=n.length;i<r;++i)t.removeEventListener(e,n[i].boundListener),Tt(n[i]);n.length=0;var o=Kt(t);o&&(delete o[e],0===Object.keys(o).length&&function(t){delete t.ol_lm}(t))}}function Zt(t,e,n,i,r){var o=Kt(t,!0),s=o[e];s||(s=o[e]=[]);var a=Wt(s,n,i,!1);return a?r||(a.callOnce=!1):(a={bindTo:i,callOnce:!!r,listener:n,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var n=t.listener,i=t.bindTo||t.target;return t.callOnce&&qt(t),n.call(i,e)};return t.boundListener=e,e}(a)),s.push(a)),a}function Vt(t,e,n,i){return Zt(t,e,n,i,!0)}function $t(t,e,n,i){var r=Xt(t,e);if(r){var o=Wt(r,n,i,!0);o&&qt(o)}}function qt(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=Xt(t.target,t.type);if(e){var n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==n&&e.splice(n,1),0===e.length&&Ht(t.target,t.type)}Tt(t)}}jt(gt),jt(bt),Rt=gt,kt=yt,Ot=vt,bt.forEach(function(t){Rt.forEach(function(e){At(t,e,kt),At(e,t,Ot)})});var Jt={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"},Qt="propertychange",te=function(){this.disposed_=!1};te.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},te.prototype.disposeInternal=function(){};var ee=te;function ne(){return!0}function ie(){return!1}function re(){}var oe=function(t){this.propagationStopped,this.type=t,this.target=null};function se(t){t.stopPropagation()}oe.prototype.preventDefault=function(){this.propagationStopped=!0},oe.prototype.stopPropagation=function(){this.propagationStopped=!0};var ae=oe,le=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var n=this.listeners_[t];n||(n=this.listeners_[t]=[]),-1===n.indexOf(e)&&n.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new ae(t):t,n=e.type;e.target=this;var i,r=this.listeners_[n];if(r){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var o=0,s=r.length;o<s;++o)if(!1===r[o].call(this,e)||e.propagationStopped){i=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var a=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];a--;)this.removeEventListener(n,re);delete this.dispatching_[n]}return i}},e.prototype.disposeInternal=function(){!function(t){var e=Kt(t);if(e)for(var n in e)Ht(t,n)}(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var i=n.indexOf(e);t in this.pendingRemovals_?(n[i]=re,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t])}},e}(ee);var ue=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Jt.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=Zt(this,t[r],e);return i}return Zt(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=Vt(this,t[r],e);return i}return Vt(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)$t(this,t[n],e);else $t(this,t,e)},e}(le),ce=function(t){function e(e,n,i){t.call(this,e),this.key=n,this.oldValue=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ae),he={};function pe(t){return he.hasOwnProperty(t)?he[t]:he[t]="change:"+t}var fe=function(t){function e(e){t.call(this),f(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return Et({},this.values_)},e.prototype.notify=function(t,e){var n;n=pe(t),this.dispatchEvent(new ce(n,t,e)),n=Qt,this.dispatchEvent(new ce(n,t,e))},e.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var i=this.values_[t];this.values_[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},e}(ue);var de=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Zt(this,pe(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;this.setGeometry(n)}else{var i=e;this.setProperties(i)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(qt(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Zt(t,Jt.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;if(Array.isArray(t))e=t;else{y("function"==typeof t.getZIndex,41);var n=t;e=[n]}return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){$t(this,pe(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Zt(this,pe(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(fe),ge=42,ye=256;function ve(t){return t}function me(t,e){return t>e?1:t<e?-1:0}function _e(t,e,n){var i,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function xe(t,e,n){for(;e<n;){var i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function be(t,e){for(var n=Array.isArray(e)?e:[e],i=n.length,r=0;r<i;r++)t[t.length]=n[r]}function we(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function Ee(t,e){return void 0!==t?0:void 0}function Te(t,e){return void 0!==t?t+e:void 0}var Se=0,Ce=1,Re="center",ke="resolution",Oe="rotation";function Ie(t,e){return t[0]+=e[0],t[1]+=e[1],t}function Ae(t,e){var n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=r,t[1]=o,t}function Le(t,e){return t[0]*=e,t[1]*=e,t}function Me(t){return Math.pow(t,3)}function Pe(t){return 1-Me(1-t)}function Fe(t){return 3*t*t-2*t*t*t}function De(t){return t}var je={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function Ne(t,e,n,i,r,o){for(var s=o||[],a=0,l=e;l<n;l+=i){var u=t[l],c=t[l+1];s[a++]=r[0]*u+r[2]*c+r[4],s[a++]=r[1]*u+r[3]*c+r[5]}return o&&s.length!=a&&(s.length=a),s}var Ge=new Array(6);function Be(t){return ze(t,1,0,0,1,0,0)}function Ue(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=e[0],u=e[1],c=e[2],h=e[3],p=e[4],f=e[5];return t[0]=n*l+r*u,t[1]=i*l+o*u,t[2]=n*c+r*h,t[3]=i*c+o*h,t[4]=n*p+r*f+s,t[5]=i*p+o*f+a,t}function ze(t,e,n,i,r,o,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t}function Ye(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function We(t,e){var n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Xe(t,e,n){return Ue(t,ze(Ge,e,0,0,n,0,0))}function Ke(t,e,n){return Ue(t,ze(Ge,1,0,0,1,e,n))}function He(t,e,n,i,r,o,s,a){var l=Math.sin(o),u=Math.cos(o);return t[0]=i*u,t[1]=r*l,t[2]=-i*l,t[3]=r*u,t[4]=s*i*u-a*i*l+e,t[5]=s*r*l+a*r*u+n,t}var Ze=[1,0,0,1,0,0];function Ve(t){var e;return t==je.XY?e=2:t==je.XYZ||t==je.XYM?e=3:t==je.XYZM&&(e=4),e}var $e=function(t){function e(){t.call(this),this.layout=je.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=0,i=this.flatCoordinates.length,r=this.stride,W(G(t),e,n,i,r);var e,n,i,r},e.prototype.getCoordinates=function(){return h()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Tt(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=n,n):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Ve(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){h()},e.prototype.setLayout=function(t,e,n){var i;if(t)i=Ve(t);else{for(var r=0;r<n;++r){if(0===e.length)return this.layout=je.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=je.XY:3==t?e=je.XYZ:4==t&&(e=je.XYZM);return e}(i=e.length)}this.layout=t,this.stride=i},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,n,i,r,o,s){for(var a=s||[],l=Math.cos(r),u=Math.sin(r),c=o[0],h=o[1],p=0,f=e;f<n;f+=i){var d=t[f]-c,g=t[f+1]-h;a[p++]=c+d*l-g*u,a[p++]=h+d*u+g*l;for(var y=f+2;y<f+i;++y)a[p++]=t[y]}s&&a.length!=p&&(a.length=p)}(n,0,n.length,i,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var i=e;void 0===i&&(i=t);var r=n;r||(r=V(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();!function(t,e,n,i,r,o,s,a){for(var l=a||[],u=s[0],c=s[1],h=0,p=e;p<n;p+=i){var f=t[p]-u,d=t[p+1]-c;l[h++]=u+r*f,l[h++]=c+o*d;for(var g=p+2;g<p+i;++g)l[h++]=t[g]}a&&l.length!=h&&(l.length=h)}(o,0,o.length,s,t,i,r,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,n,i,r,o,s){for(var a=s||[],l=0,u=e;u<n;u+=i){a[l++]=t[u]+r,a[l++]=t[u+1]+o;for(var c=u+2;c<u+i;++c)a[l++]=t[c]}s&&a.length!=l&&(a.length=l)}(n,0,n.length,i,t,e,n),this.changed()}},e}(function(t){function e(){t.call(this),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return h()},e.prototype.closestPointXY=function(t,e,n,i){return h()},e.prototype.containsXY=function(t,e){return!1},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return h()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){h()},e.prototype.scale=function(t,e,n){h()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return h()},e.prototype.getType=function(){return h()},e.prototype.applyTransform=function(t){h()},e.prototype.intersectsExtent=function(t){return h()},e.prototype.translate=function(t,e){h()},e.prototype.transform=function(t,e){var n=Ft(t),i=n.getUnits()==at.TILE_PIXELS?function(t,i,r){var o=n.getExtent(),s=n.getWorldExtent(),a=J(s)/J(o);return He(Ze,s[0],s[3],a,-a,0,0,0),Ne(t,0,t.length,r,Ze,i),zt(n,e)(t,i,r)}:zt(n,e);return this.applyTransform(i),this},e}(fe));function qe(t,e,n,i){for(var r=0,o=t[n-i],s=t[n-i+1];e<n;e+=i){var a=t[e],l=t[e+1];r+=s*a-o*l,o=a,s=l}return r/2}function Je(t,e,n,i){for(var r=0,o=0,s=n.length;o<s;++o){var a=n[o];r+=qe(t,e,a,i),e=a}return r}function Qe(t,e,n,i,r,o,s){var a,l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;if(0===c&&0===h)a=e;else{var p=((r-l)*c+(o-u)*h)/(c*c+h*h);if(p>1)a=n;else{if(p>0){for(var f=0;f<i;++f)s[f]=E(t[e+f],t[n+f],p);return void(s.length=i)}a=e}}for(var d=0;d<i;++d)s[d]=t[a+d];s.length=i}function tn(t,e,n,i,r){var o=t[e],s=t[e+1];for(e+=i;e<n;e+=i){var a=t[e],l=t[e+1],u=x(o,s,a,l);u>r&&(r=u),o=a,s=l}return r}function en(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){var a=n[o];r=tn(t,e,a,i,r),e=a}return r}function nn(t,e,n,i,r,o,s,a,l,u,c){if(e==n)return u;var h,p;if(0===r){if((p=x(s,a,t[e],t[e+1]))<u){for(h=0;h<i;++h)l[h]=t[e+h];return l.length=i,p}return u}for(var f=c||[NaN,NaN],d=e+i;d<n;)if(Qe(t,d-i,d,i,s,a,f),(p=x(s,a,f[0],f[1]))<u){for(u=p,h=0;h<i;++h)l[h]=f[h];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(p)-Math.sqrt(u))/r|0,1);if(o&&(Qe(t,n-i,e,i,s,a,f),(p=x(s,a,f[0],f[1]))<u)){for(u=p,h=0;h<i;++h)l[h]=f[h];l.length=i}return u}function rn(t,e,n,i,r,o,s,a,l,u,c){for(var h=c||[NaN,NaN],p=0,f=n.length;p<f;++p){var d=n[p];u=nn(t,e,d,i,r,o,s,a,l,u,h),e=d}return u}function on(t,e,n,i){for(var r=0,o=n.length;r<o;++r)for(var s=n[r],a=0;a<i;++a)t[e++]=s[a];return e}function sn(t,e,n,i,r){for(var o=r||[],s=0,a=0,l=n.length;a<l;++a){var u=on(t,e,n[a],i);o[s++]=u,e=u}return o.length=s,o}function an(t,e,n,i,r){for(var o=void 0!==r?r:[],s=0,a=e;a<n;a+=i)o[s++]=t.slice(a,a+i);return o.length=s,o}function ln(t,e,n,i,r){for(var o=void 0!==r?r:[],s=0,a=0,l=n.length;a<l;++a){var u=n[a];o[s++]=an(t,e,u,i,o[s]),e=u}return o.length=s,o}function un(t,e,n,i,r){for(var o=void 0!==r?r:[],s=0,a=0,l=n.length;a<l;++a){var u=n[a];o[s++]=ln(t,e,u,i,o[s]),e=u[u.length-1]}return o.length=s,o}function cn(t,e,n,i,r,o,s){var a=(n-e)/i;if(a<3){for(;e<n;e+=i)o[s++]=t[e],o[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var u=[e,n-i],c=0;u.length>0;){for(var h=u.pop(),p=u.pop(),f=0,d=t[p],g=t[p+1],y=t[h],v=t[h+1],m=p+i;m<h;m+=i){var x=_(t[m],t[m+1],d,g,y,v);x>f&&(c=m,f=x)}f>r&&(l[(c-e)/i]=1,p+i<c&&u.push(p,c),c+i<h&&u.push(c,h))}for(var b=0;b<a;++b)l[b]&&(o[s++]=t[e+b*i],o[s++]=t[e+b*i+1]);return s}function hn(t,e){return e*Math.round(t/e)}function pn(t,e,n,i,r,o,s){if(e==n)return s;var a,l,u=hn(t[e],r),c=hn(t[e+1],r);e+=i,o[s++]=u,o[s++]=c;do{if(a=hn(t[e],r),l=hn(t[e+1],r),(e+=i)==n)return o[s++]=a,o[s++]=l,s}while(a==u&&l==c);for(;e<n;){var h=hn(t[e],r),p=hn(t[e+1],r);if(e+=i,h!=a||p!=l){var f=a-u,d=l-c,g=h-u,y=p-c;f*y==d*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(d<0&&y<d||d==y||d>0&&y>d)?(a=h,l=p):(o[s++]=a,o[s++]=l,u=a,c=l,a=h,l=p)}}return o[s++]=a,o[s++]=l,s}function fn(t,e,n,i,r,o,s,a){for(var l=0,u=n.length;l<u;++l){var c=n[l];s=pn(t,e,c,i,r,o,s),a.push(s),e=c}return s}var dn=function(t){function e(e,n){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?this.setCoordinates(e,n):this.setFlatCoordinates(n,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){return i<L(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(tn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),nn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.getArea=function(){return qe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return an(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=cn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,je.XY)},e.prototype.getType=function(){return T.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=on(this.flatCoordinates,0,t,this.stride),this.changed()},e}($e),gn=function(t){function e(e,n){t.call(this),this.setCoordinates(e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates,o=x(t,e,r[0],r[1]);if(o<i){for(var s=this.stride,a=0;a<s;++a)n[a]=r[a];return n.length=s,o}return i},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=t,i=e[0],r=e[1],N(i,r,i,r,n);var e,n,i,r},e.prototype.getType=function(){return T.POINT},e.prototype.intersectsExtent=function(t){return F(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)t[e++]=n[r];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}($e);function yn(t,e,n,i,r){return!function(t,e,n){var i;return(i=e.call(n,H(t)))?i:(i=e.call(n,Z(t)))?i:(i=e.call(n,et(t)))?i:(i=e.call(n,tt(t)))||!1}(r,function(r){return!vn(t,e,n,i,r[0],r[1])})}function vn(t,e,n,i,r,o){for(var s=0,a=t[n-i],l=t[n-i+1];e<n;e+=i){var u=t[e],c=t[e+1];l<=o?c>o&&(u-a)*(o-l)-(r-a)*(c-l)>0&&s++:c<=o&&(u-a)*(o-l)-(r-a)*(c-l)<0&&s--,a=u,l=c}return 0!==s}function mn(t,e,n,i,r,o){if(0===n.length)return!1;if(!vn(t,e,n[0],i,r,o))return!1;for(var s=1,a=n.length;s<a;++s)if(vn(t,n[s-1],n[s],i,r,o))return!1;return!0}function _n(t,e,n,i,r,o,s){for(var a,l,u,c,h,p,f,d=r[o+1],g=[],y=0,v=n.length;y<v;++y){var m=n[y];for(c=t[m-i],p=t[m-i+1],a=e;a<m;a+=i)h=t[a],f=t[a+1],(d<=p&&f<=d||p<=d&&d<=f)&&(u=(d-p)/(f-p)*(h-c)+c,g.push(u)),c=h,p=f}var _=NaN,x=-1/0;for(g.sort(me),c=g[0],a=1,l=g.length;a<l;++a){h=g[a];var b=Math.abs(h-c);b>x&&mn(t,e,n,i,u=(c+h)/2,d)&&(_=u,x=b),c=h}return isNaN(_)&&(_=r[o]),s?(s.push(_,d,x),s):[_,d,x]}function xn(t,e,n,i,r){var o=W([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!it(r,o)&&(!!P(r,o)||(o[0]>=r[0]&&o[2]<=r[2]||(o[1]>=r[1]&&o[3]<=r[3]||function(t,e,n,i,r,o){for(var s,a=[t[e],t[e+1]],l=[];e+i<n;e+=i){if(l[0]=t[e+i],l[1]=t[e+i+1],s=r.call(o,a,l))return s;a[0]=l[0],a[1]=l[1]}return!1}(t,e,n,i,function(t,e){return function(t,e,n){var i=!1,r=D(t,e),o=D(t,n);if(r===k.INTERSECTING||o===k.INTERSECTING)i=!0;else{var s,a,l=t[0],u=t[1],c=t[2],h=t[3],p=e[0],f=e[1],d=n[0],g=n[1],y=(g-f)/(d-p);o&k.ABOVE&&!(r&k.ABOVE)&&(i=(s=d-(g-h)/y)>=l&&s<=c),i||!(o&k.RIGHT)||r&k.RIGHT||(i=(a=g-(d-c)*y)>=u&&a<=h),i||!(o&k.BELOW)||r&k.BELOW||(i=(s=d-(g-u)/y)>=l&&s<=c),i||!(o&k.LEFT)||r&k.LEFT||(i=(a=g-(d-l)*y)>=u&&a<=h)}return i}(r,t,e)}))))}function bn(t,e,n,i,r){if(!function(t,e,n,i,r){return!!(xn(t,e,n,i,r)||vn(t,e,n,i,r[0],r[1])||vn(t,e,n,i,r[0],r[3])||vn(t,e,n,i,r[2],r[1])||vn(t,e,n,i,r[2],r[3]))}(t,e,n[0],i,r))return!1;if(1===n.length)return!0;for(var o=1,s=n.length;o<s;++o)if(yn(t,n[o-1],n[o],i,r)&&!xn(t,n[o-1],n[o],i,r))return!1;return!0}function wn(t,e,n,i){for(;e<n-i;){for(var r=0;r<i;++r){var o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function En(t,e,n,i){for(var r=0,o=t[n-i],s=t[n-i+1];e<n;e+=i){var a=t[e],l=t[e+1];r+=(a-o)*(l+s),o=a,s=l}return r>0}function Tn(t,e,n,i,r){for(var o=void 0!==r&&r,s=0,a=n.length;s<a;++s){var l=n[s],u=En(t,e,l,i);if(0===s){if(o&&u||!o&&!u)return!1}else if(o&&!u||!o&&u)return!1;e=l}return!0}function Sn(t,e,n,i,r){for(var o=void 0!==r&&r,s=0,a=n.length;s<a;++s){var l=n[s],u=En(t,e,l,i);(0===s?o&&u||!o&&!u:o&&!u||!o&&u)&&wn(t,e,l,i),e=l}return e}var Cn=function(t){function e(e,n,i){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==n&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?be(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,n,i){return i<L(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(en(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rn(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.containsXY=function(t,e){return mn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Je(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Sn(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,ln(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=V(this.getExtent());this.flatInteriorPoint_=_n(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new gn(this.getFlatInteriorPoint(),je.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new dn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[],r=0,o=0,s=n.length;o<s;++o){var a=n[o],l=new dn(e.slice(r,a),t);i.push(l),r=a}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Tn(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Sn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=fn(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,je.XY,i)},e.prototype.getType=function(){return T.POLYGON},e.prototype.intersectsExtent=function(t){return bn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=sn(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}($e),Rn=Cn;function kn(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new Cn(o,je.XY,[o.length])}var On=0;function In(t,e){setTimeout(function(){t(e)},0)}function An(t){return!(t.sourceCenter&&t.targetCenter&&!function(t,e){for(var n=!0,i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var Ln=function(t){function e(e){t.call(this);var n=Et({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Nt(n.projection,"EPSG:3857"),this.applyOptions_(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[Re]=void 0!==t.center?t.center:null;var n=function(t){var e,n,i,r=void 0!==t.minZoom?t.minZoom:On,o=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var a=t.resolutions;n=a[r],i=void 0!==a[o]?a[o]:a[a.length-1],e=function(t){return function(e,n,i){if(void 0!==e){var r=_e(t,e,i);r=v(r+n,0,t.length-1);var o=Math.floor(r);if(r!=o&&o<t.length-1){var s=t[o]/t[o+1];return t[o]/Math.pow(s,r-o)}return t[o]}}}(a)}else{var l=Nt(t.projection,"EPSG:3857"),u=l.getExtent(),c=u?Math.max(nt(u),J(u)):360*st[at.DEGREES]/l.getMetersPerUnit(),h=c/ye/Math.pow(2,On),p=h/Math.pow(2,28-On);void 0!==(n=t.maxResolution)?r=0:n=h/Math.pow(s,r),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(s,o):h/Math.pow(s,o):p),o=r+Math.floor(Math.log(n/i)/Math.log(s)),i=n/Math.pow(s,o-r),e=function(t,e,n){return function(i,r,o){if(void 0!==i){var s=-o/2+.5,a=Math.floor(Math.log(e/i)/Math.log(t)+s),l=Math.max(a+r,0);return void 0!==n&&(l=Math.min(l,n)),e/Math.pow(t,l)}}}(s,n,o-r)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:r,zoomFactor:s}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=n.minZoom;var i=function(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[v(t[0],e[0],e[2]),v(t[1],e[1],e[3])]:void 0}):ve;var e}(t),r=n.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=r||b(5),function(t,e){return void 0!==t?Math.abs(t+e)<=o?0:t+e:void 0}):!1===e?Te:"number"==typeof e?(n=e,i=2*Math.PI/n,function(t,e){return void 0!==t?t=Math.floor((t+e)/i+.5)*i:void 0}):Te}return Ee;var n,i;var r,o}(t);this.constraints_={center:i,resolution:r,rotation:o},void 0!==t.resolution?e[ke]=t.resolution:void 0!==t.zoom&&(e[ke]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[ke]=v(Number(this.getResolution()||e[ke]),this.minResolution_,this.maxResolution_))),e[Oe]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Et({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),Et({},e,t)},e.prototype.animate=function(t){var e,n=arguments,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var r=arguments[i-1];return r.center&&this.setCenter(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&In(e,!0))}for(var o=Date.now(),s=this.getCenter().slice(),a=this.getResolution(),l=this.getRotation(),u=[],c=0;c<i;++c){var h=n[c],p={start:o,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||Fe};if(h.center&&(p.sourceCenter=s,p.targetCenter=h.center,s=p.targetCenter),void 0!==h.zoom?(p.sourceResolution=a,p.targetResolution=this.constrainResolution(this.maxResolution_,h.zoom-this.minZoom_,0),a=p.targetResolution):h.resolution&&(p.sourceResolution=a,p.targetResolution=h.resolution,a=p.targetResolution),void 0!==h.rotation){p.sourceRotation=l;var f=w(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=l+f,l=p.targetRotation}p.callback=e,An(p)?p.complete=!0:o+=p.duration,u.push(p)}this.animations_.push(u),this.setHint(Se,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[Se]>0},e.prototype.getInteracting=function(){return this.hints_[Ce]>0},e.prototype.cancelAnimations=function(){this.setHint(Se,-this.hints_[Se]);for(var t=0,e=this.animations_.length;t<e;++t){var n=this.animations_[t];n[0].callback&&In(n[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var i=this.animations_[n],r=!0,o=0,s=i.length;o<s;++o){var a=i[o];if(!a.complete){var l=t-a.start,u=a.duration>0?l/a.duration:1;u>=1?(a.complete=!0,u=1):r=!1;var c=a.easing(u);if(a.sourceCenter){var h=a.sourceCenter[0],p=a.sourceCenter[1],f=h+c*(a.targetCenter[0]-h),d=p+c*(a.targetCenter[1]-p);this.set(Re,[f,d])}if(a.sourceResolution&&a.targetResolution){var g=1===c?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);a.anchor&&this.set(Re,this.calculateCenterZoom(g,a.anchor)),this.set(ke,g)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var y=1===c?w(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);a.anchor&&this.set(Re,this.calculateCenterRotate(y,a.anchor)),this.set(Oe,y)}if(e=!0,!a.complete)break}}if(r){this.animations_[n]=null,this.setHint(Se,-1);var v=i[0].callback;v&&In(v,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var n,i=this.getCenter();return void 0!==i&&(Ae(n=[i[0]-e[0],i[1]-e[1]],t-this.getRotation()),Ie(n,e)),n},e.prototype.calculateCenterZoom=function(t,e){var n,i=this.getCenter(),r=this.getResolution();void 0!==i&&void 0!==r&&(n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]);return n},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+f(this)+'"]',n=document.querySelector(e);if(n){var i=getComputedStyle(n);t[0]=parseInt(i.width,10),t[1]=parseInt(i.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,n){var i=e||0,r=n||0;return this.constraints_.resolution(t,i,r)},e.prototype.constrainRotation=function(t,e){var n=e||0;return this.constraints_.rotation(t,n)},e.prototype.getCenter=function(){return this.get(Re)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),n=this.getCenter();y(n,1);var i=this.getResolution();y(void 0!==i,2);var r=this.getRotation();return y(void 0!==r,3),q(n,i,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(ke)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var n=e||this.getSizeFromViewport_(),i=nt(t)/n[0],r=J(t)/n[1];return Math.max(i,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.maxResolution_,i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(t){return n/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get(Oe)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,n=this.maxResolution_,i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(t){return Math.log(n/t)/Math.log(e)/r}},e.prototype.getState=function(t){var e=this.getCenter(),n=this.getProjection(),i=this.getResolution(),r=i/t,o=this.getRotation();return{center:[Math.round(e[0]/r)*r,Math.round(e[1]/r)*r],projection:void 0!==n?n:null,resolution:i,rotation:o,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,i=this.minZoom_||0;if(this.resolutions_){var r=_e(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var n,i=e||{},r=i.size;r||(r=this.getSizeFromViewport_()),y(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(y(!rt(t),25),n=kn(t)):t.getType()===T.CIRCLE?(n=kn(t=t.getExtent())).rotate(this.getRotation(),V(t)):n=t;var o,s=void 0!==i.padding?i.padding:[0,0,0,0],a=void 0===i.constrainResolution||i.constrainResolution,l=void 0!==i.nearest&&i.nearest;o=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.constrainResolution(this.maxResolution_,i.maxZoom-this.minZoom_,0):0;for(var u=n.getFlatCoordinates(),c=this.getRotation(),h=Math.cos(-c),p=Math.sin(-c),f=1/0,d=1/0,g=-1/0,v=-1/0,m=n.getStride(),_=0,x=u.length;_<x;_+=m){var b=u[_]*h-u[_+1]*p,w=u[_]*p+u[_+1]*h;f=Math.min(f,b),d=Math.min(d,w),g=Math.max(g,b),v=Math.max(v,w)}var E=this.getResolutionForExtent([f,d,g,v],[r[0]-s[1]-s[3],r[1]-s[0]-s[2]]);if(E=isNaN(E)?o:Math.max(E,o),a){var S=this.constrainResolution(E,0,0);!l&&S<E&&(S=this.constrainResolution(S,-1,0)),E=S}p=-p;var C=(f+g)/2,R=(d+v)/2,k=[(C+=(s[1]-s[3])/2*E)*h-(R+=(s[0]-s[2])/2*E)*p,R*h+C*p],O=i.callback?i.callback:re;void 0!==i.duration?this.animate({resolution:E,center:k,duration:i.duration,easing:i.easing},O):(this.setResolution(E),this.setCenter(k),In(O,!0))},e.prototype.centerOn=function(t,e,n){var i=this.getRotation(),r=Math.cos(-i),o=Math.sin(-i),s=t[0]*r-t[1]*o,a=t[1]*r+t[0]*o,l=this.getResolution(),u=(s+=(e[0]/2-n[0])*l)*r-(a+=(n[1]-e[1]/2)*l)*(o=-o),c=a*r+s*o;this.setCenter([u,c])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var n=this.calculateCenterRotate(t,e);this.setCenter(n)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(Re,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(ke,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(Oe,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(fe),Mn={ADD:"add",REMOVE:"remove"},Pn="length",Fn=function(t){function e(e,n){t.call(this,e),this.element=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ae),Dn=function(t){function e(e,n){t.call(this);var i=n||{};if(this.unique_=!!i.unique,this.array_=e||[],this.unique_)for(var r=0,o=this.array_.length;r<o;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Pn)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Fn(Mn.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Fn(Mn.REMOVE,e)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Fn(Mn.REMOVE,i)),this.dispatchEvent(new Fn(Mn.ADD,e))}else{for(var r=n;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(Pn,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new g(58)},e}(fe),jn=function(t){function e(e,n,i){t.call(this,e),this.map=n,this.frameState=void 0!==i?i:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ae),Nn=function(t){function e(e,n,i,r,o){t.call(this,e,n,o),this.originalEvent=i,this.pixel=n.getEventPixel(i),this.coordinate=n.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(jn),Gn="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",Bn=-1!==Gn.indexOf("firefox"),Un=-1!==Gn.indexOf("safari")&&-1==Gn.indexOf("chrom"),zn=-1!==Gn.indexOf("webkit")&&-1==Gn.indexOf("edge"),Yn=-1!==Gn.indexOf("macintosh"),Wn=window.devicePixelRatio||1,Xn=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),Kn=(navigator,"ontouchstart"in window),Hn="PointerEvent"in window,Zn=!!navigator.msPointerEnabled,Vn={SINGLECLICK:"singleclick",CLICK:Jt.CLICK,DBLCLICK:Jt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},$n=function(t){function e(e,n,i,r,o){t.call(this,e,n,i.originalEvent,r,o),this.pointerEvent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Nn),qn={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Jn=function(t,e){this.dispatcher=t,this.mapping_=e};Jn.prototype.getEvents=function(){return Object.keys(this.mapping_)},Jn.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var Qn=Jn,ti=1,ei="mouse";function ni(t){if(!this.isEventSimulatedFromTouch_(t)){ti.toString()in this.pointerMap&&this.cancel(t);var e=ai(t,this.dispatcher);this.pointerMap[ti.toString()]=t,this.dispatcher.down(e,t)}}function ii(t){if(!this.isEventSimulatedFromTouch_(t)){var e=ai(t,this.dispatcher);this.dispatcher.move(e,t)}}function ri(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[ti.toString()];if(e&&e.button===t.button){var n=ai(t,this.dispatcher);this.dispatcher.up(n,t),this.cleanupMouse()}}}function oi(t){if(!this.isEventSimulatedFromTouch_(t)){var e=ai(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function si(t){if(!this.isEventSimulatedFromTouch_(t)){var e=ai(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function ai(t,e){var n=e.cloneEvent(t,t),i=n.preventDefault;return n.preventDefault=function(){t.preventDefault(),i()},n.pointerId=ti,n.isPrimary=!0,n.pointerType=ei,n}var li=function(t){function e(e){var n={mousedown:ni,mousemove:ii,mouseup:ri,mouseover:oi,mouseout:si};t.call(this,e,n),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,n=t.clientX,i=t.clientY,r=0,o=e.length,s=void 0;r<o&&(s=e[r]);r++){var a=Math.abs(n-s[0]),l=Math.abs(i-s[1]);if(a<=25&&l<=25)return!0}return!1},e.prototype.cancel=function(t){var e=ai(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[ti.toString()]},e}(Qn),ui=["","unavailable","touch","pen","mouse"];function ci(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function hi(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function pi(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function fi(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function di(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function gi(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function yi(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function vi(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var mi=function(t){function e(e){var n={MSPointerDown:ci,MSPointerMove:hi,MSPointerUp:pi,MSPointerOut:fi,MSPointerOver:di,MSPointerCancel:gi,MSGotPointerCapture:vi,MSLostPointerCapture:yi};t.call(this,e,n),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=ui[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(Qn);function _i(t){this.dispatcher.fireNativeEvent(t)}function xi(t){this.dispatcher.fireNativeEvent(t)}function bi(t){this.dispatcher.fireNativeEvent(t)}function wi(t){this.dispatcher.fireNativeEvent(t)}function Ei(t){this.dispatcher.fireNativeEvent(t)}function Ti(t){this.dispatcher.fireNativeEvent(t)}function Si(t){this.dispatcher.fireNativeEvent(t)}function Ci(t){this.dispatcher.fireNativeEvent(t)}var Ri=function(t){function e(e){var n={pointerdown:_i,pointermove:xi,pointerup:bi,pointerout:wi,pointerover:Ei,pointercancel:Ti,gotpointercapture:Ci,lostpointercapture:Si};t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Qn),ki=!1,Oi=function(t){function e(e,n,i){t.call(this,e),this.originalEvent=n;var r=i||{};this.buttons=function(t){var e;if(t.buttons||ki)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(r),this.pressure=function(t,e){var n=0;n=t.pressure?t.pressure:e?.5:0;return n}(r,this.buttons),this.bubbles="bubbles"in r&&r.bubbles,this.cancelable="cancelable"in r&&r.cancelable,this.view="view"in r?r.view:null,this.detail="detail"in r?r.detail:null,this.screenX="screenX"in r?r.screenX:0,this.screenY="screenY"in r?r.screenY:0,this.clientX="clientX"in r?r.clientX:0,this.clientY="clientY"in r?r.clientY:0,this.ctrlKey="ctrlKey"in r&&r.ctrlKey,this.altKey="altKey"in r&&r.altKey,this.shiftKey="shiftKey"in r&&r.shiftKey,this.metaKey="metaKey"in r&&r.metaKey,this.button="button"in r?r.button:0,this.relatedTarget="relatedTarget"in r?r.relatedTarget:null,this.pointerId="pointerId"in r?r.pointerId:0,this.width="width"in r?r.width:0,this.height="height"in r?r.height:0,this.tiltX="tiltX"in r?r.tiltX:0,this.tiltY="tiltY"in r?r.tiltY:0,this.pointerType="pointerType"in r?r.pointerType:"",this.hwTimestamp="hwTimestamp"in r?r.hwTimestamp:0,this.isPrimary="isPrimary"in r&&r.isPrimary,n.preventDefault&&(this.preventDefault=function(){n.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ae);!function(){try{var t=new MouseEvent("click",{buttons:1});ki=1===t.buttons}catch(t){}}();var Ii=Oi;function Ai(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function Li(t){this.processTouches_(t,this.moveOverOut_)}function Mi(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function Pi(t){this.processTouches_(t,this.cancelOut_)}var Fi=function(t){function e(e,n){var i={touchstart:Ai,touchmove:Li,touchend:Mi,touchcancel:Pi};t.call(this,e,i),this.pointerMap=e.pointerMap,this.mouseSource=n,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&ti.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var n=this.dispatcher.cloneEvent(t,e);return n.pointerId=e.identifier+2,n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount_,n.button=0,n.buttons=1,n.width=e.radiusX||0,n.height=e.radiusY||0,n.pressure=e.force||.5,n.isPrimary=this.isPrimaryTouch_(e),n.pointerType="touch",n.clientX=e.clientX,n.clientY=e.clientY,n.screenX=e.screenX,n.screenY=e.screenY,n},e.prototype.processTouches_=function(t,e){var n=Array.prototype.slice.call(t.changedTouches),i=n.length;function r(){t.preventDefault()}for(var o=0;o<i;++o){var s=this.touchToPointer_(t,n[o]);s.preventDefault=r,e.call(this,t,s)}},e.prototype.findTouch_=function(t,e){for(var n=t.length,i=0;i<n;i++){if(t[i].identifier===e)return!0}return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,n=Object.keys(this.pointerMap),i=n.length;if(i>=e.length){for(var r=[],o=0;o<i;++o){var s=Number(n[o]),a=this.pointerMap[s];s==ti||this.findTouch_(e,s-2)||r.push(a.out)}for(var l=0;l<r.length;++l)this.cancelOut_(t,r[l])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var n=e,i=this.pointerMap[n.pointerId];if(i){var r=i.out,o=i.outTarget;this.dispatcher.move(n,t),r&&o!==n.target&&(r.relatedTarget=n.target,n.relatedTarget=o,r.target=o,n.target?(this.dispatcher.leaveOut(r,t),this.dispatcher.enterOver(n,t)):(n.target=o,n.relatedTarget=null,this.cancelOut_(t,n))),i.out=n,i.outTarget=n.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch_(n)){var i=[n.clientX,n.clientY];e.push(i),setTimeout(function(){var t,n,r;n=i,r=(t=e).indexOf(n),r>-1&&t.splice(r,1)},this.dedupTimeout_)}},e}(Qn),Di=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],ji=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(Hn)this.registerSource("native",new Ri(this));else if(Zn)this.registerSource("ms",new mi(this));else{var t=new li(this);this.registerSource("mouse",t),Kn&&this.registerSource("touch",new Fi(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var n=e,i=n.getEvents();i&&(i.forEach(function(t){var e=n.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(n))}.bind(this)),this.eventSourceList_.push(n))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var n=this.eventSourceList_[e];this.addEvents_(n.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var n=this.eventSourceList_[e];this.removeEvents_(n.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,n=this.eventMap_[e];n&&n(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){Zt(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){$t(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var n={},i=0,r=Di.length;i<r;i++){var o=Di[i][0];n[o]=t[o]||e[o]||Di[i][1]}return n},e.prototype.down=function(t,e){this.fireEvent(qn.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(qn.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(qn.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(qn.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(qn.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(qn.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(qn.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(qn.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,n){return new Ii(t,n,e)},e.prototype.fireEvent=function(t,e,n){var i=this.makeEvent(t,e,n);this.dispatchEvent(i)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,ai(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(le),Ni=function(t){function e(e,n){t.call(this),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n?n*Wn:Wn,this.down_=null;var i=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new ji(i),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Zt(this.pointerEventHandler_,qn.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=Zt(this.pointerEventHandler_,qn.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new $n(Vn.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new $n(Vn.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new $n(Vn.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Vn.POINTERUP||e.type==Vn.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Vn.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new $n(Vn.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(qt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new $n(Vn.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new ji(document),this.dragListenerKeys_.push(Zt(this.documentPointerEventHandler_,Vn.POINTERMOVE,this.handlePointerMove_,this),Zt(this.documentPointerEventHandler_,Vn.POINTERUP,this.handlePointerUp_,this),Zt(this.pointerEventHandler_,Vn.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new $n(Vn.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new $n(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(qt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(qt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(qt),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(le),Gi="postrender",Bi="movestart",Ui="moveend",zi={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Yi="postcompose",Wi="precompose",Xi="render",Ki="rendercomplete",Hi={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5},Zi=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};Zi.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Tt(this.queuedElements_)},Zi.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},Zi.prototype.enqueue=function(t){y(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},Zi.prototype.getCount=function(){return this.elements_.length},Zi.prototype.getLeftChildIndex_=function(t){return 2*t+1},Zi.prototype.getRightChildIndex_=function(t){return 2*t+2},Zi.prototype.getParentIndex_=function(t){return t-1>>1},Zi.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},Zi.prototype.isEmpty=function(){return 0===this.elements_.length},Zi.prototype.isKeyQueued=function(t){return t in this.queuedElements_},Zi.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},Zi.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],s=t;t<i>>1;){var a=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<i&&n[l]<n[a]?l:a;e[t]=e[u],n[t]=n[u],t=u}e[t]=r,n[t]=o,this.siftDown_(s,t)},Zi.prototype.siftDown_=function(t,e){for(var n=this.elements_,i=this.priorities_,r=n[e],o=i[e];e>t;){var s=this.getParentIndex_(e);if(!(i[s]>o))break;n[e]=n[s],i[e]=i[s],e=s}n[e]=r,i[e]=o},Zi.prototype.reprioritize=function(){var t,e,n,i=this.priorityFunction_,r=this.elements_,o=this.priorities_,s=0,a=r.length;for(e=0;e<a;++e)(n=i(t=r[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[s]=n,r[s++]=t);r.length=s,o.length=s,this.heapify_()};var Vi=function(t){function e(e,n){t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);n&&Zt(e[0],Jt.CHANGE,this.handleTileChange,this);return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(n===Hi.LOADED||n===Hi.ERROR||n===Hi.EMPTY||n===Hi.ABORT){$t(e,Jt.CHANGE,this.handleTileChange,this);var i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,i,r,o=0,s=!1;this.tilesLoading_<t&&o<e&&this.getCount()>0;)r=(i=this.dequeue()[0]).getKey(),(n=i.getState())===Hi.ABORT?s=!0:n!==Hi.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,i.load());0===o&&s&&this.tileChangeCallback_()},e}(Zi);function $i(t,e){var n=document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function qi(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function Ji(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var Qi={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"},tr=function(t){function e(e){t.call(this);var n=Et({},e);n[Qi.OPACITY]=void 0!==e.opacity?e.opacity:1,n[Qi.VISIBLE]=void 0===e.visible||e.visible,n[Qi.Z_INDEX]=e.zIndex,n[Qi.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,n[Qi.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(n),this.state_=null,this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=v(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},e.prototype.getLayersArray=function(t){return h()},e.prototype.getLayerStatesArray=function(t){return h()},e.prototype.getExtent=function(){return this.get(Qi.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(Qi.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(Qi.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(Qi.OPACITY)},e.prototype.getSourceState=function(){return h()},e.prototype.getVisible=function(){return this.get(Qi.VISIBLE)},e.prototype.getZIndex=function(){return this.get(Qi.Z_INDEX)},e.prototype.setExtent=function(t){this.set(Qi.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(Qi.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(Qi.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(Qi.OPACITY,t)},e.prototype.setVisible=function(t){this.set(Qi.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(Qi.Z_INDEX,t)},e}(fe),er={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},nr={LAYERS:"layers"},ir=function(t){function e(e){var n=e||{},i=Et({},n);delete i.layers;var r=n.layers;t.call(this,i),this.layersListenerKeys_=[],this.listenerKeys_={},Zt(this,pe(nr.LAYERS),this.handleLayersChanged_,this),r?Array.isArray(r)?r=new Dn(r.slice(),{unique:!0}):y("function"==typeof r.getArray,43):r=new Dn(void 0,{unique:!0}),this.setLayers(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(qt),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Zt(t,Mn.ADD,this.handleLayersAdd_,this),Zt(t,Mn.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(qt);Tt(this.listenerKeys_);for(var n=t.getArray(),i=0,r=n.length;i<r;i++){var o=n[i];this.listenerKeys_[f(o)]=[Zt(o,Qt,this.handleLayerChange_,this),Zt(o,Jt.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[f(e)]=[Zt(e,Qt,this.handleLayerChange_,this),Zt(e,Jt.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=f(t.element);this.listenerKeys_[e].forEach(qt),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(nr.LAYERS)},e.prototype.setLayers=function(t){this.set(nr.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var i=this.getLayerState(),r=n,o=e.length;r<o;r++){var s=e[r];s.opacity*=i.opacity,s.visible=s.visible&&i.visible,s.maxResolution=Math.min(s.maxResolution,i.maxResolution),s.minResolution=Math.max(s.minResolution,i.minResolution),void 0!==i.extent&&(void 0!==s.extent?s.extent=Q(s.extent,i.extent):s.extent=i.extent)}return e},e.prototype.getSourceState=function(){return er.READY},e}(tr);function rr(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}var or=function(t){function e(e){t.call(this);var n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,i,r,o={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new ir({layers:t.layers});o[zi.LAYERGROUP]=s,o[zi.TARGET]=t.target,o[zi.VIEW]=void 0!==t.view?t.view:new Ln,void 0!==t.controls&&(Array.isArray(t.controls)?n=new Dn(t.controls.slice()):(y("function"==typeof t.controls.getArray,47),n=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new Dn(t.interactions.slice()):(y("function"==typeof t.interactions.getArray,48),i=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?r=new Dn(t.overlays.slice()):(y("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new Dn;return{controls:n,interactions:i,keyboardEventTarget:e,overlays:r,values:o}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Wn,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(Kn?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var i=[Jt.CLICK,Jt.DBLCLICK,Jt.MOUSEDOWN,Jt.TOUCHSTART,Jt.MSPOINTERDOWN,Vn.POINTERDOWN,Jt.MOUSEWHEEL,Jt.WHEEL],r=0,o=i.length;r<o;++r)Zt(this.overlayContainerStopEvent_,i[r],se);for(var s in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new Ni(this,e.moveTolerance),Vn)Zt(this.mapBrowserEventHandler_,Vn[s],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=n.keyboardEventTarget,this.keyHandlerKeys_=null,Zt(this.viewport_,Jt.CONTEXTMENU,this.handleBrowserEvent,this),Zt(this.viewport_,Jt.WHEEL,this.handleBrowserEvent,this),Zt(this.viewport_,Jt.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=n.controls||new Dn,this.interactions=n.interactions||new Dn,this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new Vi(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Zt(this,pe(zi.LAYERGROUP),this.handleLayerGroupChanged_,this),Zt(this,pe(zi.VIEW),this.handleViewChanged_,this),Zt(this,pe(zi.SIZE),this.handleSizeChanged_,this),Zt(this,pe(zi.TARGET),this.handleTargetChanged_,this),this.setProperties(n.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),Zt(this.controls,Mn.ADD,function(t){t.element.setMap(this)},this),Zt(this.controls,Mn.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),Zt(this.interactions,Mn.ADD,function(t){t.element.setMap(this)},this),Zt(this.interactions,Mn.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Zt(this.overlays_,Mn.ADD,function(t){this.addOverlayInternal_(t.element)},this),Zt(this.overlays_,Mn.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),$t(this.viewport_,Jt.CONTEXTMENU,this.handleBrowserEvent,this),$t(this.viewport_,Jt.WHEEL,this.handleBrowserEvent,this),$t(this.viewport_,Jt.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(Jt.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var i=this.getCoordinateFromPixel(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==n.layerFilter?n.layerFilter:ne;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=null;return this.forEachFeatureAtPixel(t,function(t){n||(n=[]),n.push(t)},e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var i=n||{},r=void 0!==i.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=i.layerFilter||ne;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,e,null,o,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixel(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:ne,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,i,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(zi.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?We(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(zi.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?We(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(zi.SIZE)},e.prototype.getView=function(){return this.get(zi.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,n,i){var r=this.frameState_;if(!(r&&e in r.wantedTiles))return 1/0;if(!r.wantedTiles[e][t.getKey()])return 1/0;var o=n[0]-r.focus[0],s=n[1]-r.focus[1];return 65536*Math.log(i)+Math.sqrt(o*o+s*s)/i},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,i=new Nn(n,this,t);this.handleMapBrowserEvent(i)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=e.length-1;n>=0;n--){var i=e[n];if(i.getActive())if(!i.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,i=n;if(t){var r=t.viewHints;r[Se]&&(n=this.loadTilesWhileAnimating_?8:0,i=2),r[Ce]&&(n=this.loadTilesWhileInteracting_?8:0,i=2)}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}!t||!this.hasListener(Ki)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var n=0,i=e.length;n<i;++n){var r=e[n];if("function"==typeof r.getLayers)return t(r.getLayers().getArray());var o=r.getSource();if(o&&o.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(Ki,t);for(var o=this.postRenderFunctions_,s=0,a=o.length;s<a;++s)o[s](this,t);o.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)qt(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Zt(i,Jt.KEYDOWN,this.handleBrowserEvent,this),Zt(i,Jt.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Jt.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Ji(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(Jt.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(qt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(qt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",f(t)),this.viewPropertyListenerKey_=Zt(t,Qt,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Zt(t,Jt.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(qt),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Zt(t,Qt,this.render,this),Zt(t,Jt.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,n=this.getSize(),i=this.getView(),r=[1/0,1/0,-1/0,-1/0],o=this.frameState_,s=null;if(void 0!==n&&function(t){return t[0]>0&&t[1]>0}(n)&&i&&i.isDef()){for(var a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=this.getLayerGroup().getLayerStatesArray(),u={},c=0,h=l.length;c<h;++c)u[f(l[c].layer)]=l[c];e=i.getState(this.pixelRatio_),s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:r,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:u,layerStatesArray:l,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:a,wantedTiles:{}}}if(s&&(s.extent=q(e.center,e.resolution,e.rotation,s.size,r)),this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),o)(!this.previousExtent_||!rt(this.previousExtent_)&&!B(s.extent,this.previousExtent_))&&(this.dispatchEvent(new jn(Bi,this,o)),this.previousExtent_=G(this.previousExtent_));this.previousExtent_&&!s.viewHints[Se]&&!s.viewHints[Ce]&&!B(s.extent,this.previousExtent_)&&(this.dispatchEvent(new jn(Ui,this,s)),A(s.extent,this.previousExtent_))}this.dispatchEvent(new jn(Gi,this,s)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(zi.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(zi.SIZE,t)},e.prototype.setTarget=function(t){this.set(zi.TARGET,t)},e.prototype.setView=function(t){this.set(zi.VIEW,t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[f(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[f(t)],this.render()},e}(fe);var sr,ar,lr=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:re,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Ji(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Ji(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)qt(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==re&&this.listenerKeys.push(Zt(t,Gi,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(fe),ur="ol-hidden",cr="ol-unselectable",hr="ol-control",pr="ol-collapsed",fr=(ar={},function(t){if(sr||(sr=document.createElement("div").style),!(t in ar)){sr.font=t;var e=sr.fontFamily;if(sr.font="",!e)return null;ar[t]=e.split(/,\s?/)}return ar[t]});function dr(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}var gr=function(t){function e(e){var n=Et({},e);delete n.source,t.call(this,n),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),Zt(this,pe(Qi.SOURCE),this.handleSourcePropertyChange_,this);var i=e.source?e.source:null;this.setSource(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(Qi.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():er.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(qt(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Zt(t,Jt.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(qt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(qt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Zt(t,Wi,function(t){var e=t,n=this.getLayerState();n.managed=!1,void 0===this.getZIndex()&&(n.zIndex=1/0),e.frameState.layerStatesArray.push(n),e.frameState.layerStates[f(this)]=n},this),this.mapRenderKey_=Zt(this,Jt.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Qi.SOURCE,t)},e}(tr);function yr(t){this.updateElement_(t.frameState)}var vr=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||yr,target:n.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===n.collapsed||n.collapsed,this.overrideCollapsible_=void 0!==n.collapsible,this.collapsible_=void 0===n.collapsible||n.collapsible,this.collapsible_||(this.collapsed_=!1);var i=void 0!==n.className?n.className:"ol-attribution",r=void 0!==n.tipLabel?n.tipLabel:"Attributions",o=void 0!==n.collapseLabel?n.collapseLabel:"»";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;var s=void 0!==n.label?n.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=r,l.appendChild(a),Zt(l,Jt.CLICK,this.handleClick_,this);var u=i+" "+cr+" "+hr+(this.collapsed_&&this.collapsible_?" "+pr:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.ulElement_),c.appendChild(l),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],i=t.layerStatesArray,r=t.viewState.resolution,o=0,s=i.length;o<s;++o){var a=i[o];if(dr(a,r)){var l=a.layer.getSource();if(l){var u=l.getAttributions();if(u){var c=u(t);if(c)if(this.overrideCollapsible_||!1!==l.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(c))for(var h=0,p=c.length;h<p;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!we(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var i=0,r=e.length;i<r;++i){var o=document.createElement("li");o.innerHTML=e[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(pr),this.collapsed_?qi(this.collapseLabel_,this.label_):qi(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(lr);function mr(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var i="rotate("+n+"rad)";if(this.autoHide_){var r=this.element.classList.contains(ur);r||0!==n?r&&0!==n&&this.element.classList.remove(ur):this.element.classList.add(ur)}this.label_.style.msTransform=i,this.label_.style.webkitTransform=i,this.label_.style.transform=i}this.rotation_=n}}var _r=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||mr,target:n.target});var i=void 0!==n.className?n.className:"ol-rotate",r=void 0!==n.label?n.label:"⇧";this.label_=null,"string"==typeof r?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=r):(this.label_=r,this.label_.classList.add("ol-compass"));var o=n.tipLabel?n.tipLabel:"Reset rotation",s=document.createElement("button");s.className=i+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),Zt(s,Jt.CLICK,this.handleClick_,this);var a=i+" "+cr+" "+hr,l=this.element;l.className=a,l.appendChild(s),this.callResetNorth_=n.resetNorth?n.resetNorth:void 0,this.duration_=void 0!==n.duration?n.duration:250,this.autoHide_=void 0===n.autoHide||n.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ur)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:Pe}):t.setRotation(0))},e}(lr),xr=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),target:n.target});var i=void 0!==n.className?n.className:"ol-zoom",r=void 0!==n.delta?n.delta:1,o=void 0!==n.zoomInLabel?n.zoomInLabel:"+",s=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",a=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",l=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=i+"-in",u.setAttribute("type","button"),u.title=a,u.appendChild("string"==typeof o?document.createTextNode(o):o),Zt(u,Jt.CLICK,this.handleClick_.bind(this,r));var c=document.createElement("button");c.className=i+"-out",c.setAttribute("type","button"),c.title=l,c.appendChild("string"==typeof s?document.createTextNode(s):s),Zt(c,Jt.CLICK,this.handleClick_.bind(this,-r));var h=i+" "+cr+" "+hr,p=this.element;p.className=h,p.appendChild(u),p.appendChild(c),this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getResolution();if(n){var i=e.constrainResolution(n,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:i,duration:this.duration_,easing:Pe})):e.setResolution(i)}}},e}(lr);var br=function(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0};br.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},br.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},br.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;var r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_},br.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},br.prototype.getAngle=function(){return this.angle_};var wr=br,Er="active";function Tr(t,e,n,i){e=t.constrainRotation(e,0),Sr(t,e,n,i)}function Sr(t,e,n,i){if(void 0!==e){var r=t.getRotation(),o=t.getCenter();void 0!==r&&o&&i>0?t.animate({rotation:e,anchor:n,duration:i,easing:Pe}):t.rotate(e,n)}}function Cr(t,e,n,i){var r=t.getResolution(),o=t.constrainResolution(r,e,0);if(void 0!==o){var s=t.getResolutions();o=v(o,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(n&&void 0!==o&&o!==r){var a=t.getCenter(),l=t.calculateCenterZoom(o,n);l=t.constrainCenter(l),n=[(o*a[0]-r*l[0])/(o-r),(o*a[1]-r*l[1])/(o-r)]}Rr(t,o,n,i)}function Rr(t,e,n,i){if(e){var r=t.getResolution(),o=t.getCenter();if(void 0!==r&&o&&e!==r&&i)t.animate({resolution:e,anchor:n,duration:i,easing:Pe});else{if(n){var s=t.calculateCenterZoom(e,n);t.setCenter(s)}t.setResolution(e)}}}var kr=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(Er)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Er,t)},e.prototype.setMap=function(t){this.map_=t},e}(fe);function Or(t){var e=!1;if(t.type==Vn.DBLCLICK){var n=t.originalEvent,i=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;Cr(i.getView(),o,r,this.duration_),t.preventDefault(),e=!0}return!e}var Ir=function(t){function e(e){t.call(this,{handleEvent:Or});var n=e||{};this.delta_=n.delta?n.delta:1,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(kr),Ar=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Lr=function(t){return t.target.getTargetElement()===document.activeElement},Mr=ne,Pr=function(t){var e=t.originalEvent;return 0==e.button&&!(zn&&Yn&&e.ctrlKey)},Fr=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Dr=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},jr=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Nr=function(t){var e=t.pointerEvent;return y(void 0!==e,56),"mouse"==e.pointerType};function Gr(t){for(var e=t.length,n=0,i=0,r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return[n/e,i/e]}var Br=function(t){function e(e){var n=e||{};t.call(this,n),n.handleDownEvent&&(this.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(this.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(this.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(this.handleUpEvent=n.handleUpEvent),n.stopDown&&(this.stopDown=n.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Vn.POINTERDRAG)this.handleDragEvent(t);else if(t.type==Vn.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Vn.POINTERDOWN){var i=this.handleDownEvent(t);i&&t.preventDefault(),this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Vn.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Vn.POINTERDOWN||e===Vn.POINTERDRAG||e===Vn.POINTERUP}(t)){var e=t.pointerEvent,n=e.pointerId.toString();t.type==Vn.POINTERUP?delete this.trackedPointers_[n]:t.type==Vn.POINTERDOWN?this.trackedPointers_[n]=e:n in this.trackedPointers_&&(this.trackedPointers_[n]=e),this.targetPointers=St(this.trackedPointers_)}},e}(kr),Ur=function(t){function e(e){t.call(this,{stopDown:ie});var n=e||{};this.kinetic_=n.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=n.condition?n.condition:Fr,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(Ce,1));var e=this.targetPointers,n=Gr(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var i=this.lastCentroid[0]-n[0],r=n[1]-this.lastCentroid[1],o=t.map.getView(),s=[i,r];Le(s,o.getResolution()),Ae(s,o.getRotation()),Ie(s,o.getCenter()),s=o.constrainCenter(s),o.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenter(),s=e.getPixelFromCoordinate(o),a=e.getCoordinateFromPixel([s[0]-i*Math.cos(r),s[1]-i*Math.sin(r)]);n.animate({center:n.constrainCenter(a),duration:500,easing:Pe})}return this.panning_&&(this.panning_=!1,n.setHint(Ce,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Br),zr=function(t){function e(e){var n=e||{};t.call(this,{stopDown:ie}),this.condition_=n.condition?n.condition:Ar,this.lastAngle_=void 0,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Nr(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==Ee){var i=e.getSize(),r=t.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){var s=o-this.lastAngle_,a=n.getRotation();Sr(n,a-s)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){if(!Nr(t))return!0;var e=t.map.getView();e.setHint(Ce,-1);var n=e.getRotation();return Tr(e,n,void 0,this.duration_),!1},e.prototype.handleDownEvent=function(t){return!!Nr(t)&&(!(!Pr(t)||!this.condition_(t))&&(t.map.getView().setHint(Ce,1),this.lastAngle_=void 0,!0))},e}(Br),Yr=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Rn([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(ee),Wr="boxstart",Xr="boxdrag",Kr="boxend",Hr=function(t){function e(e,n,i){t.call(this,e),this.coordinate=n,this.mapBrowserEvent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ae);function Zr(){var t,e,n=this.getMap(),i=n.getView(),r=n.getSize(),o=this.getGeometry().getExtent();if(this.out_){var s=i.calculateExtent(r),a=(t=[n.getPixelFromCoordinate(H(o)),n.getPixelFromCoordinate(et(o))],Y(G(e),t));!function(t,e){var n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}(s,1/i.getResolutionForExtent(a,r)),o=s}var l=i.constrainResolution(i.getResolutionForExtent(o,r)),u=V(o);u=i.constrainCenter(u),i.animate({resolution:l,center:u,duration:this.duration_,easing:Pe})}var Vr=function(t){function e(e){var n=e||{},i=n.condition?n.condition:Dr;t.call(this,{condition:i,className:n.className||"ol-dragzoom",onBoxEnd:Zr}),this.duration_=void 0!==n.duration?n.duration:200,this.out_=void 0!==n.out&&n.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this);var n=e||{};this.box_=new Yr(n.className||"ol-dragbox"),this.minArea_=void 0!==n.minArea?n.minArea:64,this.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:re,this.startPixel_=null,this.condition_=n.condition?n.condition:Mr,this.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,n){var i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){Nr(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Hr(Xr,t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!Nr(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Hr(Kr,t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!!Nr(t)&&(!(!Pr(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Hr(Wr,t.coordinate,t)),!0))},e}(Br)),$r={LEFT:37,UP:38,RIGHT:39,DOWN:40};function qr(t){var e=!1;if(t.type==Jt.KEYDOWN){var n=t.originalEvent.keyCode;if(this.condition_(t)&&(n==$r.DOWN||n==$r.LEFT||n==$r.RIGHT||n==$r.UP)){var i=t.map.getView(),r=i.getResolution()*this.pixelDelta_,o=0,s=0;n==$r.DOWN?s=-r:n==$r.LEFT?o=-r:n==$r.RIGHT?o=r:s=r;var a=[o,s];Ae(a,i.getRotation()),function(t,e,n){var i=t.getCenter();if(i){var r=t.constrainCenter([i[0]+e[0],i[1]+e[1]]);n?t.animate({duration:n,easing:De,center:r}):t.setCenter(r)}}(i,a,this.duration_),t.preventDefault(),e=!0}}return!e}var Jr=function(t){function e(e){t.call(this,{handleEvent:qr});var n=e||{};this.defaultCondition_=function(t){return Fr(t)&&jr(t)},this.condition_=void 0!==n.condition?n.condition:this.defaultCondition_,this.duration_=void 0!==n.duration?n.duration:100,this.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(kr);function Qr(t){var e=!1;if(t.type==Jt.KEYDOWN||t.type==Jt.KEYPRESS){var n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var i=t.map,r=n=="+".charCodeAt(0)?this.delta_:-this.delta_;Cr(i.getView(),r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var to=function(t){function e(e){t.call(this,{handleEvent:Qr});var n=e||{};this.condition_=n.condition?n.condition:jr,this.delta_=n.delta?n.delta:1,this.duration_=void 0!==n.duration?n.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(kr),eo="trackpad",no="wheel",io=function(t){function e(e){var n=e||{};t.call(this,n),this.delta_=0,this.duration_=void 0!==n.duration?n.duration:250,this.timeout_=void 0!==n.timeout?n.timeout:80,this.useAnchor_=void 0===n.useAnchor||n.useAnchor,this.constrainResolution_=n.constrainResolution||!1,this.condition_=n.condition?n.condition:Mr,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(Ce,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==Jt.WHEEL&&e!==Jt.MOUSEWHEEL)return!0;t.preventDefault();var n,i=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Jt.WHEEL?(n=r.deltaY,Bn&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=Wn),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)):t.type==Jt.MOUSEWHEEL&&(n=-r.wheelDeltaY,Un&&(n/=3)),0===n)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?eo:no),this.mode_===eo){var s=i.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(Ce,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,n/this.trackpadDeltaPerZoom_),l=s.getMinResolution(),u=s.getMaxResolution(),c=0;if(a<l?(a=Math.max(a,l/this.trackpadZoomBuffer_),c=1):a>u&&(a=Math.min(a,u*this.trackpadZoomBuffer_),c=-1),this.lastAnchor_){var h=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(h))}return s.setResolution(a),0===c&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,n>0?-1:1),easing:Pe,anchor:this.lastAnchor_,duration:this.duration_}),c>0?s.animate({resolution:l,easing:Pe,anchor:this.lastAnchor_,duration:500}):c<0&&s.animate({resolution:u,easing:Pe,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=n;var p=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),p),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();Cr(e,-v(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(kr),ro=function(t){function e(e){var n=e||{},i=n;i.stopDown||(i.stopDown=ie),t.call(this,i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==n.threshold?n.threshold:.3,this.duration_=void 0!==n.duration?n.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==Ee){var l=s.getViewport().getBoundingClientRect(),u=Gr(this.targetPointers);if(u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixel(u),this.rotating_){var c=a.getRotation();s.render(),Sr(a,c+e,this.anchor_)}}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(Ce,-1),this.rotating_){var n=e.getRotation();Tr(e,n,this.anchor_,this.duration_)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(Ce,1),!0}return!1},e}(Br),oo=function(t){function e(e){var n=e||{},i=n;i.stopDown||(i.stopDown=ie),t.call(this,i),this.constrainResolution_=n.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==n.duration?n.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,s=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,l=a.getView(),u=l.getResolution(),c=l.getMaxResolution(),h=l.getMinResolution(),p=u*e;p>c?(e=c/u,p=c):p<h&&(e=h/u,p=h),1!=e&&(this.lastScaleDelta_=e);var f=a.getViewport().getBoundingClientRect(),d=Gr(this.targetPointers);d[0]-=f.left,d[1]-=f.top,this.anchor_=a.getCoordinateFromPixel(d),a.render(),Rr(l,p,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(Ce,-1);var n=e.getResolution();if(this.constrainResolution_||n<e.getMinResolution()||n>e.getMaxResolution()){var i=this.lastScaleDelta_-1;!function(t,e,n,i,r){e=t.constrainResolution(e,0,r),Rr(t,e,n,i)}(e,n,this.anchor_,this.duration_,i)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(Ce,1),!0}return!1},e}(Br);function so(t){var e=t||{},n=new Dn,i=new wr(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new zr),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new Ir({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new Ur({condition:e.onFocusOnly?Lr:void 0,kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new ro),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new oo({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Jr),n.push(new to({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new io({condition:e.onFocusOnly?Lr:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Vr({duration:e.zoomDuration})),n}var ao=.5,lo={IDLE:0,LOADING:1,LOADED:2,ERROR:3},uo=function(t){function e(e,n,i,r,o){var s=void 0!==o?lo.IDLE:lo.LOADED;t.call(this,e,n,i,s),this.loader_=void 0!==o?o:null,this.canvas_=r,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=lo.ERROR):this.state=lo.LOADED,this.changed()},e.prototype.load=function(){this.state==lo.IDLE&&(this.state=lo.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(function(t){function e(e,n,i,r){t.call(this),this.extent=e,this.pixelRatio_=i,this.resolution=n,this.state=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(Jt.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return h()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){h()},e}(le)),co={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"},ho={IMAGE:"image",VECTOR:"vector"},po=function(t){function e(e,n,i,r,o){t.call(this,e),this.vectorContext=n,this.frameState=i,this.context=r,this.glContext=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ae),fo=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(Jt.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var n=this.oldest_;n;)t.call(e,n.value_,n.key_,this),n=n.newer},e.prototype.get=function(t){var e=this.entries_[t];return y(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return y(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){y(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(le),go=[0,0,0,1],yo=[],vo=[0,0,0,1],mo=[0,0,0,0],_o=new fo,xo={},bo=null,wo={},Eo=function(){var t,e,n=60,i=xo,r="32px ",o=["monospace","serif"],s=o.length,a="wmytzilWMYTZIL@#/&?$%10";function l(t){for(var n=To(),i=100;i<=700;i+=300){for(var l=i+" ",u=!0,c=0;c<s;++c){var h=o[c];if(n.font=l+r+h,e=n.measureText(a).width,t!=h){n.font=l+r+t+","+h;var p=n.measureText(a).width;u=u&&p!=e}}if(u)return!0}return!1}function u(){var e=!0;for(var r in i)i[r]<n&&(l(r)?(i[r]=n,Tt(wo),bo=null,_o.clear()):(++i[r],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var r=fr(e);if(r)for(var o=0,s=r.length;o<s;++o){var a=r[o];a in i||(i[a]=n,l(a)||(i[a]=0,void 0===t&&(t=setInterval(u,32))))}}}();function To(){return bo||(bo=$i(1,1)),bo}var So,Co,Ro=(Co=wo,function(t){var e=Co[t];return null==e&&(So||((So=document.createElement("span")).textContent="M",So.style.margin=So.style.padding="0 !important",So.style.position="absolute !important",So.style.left="-99999px !important"),So.style.font=t,document.body.appendChild(So),e=Co[t]=So.offsetHeight,document.body.removeChild(So)),e});function ko(t,e){var n=To();return t!=n.font&&(n.font=t),n.measureText(e).width}function Oo(t,e,n,i){0!==e&&(t.translate(n,i),t.rotate(e),t.translate(-n,-i))}var Io=[1,0,0,1,0,0];function Ao(t,e,n,i,r,o,s,a,l,u,c){var h;1!=n&&(h=t.globalAlpha,t.globalAlpha=h*n),e&&t.setTransform.apply(t,e),t.drawImage(i,r,o,s,a,l,u,s*c,a*c),h&&(t.globalAlpha=h),e&&t.setTransform.apply(t,Io)}var Lo=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Mo=/^([a-z]*)$/i;function Po(t){return"string"==typeof t?t:jo(t)}var Fo=function(){var t={},e=0;return function(n){var i;if(t.hasOwnProperty(n))i=t[n];else{if(e>=1024){var r=0;for(var o in t)0==(3&r++)&&(delete t[o],--e)}i=function(t){var e,n,i,r,o;Mo.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}(t));if(Lo.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var l=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),n=parseInt(t.substr(1+1*s,s),16),i=parseInt(t.substr(1+2*s,s),16),r=l?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,n=(n<<4)+n,i=(i<<4)+i,l&&(r=(r<<4)+r)),o=[e,n,i,r/255]}else 0==t.indexOf("rgba(")?Do(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Do(o)):y(!1,14);return o}(n),t[n]=i,++e}return i}}();function Do(t){return t[0]=v(t[0]+.5|0,0,255),t[1]=v(t[1]+.5|0,0,255),t[2]=v(t[2]+.5|0,0,255),t[3]=v(t[3],0,1),t}function jo(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:t[3])+")"}function No(t){return Array.isArray(t)?jo(t):t}var Go=function(){};Go.prototype.drawCustom=function(t,e,n){},Go.prototype.drawGeometry=function(t){},Go.prototype.setStyle=function(t){},Go.prototype.drawCircle=function(t,e){},Go.prototype.drawFeature=function(t,e){},Go.prototype.drawGeometryCollection=function(t,e){},Go.prototype.drawLineString=function(t,e){},Go.prototype.drawMultiLineString=function(t,e){},Go.prototype.drawMultiPoint=function(t,e){},Go.prototype.drawMultiPolygon=function(t,e){},Go.prototype.drawPoint=function(t,e){},Go.prototype.drawPolygon=function(t,e){},Go.prototype.drawText=function(t,e){},Go.prototype.setFillStrokeStyle=function(t,e){},Go.prototype.setImageStyle=function(t,e){},Go.prototype.setTextStyle=function(t,e){};var Bo=Go,Uo=function(t){function e(e,n,i,r,o){t.call(this),this.context_=e,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,n,i){if(this.image_){var r=Ne(t,e,n,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var u=0,c=r.length;u<c;u+=2){var h=r[u]-this.imageAnchorX_,p=r[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_){var f=h+this.imageAnchorX_,d=p+this.imageAnchorY_;He(s,f,d,this.imageScale_,this.imageScale_,l,-f,-d),o.setTransform.apply(o,s)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,p,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,n,i){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Ne(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){var a=r[e]+this.textOffsetX_,l=r[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var u=He(this.tmpLocalTransform_,a,l,this.textScale_,this.textScale_,s,-a,-l);o.setTransform.apply(o,u)}this.textStrokeState_&&o.strokeText(this.text_,a,l),this.textFillState_&&o.fillText(this.text_,a,l)}0===s&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,n,i,r){var o=this.context_,s=Ne(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var l=2;l<a;l+=2)o.lineTo(s[l],s[l+1]);return r&&o.closePath(),n},e.prototype.drawRings_=function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e},e.prototype.drawCircle=function(t){if(it(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,n){var i=t.getFlatCoordinates();if(i){var r=t.getStride();return Ne(i,0,i.length,r,e,n)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case T.POINT:this.drawPoint(t);break;case T.LINE_STRING:this.drawLineString(t);break;case T.POLYGON:this.drawPolygon(t);break;case T.MULTI_POINT:this.drawMultiPoint(t);break;case T.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case T.MULTI_POLYGON:this.drawMultiPolygon(t);break;case T.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case T.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&it(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(it(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(it(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getFlatCoordinates(),r=0,o=t.getEnds(),s=t.getStride();n.beginPath();for(var a=0,l=o.length;a<l;++a)r=this.moveToLineTo_(i,r,o[a],s,!1);n.stroke()}if(""!==this.text_){var u=t.getFlatMidpoints();this.drawText_(u,0,u.length,2)}}},e.prototype.drawPolygon=function(t){if(it(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(it(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),i=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=r.length;s<a;++s){var l=r[s];i=this.drawRings_(n,i,l,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var u=t.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=e.lineCap=t.lineCap),Xn&&(we(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,Xn&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:"center";n?(n.font!=t.font&&(n.font=e.font=t.font),n.textAlign!=i&&(n.textAlign=e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var n=t.getColor();this.fillState_={fillStyle:No(n||go)}}else this.fillState_=null;if(e){var i=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),u=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:"round",lineDash:o||yo,lineDashOffset:s||0,lineJoin:void 0!==a?a:"round",lineWidth:this.pixelRatio_*(void 0!==l?l:1),miterLimit:void 0!==u?u:10,strokeStyle:No(i||vo)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),n=t.getImage(1),i=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:No(n||go)}}else this.textFillState_=null;var i=t.getStroke();if(i){var r=i.getColor(),o=i.getLineCap(),s=i.getLineDash(),a=i.getLineDashOffset(),l=i.getLineJoin(),u=i.getWidth(),c=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:s||yo,lineDashOffset:a||0,lineJoin:void 0!==l?l:"round",lineWidth:void 0!==u?u:1,miterLimit:void 0!==c?c:10,strokeStyle:No(r||vo)}}else this.textStrokeState_=null;var h=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),y=t.getScale(),v=t.getText(),m=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==h?h:"10px sans-serif",textAlign:void 0!==m?m:"center",textBaseline:void 0!==_?_:"middle"},this.text_=void 0!==v?v:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==y?y:1)}else this.text_=""},e}(Bo),zo=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function Yo(t,e,n){return e+":"+t+":"+(n?Po(n):"null")}zo.prototype.clear=function(){this.cache_={},this.cacheSize_=0},zo.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},zo.prototype.get=function(t,e,n){var i=Yo(t,e,n);return i in this.cache_?this.cache_[i]:null},zo.prototype.set=function(t,e,n,i){var r=Yo(t,e,n);this.cache_[r]=i,++this.cacheSize_},zo.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var Wo=new zo;function Xo(t,e){Wo.expire()}function Ko(t,e){return t.zIndex-e.zIndex}var Ho=[],Zo=function(t){function e(e){t.call(this,e);var n=e.getViewport();this.context_=$i(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=cr,n.insertBefore(this.canvas_,n.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap(),i=this.context_;if(n.hasListener(t)){var r=e.extent,o=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),l=new Uo(i,o,r,a,s),u=new po(t,l,e,i,null);n.dispatchEvent(u)}},e.prototype.getTransform=function(t){var e=t.viewState,n=this.canvas_.width/2,i=this.canvas_.height/2,r=t.pixelRatio/e.resolution,o=-r,s=-e.rotation,a=-e.center[0],l=-e.center[1];return He(this.transform_,n,i,r,o,s,a,l)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,n=t.pixelRatio,i=Math.round(t.size[0]*n),r=Math.round(t.size[1]*n);this.canvas_.width!=i||this.canvas_.height!=r?(this.canvas_.width=i,this.canvas_.height=r):e.clearRect(0,0,i,r);var o=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(Wi,t);var s=t.layerStatesArray;!function(t,e){var n,i=t.length,r=Array(t.length);for(n=0;n<i;n++)r[n]={index:n,value:t[n]};for(r.sort(function(t,n){return e(t.value,n.value)||t.index-n.index}),n=0;n<t.length;n++)t[n]=r[n].value}(s,Ko),o&&(e.save(),Oo(e,o,i/2,r/2));var a,l,u=t.viewState.resolution;for(a=0,l=s.length;a<l;++a){var c=s[a],h=c.layer,p=this.getLayerRenderer(h);dr(c,u)&&c.sourceState==er.READY&&(p.prepareFrame(t,c)&&p.composeFrame(t,c,e))}o&&e.restore(),this.dispatchRenderEvent(Yi,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,i,r,o,s){var a,l,u=e.viewState.resolution,c=e.layerStatesArray,h=c.length,p=We(e.pixelToCoordinateTransform,t.slice());for(l=h-1;l>=0;--l){var f=c[l],d=f.layer;if(dr(f,u)&&o.call(s,d))if(a=this.getLayerRenderer(d).forEachLayerAtCoordinate(p,e,n,i,r))return a}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var n=0,i=e.length;n<i;++n){var r=e[n];o=r,Ho.indexOf(o)>=0||Ho.push(r)}var o},e}(function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){h()},e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;He(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),function(t){var e,n=(e=t)[0]*e[3]-e[1]*e[2];y(0!==n,32);var i=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5];t[0]=s/n,t[1]=-r/n,t[2]=-o/n,t[3]=i/n,t[4]=(o*l-s*a)/n,t[5]=-(i*l-r*a)/n}(Ye(i,n))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,o,s){var a,l=e.viewState,u=l.resolution;function c(t,n){var o=e.layerStates[f(n)].managed;if(!(f(t)in e.skippedFeatureUids)||o)return i.call(r,t,o?n:null)}var h=l.projection,p=t;if(h.canWrapX()){var d=h.getExtent(),g=nt(d),y=t[0];if(y<d[0]||y>d[2])p=[y+g*Math.ceil((d[0]-y)/g),t[1]]}var v,m=e.layerStatesArray;for(v=m.length-1;v>=0;--v){var _=m[v],x=_.layer;if(dr(_,u)&&o.call(s,x)){var b=this.getLayerRenderer(x),w=x.getSource();if(w&&(a=b.forEachFeatureAtCoordinate(w.getWrapX()?p:t,e,n,c)),a)return a}}},e.prototype.forEachLayerAtPixel=function(t,e,n,i,r,o,s){return h()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,i,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,ne,this,i,r)},e.prototype.getLayerRenderer=function(t){var e=f(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var n,i=0,r=this.layerRendererConstructors_.length;i<r;++i){var o=this.layerRendererConstructors_[i];if(o.handles(t)){n=o.create(this,t);break}}if(!n)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=n,this.layerRendererListeners_[e]=Zt(n,Jt.CHANGE,this.handleLayerRendererChange_,this),n},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],qt(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var n in this.layerRenderers_)e&&n in e.layerStates||this.removeLayerRendererByKey_(n).dispose()},e.prototype.renderFrame=function(t){h()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(Xo)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(ee)),Vo=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,n){var i=e.pixelRatio,r=e.size[0]*i,o=e.size[1]*i,s=e.viewState.rotation,a=tt(n),l=et(n),u=Z(n),c=H(n);We(e.coordinateToPixelTransform,a),We(e.coordinateToPixelTransform,l),We(e.coordinateToPixelTransform,u),We(e.coordinateToPixelTransform,c),t.save(),Oo(t,-s,r/2,o/2),t.beginPath(),t.moveTo(a[0]*i,a[1]*i),t.lineTo(l[0]*i,l[1]*i),t.lineTo(u[0]*i,u[1]*i),t.lineTo(c[0]*i,c[1]*i),t.clip(),Oo(t,s,r/2,o/2)},e.prototype.dispatchComposeEvent_=function(t,e,n,i){var r=this.getLayer();if(r.hasListener(t)){var o=n.size[0]*n.pixelRatio,s=n.size[1]*n.pixelRatio,a=n.viewState.rotation;Oo(e,-a,o/2,s/2);var l=void 0!==i?i:this.getTransform(n,0),u=new Uo(e,n.pixelRatio,n.extent,l,n.viewState.rotation),c=new po(t,u,n,e,null);r.dispatchEvent(c),Oo(e,a,o/2,s/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,n,i,r){return this.forEachFeatureAtCoordinate(t,e,n,ne)?i.call(r,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,n,i){this.dispatchComposeEvent_(Yi,t,e,i)},e.prototype.preCompose=function(t,e,n){this.dispatchComposeEvent_(Wi,t,e,n)},e.prototype.dispatchRenderEvent=function(t,e,n){this.dispatchComposeEvent_(Xi,t,e,n)},e.prototype.getTransform=function(t,e){var n=t.viewState,i=t.pixelRatio,r=i*t.size[0]/2,o=i*t.size[1]/2,s=i/n.resolution,a=-s,l=-n.rotation,u=-n.center[0]+e,c=-n.center[1];return He(this.transform_,r,o,s,a,l,u,c)},e.prototype.composeFrame=function(t,e,n){h()},e.prototype.prepareFrame=function(t,e){return h()},e}(function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,n){return function(i,r){return t.forEachLoadedTile(e,i,r,function(t){n[i]||(n[i]={}),n[i][t.tileCoord.toString()]=t})}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===lo.LOADED&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(t){var e=t.getState();return e!=lo.LOADED&&e!=lo.ERROR&&Zt(t,Jt.CHANGE,this.handleImageChange_,this),e==lo.IDLE&&(t.load(),e=t.getState()),e==lo.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==er.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var i=f(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n,i){var r=f(e),o=n.toString();r in t?o in t[r]?t[r][o].extend(i):t[r][o]=i:(t[r]={},t[r][o]=i)},e.prototype.manageTilePyramid=function(t,e,n,i,r,o,s,a,l,u){var c=f(e);c in t.wantedTiles||(t.wantedTiles[c]={});var h,p,d,g,y,v,m=t.wantedTiles[c],_=t.tileQueue;for(v=n.getMinZoom();v<=s;++v)for(p=n.getTileRangeForExtentAndZ(o,v,p),d=n.getResolution(v),g=p.minX;g<=p.maxX;++g)for(y=p.minY;y<=p.maxY;++y)s-v<=a?((h=e.getTile(v,g,y,i,r)).getState()==Hi.IDLE&&(m[h.getKey()]=!0,_.isKeyQueued(h.getKey())||_.enqueue([h,c,n.getTileCoordCenter(h.tileCoord),d])),void 0!==l&&l.call(u,h)):e.useTile(v,g,y,r)},e}(ue)),$o=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=[1,0,0,1,0,0],this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,n){this.preCompose(n,t);var i=this.getImage();if(i){var r=e.extent,o=void 0!==r&&!P(r,t.extent)&&it(r,t.extent);o&&this.clip(n,t,r);var s=this.getImageTransform(),a=n.globalAlpha;n.globalAlpha=e.opacity;var l=s[4],u=s[5],c=i.width*s[0],h=i.height*s[3];c>=.5&&h>=.5&&n.drawImage(i,0,0,+i.width,+i.height,Math.round(l),Math.round(u),Math.round(c),Math.round(h)),n.globalAlpha=a,o&&n.restore()}this.postCompose(n,t,e)},e.prototype.getImage=function(){return h()},e.prototype.getImageTransform=function(){return h()},e.prototype.forEachLayerAtCoordinate=function(t,e,n,i,r){if(this.getImage()){var o=We(this.coordinateToCanvasPixelTransform,t.slice());Le(o,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=$i(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),o[0],o[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?i.call(r,this.getLayer(),s):void 0}},e}(Vo),qo=function(t){function e(n){if(t.call(this,n),this.image_=null,this.imageTransform_=[1,0,0,1,0,0],this.skippedFeatures_=[],this.vectorRenderer_=null,n.getType()===co.VECTOR)for(var i=0,r=Ho.length;i<r;++i){var o=Ho[i];if(o!==e&&o.handles(n)){this.vectorRenderer_=new o(n);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var n,i=t.pixelRatio,r=t.size,o=t.viewState,s=o.center,a=o.resolution,l=this.getLayer().getSource(),u=t.viewHints,c=this.vectorRenderer_,h=t.extent;if(c||void 0===e.extent||(h=Q(h,e.extent)),!u[Se]&&!u[Ce]&&!rt(h)){var p=o.projection,f=this.skippedFeatures_;if(c){var d=c.context,g=Et({},t,{size:[nt(h)/a,J(h)/a],viewState:Et({},t.viewState,{rotation:0})}),y=Object.keys(g.skippedFeatureUids).sort();n=new uo(h,a,i,d.canvas,function(t){!c.prepareFrame(g,e)||!c.replayGroupChanged&&we(f,y)||(d.canvas.width=g.size[0]*i,d.canvas.height=g.size[1]*i,c.compose(d,g,e),f=y,t())})}else n=l.getImage(h,a,i,p);n&&this.loadImage(n)&&(this.image_=n,this.skippedFeatures_=f)}if(this.image_){var v=(n=this.image_).getExtent(),m=n.getResolution(),_=n.getPixelRatio(),x=i*m/(a*_),b=He(this.imageTransform_,i*r[0]/2,i*r[1]/2,x,x,0,_*(v[0]-s[0])/m,_*(s[1]-v[3])/m);He(this.coordinateToCanvasPixelTransform,i*r[0]/2-b[4],i*r[1]/2-b[5],i/a,-i/a,0,-s[0],-s[1]),this.renderedResolution=m*i/_}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,n,i,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,n,i,r):t.prototype.forEachFeatureAtCoordinate.call(this,e,n,i,r)},e}($o);qo.handles=function(t){return t.getType()===co.IMAGE||t.getType()===co.VECTOR&&t.getRenderMode()===ho.IMAGE},qo.create=function(t,e){return new qo(e)};var Jo=qo,Qo=function(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i};function ts(t,e,n,i,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new Qo(t,e,n,i)}Qo.prototype.contains=function(t){return this.containsXY(t[1],t[2])},Qo.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},Qo.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},Qo.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},Qo.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},Qo.prototype.getHeight=function(){return this.maxY-this.minY+1},Qo.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},Qo.prototype.getWidth=function(){return this.maxX-this.minX+1},Qo.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var es=Qo,ns=function(t){function e(e,n){t.call(this,e),this.context=n?null:$i(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new es(0,0,0,0),this.imageTransform_=[1,0,0,1,0,0],this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==Hi.LOADED||n==Hi.EMPTY||n==Hi.ERROR&&!i},e.prototype.getTile=function(t,e,n,i,r){var o=this.getLayer(),s=o.getSource().getTile(t,e,n,i,r);return s.getState()==Hi.ERROR&&(o.getUseInterimTilesOnError()?o.getPreload()>0&&(this.newTiles_=!0):s.setState(Hi.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},e.prototype.prepareFrame=function(t,e){var n=t.pixelRatio,i=t.size,r=t.viewState,o=r.projection,s=r.resolution,a=r.center,l=this.getLayer(),u=l.getSource(),c=u.getRevision(),h=u.getTileGridForProjection(o),p=h.getZForResolution(s,this.zDirection),d=h.getResolution(p),g=Math.round(s/d)||1,y=t.extent;if(void 0!==e.extent&&(y=Q(y,e.extent)),rt(y))return!1;var v=h.getTileRangeForExtentAndZ(y,p),m=h.getTileRangeExtent(p,v),_=u.getTilePixelRatio(n),x={};x[p]={};var b,w,E,T=this.createLoadedTileFinder(u,o,x),S=t.viewHints,C=S[Se]||S[Ce],R=this.tmpExtent,k=this.tmpTileRange_;for(this.newTiles_=!1,w=v.minX;w<=v.maxX;++w)for(E=v.minY;E<=v.maxY;++E)if(!(Date.now()-t.time>16&&C)){if(b=this.getTile(p,w,E,n,o),this.isDrawableTile_(b)){var O=f(this);if(b.getState()==Hi.LOADED){x[p][b.tileCoord.toString()]=b;var I=b.inTransition(O);this.newTiles_||!I&&-1!==this.renderedTiles.indexOf(b)||(this.newTiles_=!0)}if(1===b.getAlpha(O,t.time))continue}var A=h.getTileCoordChildTileRange(b.tileCoord,k,R),L=!1;A&&(L=T(p+1,A)),L||h.forEachTileCoordParentTileRange(b.tileCoord,T,null,k,R)}var M=d*n/_*g;if(!(this.renderedResolution&&Date.now()-t.time>16&&C)&&(this.newTiles_||!this.renderedExtent_||!P(this.renderedExtent_,y)||this.renderedRevision!=c||g!=this.oversampling_||!C&&M!=this.renderedResolution)){var F=this.context;if(F){var D=u.getTilePixelSize(p,n,o),j=Math.round(v.getWidth()*D[0]/g),N=Math.round(v.getHeight()*D[1]/g),G=F.canvas;G.width!=j||G.height!=N?(this.oversampling_=g,G.width=j,G.height=N):((this.renderedExtent_&&!B(m,this.renderedExtent_)||this.renderedRevision!=c)&&F.clearRect(0,0,j,N),g=this.oversampling_)}this.renderedTiles.length=0;var U,z,Y,W,X,K,H,Z,V,$,q=Object.keys(x).map(Number);for(q.sort(function(t,e){return t===p?1:e===p?-1:t>e?1:t<e?-1:0}),W=0,X=q.length;W<X;++W)for(var J in Y=q[W],z=u.getTilePixelSize(Y,n,o),U=h.getResolution(Y)/d,H=_*u.getGutterForProjection(o),Z=x[Y])b=Z[J],w=((K=h.getTileCoordExtent(b.getTileCoord(),R))[0]-m[0])/d*_/g,E=(m[3]-K[3])/d*_/g,V=z[0]*U/g,$=z[1]*U/g,this.drawTileImage(b,t,e,w,E,V,$,H,p===Y),this.renderedTiles.push(b);this.renderedRevision=c,this.renderedResolution=d*n/_*g,this.renderedExtent_=m}var tt=this.renderedResolution/s,et=He(this.imageTransform_,n*i[0]/2,n*i[1]/2,tt,tt,0,(this.renderedExtent_[0]-a[0])/this.renderedResolution*n,(a[1]-this.renderedExtent_[3])/this.renderedResolution*n);return He(this.coordinateToCanvasPixelTransform,n*i[0]/2-et[4],n*i[1]/2-et[5],n/s,-n/s,0,-a[0],-a[1]),this.updateUsedTiles(t.usedTiles,u,p,v),this.manageTilePyramid(t,u,h,n,o,y,p,l.getPreload()),this.scheduleExpireCache(t,u),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,n,i,r,o,s,a,l){var u=this.getTileImage(t);if(u){var c=f(this),h=l?t.getAlpha(c,e.time):1,p=this.getLayer().getSource();1!==h||p.getOpaque(e.viewState.projection)||this.context.clearRect(i,r,o,s);var d=h!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,i,r,o,s),d&&this.context.restore(),1!==h?e.animate=!0:l&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}($o);ns.handles=function(t){return t.getType()===co.TILE},ns.create=function(t,e){return new ns(e)},ns.prototype.getLayer;var is=ns,rs=n(265),os=n.n(rs),ss=function(){};ss.prototype.getReplay=function(t,e){return h()},ss.prototype.isEmpty=function(){return h()},ss.prototype.addDeclutter=function(t){return h()};var as=ss,ls={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function us(t,e,n,i){for(var r=t[e],o=t[e+1],s=0,a=e+i;a<n;a+=i){var l=t[a],u=t[a+1];s+=Math.sqrt((l-r)*(l-r)+(u-o)*(u-o)),r=l,o=u}return s}function cs(t,e,n,i,r,o,s,a){for(var l,u,c,h=[],p=t[e]>t[n-i],f=r.length,d=t[e],g=t[e+1],y=t[e+=i],v=t[e+1],m=0,_=Math.sqrt(Math.pow(y-d,2)+Math.pow(v-g,2)),x="",b=0,w=0;w<f;++w){u=p?f-w-1:w;var T=r.charAt(u),S=o(x=p?T+x:x+T)-b;b+=S;for(var C=s+S/2;e<n-i&&m+_<C;)d=y,g=v,y=t[e+=i],v=t[e+1],m+=_,_=Math.sqrt(Math.pow(y-d,2)+Math.pow(v-g,2));var R=C-m,k=Math.atan2(v-g,y-d);if(p&&(k+=k>0?-Math.PI:Math.PI),void 0!==c){var O=k-c;if(O+=O>Math.PI?-2*Math.PI:O<-Math.PI?2*Math.PI:0,Math.abs(O)>a)return null}var I=R/_,A=E(d,y,I),L=E(g,v,I);c==k?(p&&(l[0]=A,l[1]=L,l[2]=S/2),l[4]=x):(b=S,l=[A,L,S/2,k,x=T],p?h.unshift(l):h.push(l),c=k),s+=S}return h}var hs={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ps=[hs.FILL],fs=[hs.STROKE],ds=[hs.BEGIN_PATH],gs=[hs.CLOSE_PATH],ys=hs,vs=[ls.POLYGON,ls.CIRCLE,ls.LINE_STRING,ls.IMAGE,ls.TEXT,ls.DEFAULT],ms={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},_s=[1/0,1/0,-1/0,-1/0],xs=[1,0,0,1,0,0],bs=function(t){function e(e,n,i,r,o,s){t.call(this),this.declutterTree=s,this.tolerance=e,this.maxExtent=n,this.overlaps=o,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,n,i,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},e.prototype.replayImage_=function(t,e,n,i,r,o,s,a,l,u,c,h,p,f,d,g,y,v){var m=y||v;e-=r*=p,n-=o*=p;var _,x,b,w,E=d+u>i.width?i.width-u:d,T=a+c>i.height?i.height-c:a,S=g[3]+E*p+g[1],C=g[0]+T*p+g[2],R=e-g[3],k=n-g[0];(m||0!==h)&&(_=[R,k],x=[R+S,k],b=[R+S,k+C],w=[R,k+C]);var O=null;if(0!==h){var I=e+r,A=n+o;O=He(xs,I,A,1,1,h,-I,-A),G(_s),z(_s,We(xs,_)),z(_s,We(xs,x)),z(_s,We(xs,b)),z(_s,We(xs,w))}else N(R,k,R+S,k+C,_s);var L=t.canvas,M=v?v[2]*p/2:0,P=_s[0]-M<=L.width&&_s[2]+M>=0&&_s[1]-M<=L.height&&_s[3]+M>=0;if(f&&(e=Math.round(e),n=Math.round(n)),s){if(!P&&1==s[4])return;U(s,_s);var F=P?[t,O?O.slice(0):null,l,i,u,c,E,T,e,n,p]:null;F&&m&&F.push(y,v,_,x,b,w),s.push(F)}else P&&(m&&this.replayTextBackground_(t,_,x,b,w,y,v),Ao(t,O,l,i,u,c,E,T,e,n,p))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,n,i,r,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=i);var l,u,c,h=[t[e],t[e+1]],p=[NaN,NaN],f=!0;for(l=e+i;l<n;l+=i)p[0]=t[l],p[1]=t[l+1],(c=D(a,p))!==u?(f&&(this.coordinates[s++]=h[0],this.coordinates[s++]=h[1]),this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],f=!1):c===k.INTERSECTING?(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],f=!1):f=!0,h[0]=p[0],h[1]=p[1],u=c;return(r&&f||l===e+i)&&(this.coordinates[s++]=h[0],this.coordinates[s++]=h[1]),s},e.prototype.drawCustomCoordinates_=function(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){var a=n[o],l=this.appendFlatCoordinates(t,e,a,i,!1,!1);r.push(l),e=a}return e},e.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);var i,r,o,s,a,l=t.getType(),u=t.getStride(),c=this.coordinates.length;if(l==T.MULTI_POLYGON){i=(t=t).getOrientedFlatCoordinates(),s=[];var h=t.getEndss();a=0;for(var p=0,f=h.length;p<f;++p){var d=[];a=this.drawCustomCoordinates_(i,a,h[p],u,d),s.push(d)}this.instructions.push([ys.CUSTOM,c,s,t,n,un])}else l==T.POLYGON||l==T.MULTI_LINE_STRING?(o=[],i=l==T.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(i,0,t.getEnds(),u,o),this.instructions.push([ys.CUSTOM,c,o,t,n,ln])):l==T.LINE_STRING||l==T.MULTI_POINT?(i=t.getFlatCoordinates(),r=this.appendFlatCoordinates(i,0,i.length,u,!1,!1),this.instructions.push([ys.CUSTOM,c,r,t,n,an])):l==T.POINT&&(i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),r=this.coordinates.length,this.instructions.push([ys.CUSTOM,c,r,t,n]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[ys.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ys.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=We(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,Io)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],Xn&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var n=t[4];if(1==n||n==t.length-5){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(i)){this.declutterTree.insert(i);for(var r=5,o=t.length;r<o;++r){var s=t[r];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),Ao.apply(void 0,s))}}t.length=5,G(t)}}},e.prototype.replay_=function(t,e,n,i,r,o,s){var a;this.pixelCoordinates_&&we(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Ne(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Ye(this.renderedTransform_,e));for(var l,u,c,h,p,d,g,y,v,m,_,x,b=!Ct(n),w=0,E=i.length,T=0,S=0,C=0,R=null,k=null,O=this.coordinateCache_,I=this.viewRotation_,A={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:I},L=this.instructions!=i||this.overlaps?0:200;w<E;){var M=i[w];switch(M[0]){case ys.BEGIN_GEOMETRY:m=M[1],b&&n[f(m)]||!m.getGeometry()?w=M[2]:void 0===s||it(s,m.getGeometry().getExtent())?++w:w=M[2]+1;break;case ys.BEGIN_PATH:S>L&&(this.fill_(t),S=0),C>L&&(t.stroke(),C=0),S||C||(t.beginPath(),h=p=NaN),++w;break;case ys.CIRCLE:var P=a[T=M[1]],F=a[T+1],D=a[T+2]-P,j=a[T+3]-F,N=Math.sqrt(D*D+j*j);t.moveTo(P+N,F),t.arc(P,F,N,0,2*Math.PI,!0),++w;break;case ys.CLOSE_PATH:t.closePath(),++w;break;case ys.CUSTOM:T=M[1],l=M[2];var G=M[3],B=M[4],U=6==M.length?M[5]:void 0;A.geometry=G,A.feature=m,w in O||(O[w]=[]);var z=O[w];U?U(a,T,l,2,z):(z[0]=a[T],z[1]=a[T+1],z.length=2),B(z,A),++w;break;case ys.DRAW_IMAGE:T=M[1],l=M[2],v=M[3],u=M[4],c=M[5],y=o?null:M[6];var Y=M[7],W=M[8],X=M[9],K=M[10],H=M[11],Z=M[12],V=M[13],$=M[14],q=void 0,J=void 0,Q=void 0;for(M.length>16?(q=M[15],J=M[16],Q=M[17]):(q=mo,J=Q=!1),H&&(Z+=I);T<l;T+=2)this.replayImage_(t,a[T],a[T+1],v,u,c,y,Y,W,X,K,Z,V,r,$,q,J?R:null,Q?k:null);this.renderDeclutter_(y,m),++w;break;case ys.DRAW_CHARS:var tt=M[1],et=M[2],nt=M[3];y=o?null:M[4];var rt=M[5],ot=M[6],st=M[7],at=M[8],lt=M[9],ut=M[10],ct=M[11],ht=M[12],pt=M[13],ft=M[14],dt=us(a,tt,et,2),gt=at(ht);if(rt||gt<=dt){var yt=this.textStates[pt].textAlign,vt=cs(a,tt,et,2,ht,at,(dt-gt)*ms[yt],st);if(vt){var mt=void 0,_t=void 0,xt=void 0,bt=void 0,wt=void 0;if(ut)for(mt=0,_t=vt.length;mt<_t;++mt)xt=(wt=vt[mt])[4],bt=this.getImage(xt,pt,"",ut),u=wt[2]+ct,c=nt*bt.height+2*(.5-nt)*ct-lt,this.replayImage_(t,wt[0],wt[1],bt,u,c,y,bt.height,1,0,0,wt[3],ft,!1,bt.width,mo,null,null);if(ot)for(mt=0,_t=vt.length;mt<_t;++mt)xt=(wt=vt[mt])[4],bt=this.getImage(xt,pt,ot,""),u=wt[2],c=nt*bt.height-lt,this.replayImage_(t,wt[0],wt[1],bt,u,c,y,bt.height,1,0,0,wt[3],ft,!1,bt.width,mo,null,null)}}this.renderDeclutter_(y,m),++w;break;case ys.END_GEOMETRY:if(void 0!==o){var Et=o(m=M[1]);if(Et)return Et}++w;break;case ys.FILL:L?S++:this.fill_(t),++w;break;case ys.MOVE_TO_LINE_TO:for(T=M[1],l=M[2],_=a[T],g=(x=a[T+1])+.5|0,(d=_+.5|0)===h&&g===p||(t.moveTo(_,x),h=d,p=g),T+=2;T<l;T+=2)d=(_=a[T])+.5|0,g=(x=a[T+1])+.5|0,T!=l-2&&d===h&&g===p||(t.lineTo(_,x),h=d,p=g);++w;break;case ys.SET_FILL_STYLE:R=M,this.alignFill_=M[2],S&&(this.fill_(t),S=0,C&&(t.stroke(),C=0)),t.fillStyle=M[1],++w;break;case ys.SET_STROKE_STYLE:k=M,C&&(t.stroke(),C=0),this.setStrokeStyle_(t,M),++w;break;case ys.STROKE:L?C++:t.stroke(),++w;break;default:++w}}S&&this.fill_(t),C&&t.stroke()},e.prototype.replay=function(t,e,n,i,r){this.viewRotation_=n,this.replay_(t,e,i,this.instructions,r,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,n,i,r,o){return this.viewRotation_=n,this.replay_(t,e,i,this.hitDetectionInstructions,!0,r,o)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,i,r=e.length,o=-1;for(t=0;t<r;++t)(i=(n=e[t])[0])==ys.END_GEOMETRY?o=t:i==ys.BEGIN_GEOMETRY&&(n[2]=t,xe(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var i=t.getColor();n.fillStyle=No(i||go)}else n.fillStyle=void 0;if(e){var r=e.getColor();n.strokeStyle=No(r||vo);var o=e.getLineCap();n.lineCap=void 0!==o?o:"round";var s=e.getLineDash();n.lineDash=s?s.slice():yo;var a=e.getLineDashOffset();n.lineDashOffset=a||0;var l=e.getLineJoin();n.lineJoin=void 0!==l?l:"round";var u=e.getWidth();n.lineWidth=void 0!==u?u:1;var c=e.getMiterLimit();n.miterLimit=void 0!==c?c:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},e.prototype.createFill=function(t,e){var n=t.fillStyle,i=[ys.SET_FILL_STYLE,n];return"string"!=typeof n&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[ys.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t,n)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,i=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!we(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[ys.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=A(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;I(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Bo),ws=function(t){function e(e,n,i,r,o,s){t.call(this,e,n,i,r,o,s),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,n,i){return this.appendFlatCoordinates(t,e,n,i,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([ys.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ys.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(n,0,n.length,i);this.instructions.push([ys.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([ys.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),i=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=n[0],this.anchorY_=n[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=i[0]},e}(bs),Es=function(t){function e(e,n,i,r,o,s){t.call(this,e,n,i,r,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,n,i){var r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,n,i,!1,!1),s=[ys.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n},e.prototype.drawLineString=function(t,e){var n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0!==i&&void 0!==r){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ys.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],ds);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(fs),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0!==i&&void 0!==r){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ys.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],ds);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.drawFlatCoordinates_(s,l,o[u],a);this.hitDetectionInstructions.push(fs),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(fs),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(fs),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(ds)},e}(bs),Ts=function(t){function e(e,n,i,r,o,s){t.call(this,e,n,i,r,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,n,i){var r=this.state,o=void 0!==r.fillStyle,s=null!=r.strokeStyle,a=n.length;this.instructions.push(ds),this.hitDetectionInstructions.push(ds);for(var l=0;l<a;++l){var u=n[l],c=this.coordinates.length,h=this.appendFlatCoordinates(t,e,u,i,!0,!s),p=[ys.MOVE_TO_LINE_TO,c,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(gs),this.hitDetectionInstructions.push(gs)),e=u}return o&&(this.instructions.push(ps),this.hitDetectionInstructions.push(ps)),s&&(this.instructions.push(fs),this.hitDetectionInstructions.push(fs)),e},e.prototype.drawCircle=function(t,e){var n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0!==i||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ys.SET_FILL_STYLE,Po(go)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([ys.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var l=[ys.CIRCLE,a];this.instructions.push(ds,l),this.hitDetectionInstructions.push(ds,l),this.hitDetectionInstructions.push(ps),void 0!==n.fillStyle&&this.instructions.push(ps),void 0!==n.strokeStyle&&(this.instructions.push(fs),this.hitDetectionInstructions.push(fs)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0!==i||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ys.SET_FILL_STYLE,Po(go)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([ys.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0!==i||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([ys.SET_FILL_STYLE,Po(go)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([ys.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.drawFlatCoordinatess_(s,l,o[u],a);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,n=0,i=e.length;n<i;++n)e[n]=hn(e[n],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(bs);function Ss(t,e,n,i,r){var o,s,a,l,u,c,h,p,f,d=n,g=n,y=0,v=0,m=n;for(o=n;o<i;o+=r){var _=e[o],x=e[o+1];void 0!==l&&(p=_-l,f=x-u,a=Math.sqrt(p*p+f*f),void 0!==c&&(v+=s,Math.acos((c*p+h*f)/(s*a))>t&&(v>y&&(y=v,d=m,g=o),v=0,m=o-r)),s=a,c=p,h=f),l=_,u=x}return(v+=a)>y?[m,o]:[d,g]}var Cs="line";var Rs={Circle:Ts,Default:bs,Image:ws,LineString:Es,Polygon:Ts,Text:function(t){function e(e,n,i,r,o,s){t.call(this,e,n,i,r,o,s),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},_o.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var n=this.textFillState_,i=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(n||i)){var o,s,a=this.coordinates.length,l=t.getType(),u=null,c=2,h=2;if(r.placement===Cs){if(!it(this.getBufferedMaxExtent(),t.getExtent()))return;var p;if(u=t.getFlatCoordinates(),h=t.getStride(),l==T.LINE_STRING)p=[u.length];else if(l==T.MULTI_LINE_STRING)p=t.getEnds();else if(l==T.POLYGON)p=t.getEnds().slice(0,1);else if(l==T.MULTI_POLYGON){var f=t.getEndss();for(p=[],o=0,s=f.length;o<s;++o)p.push(f[o][0])}this.beginGeometry(t,e);for(var d,g=r.textAlign,y=0,v=0,m=p.length;v<m;++v){if(null==g){var _=Ss(r.maxAngle,u,y,p[v],h);y=_[0],d=_[1]}else d=p[v];for(o=y;o<d;o+=h)this.coordinates.push(u[o],u[o+1]);c=this.coordinates.length,y=p[v],this.drawChars_(a,c,this.declutterGroup_),a=c}this.endGeometry(t,e)}else{var x=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),b=x.width/this.pixelRatio;switch(l){case T.POINT:case T.MULTI_POINT:c=(u=t.getFlatCoordinates()).length;break;case T.LINE_STRING:u=t.getFlatMidpoint();break;case T.CIRCLE:u=t.getCenter();break;case T.MULTI_LINE_STRING:c=(u=t.getFlatMidpoints()).length;break;case T.POLYGON:if(u=t.getFlatInteriorPoint(),!r.overflow&&u[2]/this.resolution<b)return;h=3;break;case T.MULTI_POLYGON:var w=t.getFlatInteriorPoints();for(u=[],o=0,s=w.length;o<s;o+=3)(r.overflow||w[o+2]/this.resolution>=b)&&u.push(w[o],w[o+1]);if(0==(c=u.length))return}c=this.appendFlatCoordinates(u,0,c,h,!1,!1),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(x,a,c),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,n,i){var r,o=i+e+t+n+this.pixelRatio;if(!_o.containsKey(o)){var s=i?this.strokeStates[i]||this.textStrokeState_:null,a=n?this.fillStates[n]||this.textFillState_:null,l=this.textStates[e]||this.textState_,u=this.pixelRatio,c=l.scale*u,h=ms[l.textAlign||"center"],p=i&&s.lineWidth?s.lineWidth:0,f=t.split("\n"),d=f.length,g=[],y=function(t,e,n){for(var i=e.length,r=0,o=0;o<i;++o){var s=ko(t,e[o]);r=Math.max(r,s),n.push(s)}return r}(l.font,f,g),v=Ro(l.font),m=v*d,_=y+p,x=$i(Math.ceil(_*c),Math.ceil((m+p)*c));r=x.canvas,_o.set(o,r),1!=c&&x.scale(c,c),x.font=l.font,i&&(x.strokeStyle=s.strokeStyle,x.lineWidth=p,x.lineCap=s.lineCap,x.lineJoin=s.lineJoin,x.miterLimit=s.miterLimit,Xn&&s.lineDash.length&&(x.setLineDash(s.lineDash),x.lineDashOffset=s.lineDashOffset)),n&&(x.fillStyle=a.fillStyle),x.textBaseline="middle",x.textAlign="center";var b,w=.5-h,E=h*r.width/c+w*p;if(i)for(b=0;b<d;++b)x.strokeText(f[b],E+w*g[b],.5*(p+v)+b*v);if(n)for(b=0;b<d;++b)x.fillText(f[b],E+w*g[b],.5*(p+v)+b*v)}return _o.get(o)},e.prototype.drawTextImage_=function(t,e,n){var i=this.textState_,r=this.textStrokeState_,o=this.pixelRatio,s=ms[i.textAlign||"center"],a=ms[i.textBaseline],l=r&&r.lineWidth?r.lineWidth:0,u=s*t.width/o+2*(.5-s)*l,c=a*t.height/o+2*(.5-a)*l;this.instructions.push([ys.DRAW_IMAGE,e,n,t,(u-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,i.padding==mo?mo:i.padding.map(function(t){return t*o}),!!i.backgroundFill,!!i.backgroundStroke]),this.hitDetectionInstructions.push([ys.DRAW_IMAGE,e,n,t,(u-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,t.width,i.padding,!!i.backgroundFill,!!i.backgroundStroke])},e.prototype.drawChars_=function(t,e,n){var i=this.textStrokeState_,r=this.textState_,o=this.textFillState_,s=this.strokeKey_;i&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||"center",scale:r.scale});var l=this.fillKey_;o&&(l in this.fillStates||(this.fillStates[l]={fillStyle:o.fillStyle}));var u=this.pixelRatio,c=ms[r.textBaseline],h=this.textOffsetY_*u,p=this.text_,f=r.font,d=r.scale,g=i?i.lineWidth*d/2:0,y=this.widths_[f];y||(this.widths_[f]=y={}),this.instructions.push([ys.DRAW_CHARS,t,e,c,n,r.overflow,l,r.maxAngle,function(t){var e=y[t];return e||(e=y[t]=ko(f,t)),e*d*u},h,s,g*u,p,a,1]),this.hitDetectionInstructions.push([ys.DRAW_CHARS,t,e,c,n,r.overflow,l,r.maxAngle,function(t){var e=y[t];return e||(e=y[t]=ko(f,t)),e*d},h,s,g,p,a,1/u])},e.prototype.setTextStyle=function(t,e){var n,i,r;if(t){this.declutterGroup_=e;var o=t.getFill();o?((i=this.textFillState_)||(i=this.textFillState_={}),i.fillStyle=No(o.getColor()||go)):i=this.textFillState_=null;var s=t.getStroke();if(s){(r=this.textStrokeState_)||(r=this.textStrokeState_={});var a=s.getLineDash(),l=s.getLineDashOffset(),u=s.getWidth(),c=s.getMiterLimit();r.lineCap=s.getLineCap()||"round",r.lineDash=a?a.slice():yo,r.lineDashOffset=void 0===l?0:l,r.lineJoin=s.getLineJoin()||"round",r.lineWidth=void 0===u?1:u,r.miterLimit=void 0===c?10:c,r.strokeStyle=No(s.getColor()||vo)}else r=this.textStrokeState_=null;n=this.textState_;var h=t.getFont()||"10px sans-serif";Eo(h);var p=t.getScale();n.overflow=t.getOverflow(),n.font=h,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||"middle",n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||mo,n.scale=void 0===p?1:p;var d=t.getOffsetX(),g=t.getOffsetY(),y=t.getRotateWithView(),v=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0===v?0:v,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:f(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+f(i.fillStyle):""}else this.text_=""},e}(bs)},ks=function(t){function e(e,n,i,r,o,s,a){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=n,this.overlaps_=o,this.pixelRatio_=r,this.resolution_=i,this.renderBuffer_=a,this.replaysByZIndex_={},this.hitDetectionContext_=$i(1,1),this.hitDetectionTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=[1/0,1/0,-1/0,-1/0]).push(1)),e},e.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var n=this.replaysByZIndex_[e],i=0,r=t.length;i<r;++i)if(t[i]in n)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var n in e)e[n].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,o,s){var a,l=2*(i=Math.round(i))+1,u=He(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),c=this.hitDetectionContext_;c.canvas.width!==l||c.canvas.height!==l?(c.canvas.width=l,c.canvas.height=l):c.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(z(a=[1/0,1/0,-1/0,-1/0],t),I(a,e*(this.renderBuffer_+i),a));var h,p,f=function(t){if(void 0!==Os[t])return Os[t];for(var e=2*t+1,n=new Array(e),i=0;i<e;i++)n[i]=new Array(e);var r=t,o=0,s=0;for(;r>=o;)Is(n,t+r,t+o),Is(n,t+o,t+r),Is(n,t-o,t+r),Is(n,t-r,t+o),Is(n,t-r,t-o),Is(n,t-o,t-r),Is(n,t+o,t-r),Is(n,t+r,t-o),2*((s+=1+2*++o)-r)+1>0&&(s+=1-2*(r-=1));return Os[t]=n,n}(i);function d(t){for(var e=c.getImageData(0,0,l,l).data,n=0;n<l;n++)for(var i=0;i<l;i++)if(f[n][i]&&e[4*(i*l+n)+3]>0){var r=void 0;return(!h||p!=ls.IMAGE&&p!=ls.TEXT||-1!==h.indexOf(t))&&(r=o(t)),r||void c.clearRect(0,0,l,l)}}this.declutterTree_&&(h=this.declutterTree_.all().map(function(t){return t.value}));var g,y,v,m,_,x=Object.keys(this.replaysByZIndex_).map(Number);for(x.sort(me),g=x.length-1;g>=0;--g){var b=x[g].toString();for(v=this.replaysByZIndex_[b],y=vs.length-1;y>=0;--y)if(void 0!==(m=v[p=vs[y]]))if(!s||p!=ls.IMAGE&&p!=ls.TEXT){if(_=m.replayHitDetection(c,u,n,r,d,a))return _}else{var w=s[b];w?w.push(m,u.slice(0)):s[b]=[m,u.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,n=e[0],i=e[1],r=e[2],o=e[3],s=[n,i,n,o,r,o,r,i];return Ne(s,0,8,2,t,s),s},e.prototype.getReplay=function(t,e){var n=void 0!==t?t.toString():"0",i=this.replaysByZIndex_[n];void 0===i&&(i={},this.replaysByZIndex_[n]=i);var r=i[e];void 0===r&&(r=new(0,Rs[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),i[e]=r);return r},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return Ct(this.replaysByZIndex_)},e.prototype.replay=function(t,e,n,i,r,o,s){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(me),t.save(),this.clip(t,e);var l,u,c,h,p,f,d=o||vs;for(l=0,u=a.length;l<u;++l){var g=a[l].toString();for(p=this.replaysByZIndex_[g],c=0,h=d.length;c<h;++c){var y=d[c];if(f=p[y],void 0!==f)if(!s||y!=ls.IMAGE&&y!=ls.TEXT)f.replay(t,e,n,i,r);else{var v=s[g];v?v.push(f,e.slice(0)):s[g]=[f,e.slice(0)]}}}t.restore()},e}(as),Os={0:[[!0]]};function Is(t,e,n){var i,r=Math.floor(t.length/2);if(e>=r)for(i=r;i<e;i++)t[i][n]=!0;else if(e<r)for(i=e+1;i<r;i++)t[i][n]=!0}var As=ks,Ls=.5,Ms={Point:function(t,e,n,i){var r=n.getImage();if(r){if(r.getImageState()!=lo.LOADED)return;var o=t.getReplay(n.getZIndex(),ls.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawPoint(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),ls.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,i)}},LineString:function(t,e,n,i){var r=n.getStroke();if(r){var o=t.getReplay(n.getZIndex(),ls.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawLineString(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),ls.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,i)}},Polygon:function(t,e,n,i){var r=n.getFill(),o=n.getStroke();if(r||o){var s=t.getReplay(n.getZIndex(),ls.POLYGON);s.setFillStrokeStyle(r,o),s.drawPolygon(e,i)}var a=n.getText();if(a){var l=t.getReplay(n.getZIndex(),ls.TEXT);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,i)}},MultiPoint:function(t,e,n,i){var r=n.getImage();if(r){if(r.getImageState()!=lo.LOADED)return;var o=t.getReplay(n.getZIndex(),ls.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawMultiPoint(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),ls.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,i)}},MultiLineString:function(t,e,n,i){var r=n.getStroke();if(r){var o=t.getReplay(n.getZIndex(),ls.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,i)}var s=n.getText();if(s){var a=t.getReplay(n.getZIndex(),ls.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,i)}},MultiPolygon:function(t,e,n,i){var r=n.getFill(),o=n.getStroke();if(o||r){var s=t.getReplay(n.getZIndex(),ls.POLYGON);s.setFillStrokeStyle(r,o),s.drawMultiPolygon(e,i)}var a=n.getText();if(a){var l=t.getReplay(n.getZIndex(),ls.TEXT);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,i)}},GeometryCollection:function(t,e,n,i){var r,o,s=e.getGeometriesArray();for(r=0,o=s.length;r<o;++r){var a=Ms[s[r].getType()];a(t,s[r],n,i)}},Circle:function(t,e,n,i){var r=n.getFill(),o=n.getStroke();if(r||o){var s=t.getReplay(n.getZIndex(),ls.CIRCLE);s.setFillStrokeStyle(r,o),s.drawCircle(e,i)}var a=n.getText();if(a){var l=t.getReplay(n.getZIndex(),ls.TEXT);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,i)}}};function Ps(t,e){return parseInt(f(t),10)-parseInt(f(e),10)}function Fs(t,e){var n=Ds(t,e);return n*n}function Ds(t,e){return Ls*t/e}function js(t,e,n,i,r,o){var s=!1,a=n.getImage();if(a){var l=a.getImageState();l==lo.LOADED||l==lo.ERROR?a.unlistenImageChange(r,o):(l==lo.IDLE&&a.load(),l=a.getImageState(),a.listenImageChange(r,o),s=!0)}return function(t,e,n,i){var r=n.getGeometryFunction()(e);if(!r)return;var o=r.getSimplifiedGeometry(i);if(n.getRenderer())!function t(e,n,i,r){if(n.getType()==T.GEOMETRY_COLLECTION){for(var o=n.getGeometries(),s=0,a=o.length;s<a;++s)t(e,o[s],i,r);return}var l=e.getReplay(i.getZIndex(),ls.DEFAULT);l.drawCustom(n,r,i.getRenderer())}(t,o,n,e);else{var s=Ms[o.getType()];s(t,o,n,e)}}(t,e,n,i),s}var Ns=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?os()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=$i(),Zt(_o,Jt.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){$t(_o,Jt.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,n){var i=e.extent,r=e.pixelRatio,o=n.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,l=s.rotation,u=a.getExtent(),c=this.getLayer().getSource(),h=this.getTransform(e,0),p=n.extent,f=void 0!==p;f&&this.clip(t,e,p);var d=this.replayGroup_;if(d&&!d.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var g,y=this.getLayer(),v=0,m=0,_=1!==n.opacity,x=y.hasListener(Xi);if(_||x){var b=t.canvas.width,w=t.canvas.height;if(l){var E=Math.round(Math.sqrt(b*b+w*w));v=(E-b)/2,m=(E-w)/2,b=w=E}this.context.canvas.width=b,this.context.canvas.height=w,g=this.context}else g=t;var T=g.globalAlpha;_||(g.globalAlpha=n.opacity),g!=t&&g.translate(v,m);var S=e.viewHints,C=!(S[Se]||S[Ce]),R=e.size[0]*r,k=e.size[1]*r;if(Oo(g,-l,R/2,k/2),d.replay(g,h,l,o,C),c.getWrapX()&&a.canWrapX()&&!P(u,i)){for(var O,I=i[0],A=nt(u),L=0;I<u[0];)O=A*--L,h=this.getTransform(e,O),d.replay(g,h,l,o,C),I+=A;for(L=0,I=i[2];I>u[2];)O=A*++L,h=this.getTransform(e,O),d.replay(g,h,l,o,C),I-=A}if(Oo(g,l,R/2,k/2),x&&this.dispatchRenderEvent(g,e,h),g!=t){if(_){var M=t.globalAlpha;t.globalAlpha=n.opacity,t.drawImage(g.canvas,-v,-m),t.globalAlpha=M}else t.drawImage(g.canvas,-v,-m);g.translate(-v,-m)}_||(g.globalAlpha=T)}f&&t.restore()},e.prototype.composeFrame=function(t,e,n){var i=this.getTransform(t,0);this.preCompose(n,t,i),this.compose(n,t,e),this.postCompose(n,t,e,i)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){if(this.replayGroup_){var o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,n,{},function(t){var e=f(t);if(!(e in l))return l[e]=!0,i.call(r,t,a)},null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var n=this.getLayer(),i=n.getSource(),r=t.viewHints[Se],o=t.viewHints[Ce],s=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(!this.dirty_&&!s&&r||!a&&o)return!0;var l=t.extent,u=t.viewState,c=u.projection,h=u.resolution,p=t.pixelRatio,f=n.getRevision(),d=n.getRenderBuffer(),g=n.getRenderOrder();void 0===g&&(g=Ps);var y=I(l,d*h),v=u.projection.getExtent();if(i.getWrapX()&&u.projection.canWrapX()&&!P(v,t.extent)){var m=nt(v),_=Math.max(nt(y)/2,m);y[0]=v[0]-_,y[2]=v[2]+_}if(!this.dirty_&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==g&&P(this.renderedExtent_,y))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var x=new As(Ds(h,p),y,h,p,i.getOverlaps(),this.declutterTree_,n.getRenderBuffer());i.loadFeatures(y,h,c);var b=function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,h)),e){var r=this.renderFeature(t,h,p,e,x);this.dirty_=this.dirty_||r}}.bind(this);if(g){var w=[];i.forEachFeatureInExtent(y,function(t){w.push(t)}),w.sort(g);for(var E=0,T=w.length;E<T;++E)b(w[E])}else i.forEachFeatureInExtent(y,b);return x.finish(),this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.replayGroup_=x,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,i,r){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=0,a=i.length;s<a;++s)o=js(r,t,i[s],Fs(e,n),this.handleStyleImageChange_,this)||o;else o=js(r,t,i,Fs(e,n),this.handleStyleImageChange_,this);return o},e}(Vo);Ns.handles=function(t){return t.getType()===co.VECTOR},Ns.create=function(t,e){return new Ns(e)};var Gs=Ns,Bs={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},Us={image:[ls.POLYGON,ls.CIRCLE,ls.LINE_STRING,ls.IMAGE,ls.TEXT],hybrid:[ls.POLYGON,ls.LINE_STRING]},zs={image:[ls.DEFAULT],hybrid:[ls.IMAGE,ls.TEXT,ls.DEFAULT],vector:vs},Ys=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?os()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=[1,0,0,1,0,0];var n=e.getRenderMode();this.zDirection=n===Bs.VECTOR?1:0,n!==Bs.VECTOR&&(this.context=$i()),Zt(_o,Jt.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){$t(_o,Jt.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,n,i,r,o){var s=t.prototype.getTile.call(this,e,n,i,r,o);return s.getState()===Hi.LOADED&&(this.createReplayGroup_(s,r,o),this.context&&this.renderTileImage_(s,r,o)),s},e.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},e.prototype.prepareFrame=function(e,n){var i=this.getLayer().getRevision();return this.renderedLayerRevision_!=i&&(this.renderedTiles.length=0),this.renderedLayerRevision_=i,t.prototype.prepareFrame.call(this,e,n)},e.prototype.createReplayGroup_=function(t,e,n){var i=this,r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=t.getReplayState(r);if(a.dirty||a.renderedRevision!=o||a.renderedRenderOrder!=s){for(var l=r.getSource(),u=l.getTileGrid(),c=l.getTileGridForProjection(n).getResolution(t.tileCoord[0]),h=t.extent,p=function(o,p){var f=t.getTile(t.tileKeys[o]);if(f.getState()==Hi.LOADED){var d=f.tileCoord,g=u.getTileCoordExtent(d),y=Q(h,g),v=B(g,y)?null:I(y,r.getRenderBuffer()*c,i.tmpExtent),m=f.getProjection(),_=!1;Bt(n,m)||(_=!0,f.setProjection(n)),a.dirty=!1;var x=new As(0,y,c,e,l.getOverlaps(),i.declutterTree_,r.getRenderBuffer()),b=Fs(c,e),w=function(t){var e,n=t.getStyleFunction()||r.getStyleFunction();if(n&&(e=n(t,c)),e){var i=this.renderFeature(t,b,e,x);this.dirty_=this.dirty_||i,a.dirty=a.dirty||i}},E=f.getFeatures();s&&s!==a.renderedRenderOrder&&E.sort(s);for(var T=0,S=E.length;T<S;++T){var C=E[T];_&&(m.getUnits()==at.TILE_PIXELS&&(m.setWorldExtent(g),m.setExtent(f.getExtent())),C.getGeometry().transform(m,n)),v&&!it(v,C.getGeometry().getExtent())||w.call(i,C)}x.finish(),f.setReplayGroup(r,t.tileCoord.toString(),x)}},f=0,d=t.tileKeys.length;f<d;++f)p(f);a.renderedRevision=o,a.renderedRenderOrder=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){var o=e.viewState.resolution,s=e.viewState.rotation;n=null==n?0:n;var a,l,u,c,h=this.getLayer(),p={},d=this.renderedTiles;for(u=0,c=d.length;u<c;++u){var g=d[u];if(M(a=I(g.extent,n*o,a),t))for(var y=0,v=g.tileKeys.length;y<v;++y){var m=g.getTile(g.tileKeys[y]);if(m.getState()==Hi.LOADED){var _=m.getReplayGroup(h,g.tileCoord.toString());l=l||_.forEachFeatureAtCoordinate(t,o,s,n,{},function(t){var e=f(t);if(!(e in p))return p[e]=!0,i.call(r,t,h)},null)}}}return l},e.prototype.getReplayTransform_=function(t,e){var n=this.getLayer().getSource().getTileGrid(),i=t.tileCoord,r=n.getResolution(i[0]),o=e.viewState,s=e.pixelRatio,a=o.resolution/s,l=n.getTileCoordExtent(i,this.tmpExtent),u=o.center,c=tt(l),h=e.size,p=Math.round(s*h[0]/2),f=Math.round(s*h[1]/2);return He(this.tmpTransform_,p,f,r/a,r/a,o.rotation,(c[0]-u[0])/r,(u[1]-c[1])/r)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,n,i){var r=this.getLayer(),o=r.getRenderMode();if(o!=Bs.IMAGE){var s,a,l=r.getDeclutter()?{}:null,u=r.getSource(),c=zs[o],h=n.pixelRatio,p=n.viewState.rotation,f=n.size;p&&Oo(e,-p,s=Math.round(h*f[0]/2),a=Math.round(h*f[1]/2)),l&&this.declutterTree_.clear();for(var d=n.viewHints,g=!(d[Se]||d[Ce]),y=this.renderedTiles,v=u.getTileGridForProjection(n.viewState.projection),m=[],_=[],x=y.length-1;x>=0;--x){var b=y[x];if(b.getState()!=Hi.ABORT)for(var w=b.tileCoord,E=v.getTileCoordExtent(w,this.tmpExtent)[0]-b.extent[0],T=void 0,S=0,C=b.tileKeys.length;S<C;++S){var R=b.getTile(b.tileKeys[S]);if(R.getState()==Hi.LOADED){var k=R.getReplayGroup(r,w.toString());if(k&&k.hasReplays(c)){T||(T=this.getTransform(n,E));var O=R.tileCoord[0],I=k.getClipCoords(T);e.save(),e.globalAlpha=i.opacity;for(var A=0,L=m.length;A<L;++A){var M=m[A];O<_[A]&&(e.beginPath(),e.moveTo(I[0],I[1]),e.lineTo(I[2],I[3]),e.lineTo(I[4],I[5]),e.lineTo(I[6],I[7]),e.moveTo(M[6],M[7]),e.lineTo(M[4],M[5]),e.lineTo(M[2],M[3]),e.lineTo(M[0],M[1]),e.clip())}k.replay(e,T,p,{},g,c,l),e.restore(),m.push(I),_.push(O)}}}}l&&function(t,e,n,i){for(var r=Object.keys(t).map(Number).sort(me),o={},s=0,a=r.length;s<a;++s)for(var l=t[r[s].toString()],u=0,c=l.length;u<c;){var h=l[u++],p=l[u++];h.replay(e,p,n,o,i)}}(l,e,p,g),p&&Oo(e,p,s,a)}t.prototype.postCompose.call(this,e,n,i)},e.prototype.renderFeature=function(t,e,n,i){if(!n)return!1;var r=!1;if(Array.isArray(n))for(var o=0,s=n.length;o<s;++o)r=js(i,t,n[o],e,this.handleStyleImageChange_,this)||r;else r=js(i,t,n,e,this.handleStyleImageChange_,this);return r},e.prototype.renderTileImage_=function(t,e,n){var i=this.getLayer(),r=t.getReplayState(i),o=i.getRevision(),s=Us[i.getRenderMode()];if(s&&r.renderedTileRevision!==o){r.renderedTileRevision=o;var a=t.wrappedTileCoord,l=a[0],u=i.getSource(),c=u.getTileGridForProjection(n),h=c.getResolution(l),p=t.getContext(i),f=u.getTilePixelSize(l,e,n);p.canvas.width=f[0],p.canvas.height=f[1];for(var d=c.getTileCoordExtent(a,this.tmpExtent),g=0,y=t.tileKeys.length;g<y;++g){var v=t.getTile(t.tileKeys[g]);if(v.getState()==Hi.LOADED){var m=e/h,_=Be(this.tmpTransform_);Xe(_,m,-m),Ke(_,-d[0],-d[3]),v.getReplayGroup(i,t.tileCoord.toString()).replay(p,_,0,{},!0,s)}}}},e}(is);Ys.handles=function(t){return t.getType()===co.VECTOR_TILE},Ys.create=function(t,e){return new Ys(e)};var Ws=Ys,Xs=function(t){function e(e){(e=Et({},e)).controls||(e.controls=function(t){var e=t||{},n=new Dn;return(void 0===e.zoom||e.zoom)&&n.push(new xr(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new _r(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new vr(e.attributionOptions)),n}()),e.interactions||(e.interactions=so()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new Zo(this);return t.registerLayerRenderers([Jo,is,Gs,Ws]),t},e}(or),Ks="preload",Hs="useInterimTilesOnError",Zs=function(t){function e(e){var n=e||{},i=Et({},n);delete i.preload,delete i.useInterimTilesOnError,t.call(this,i),this.setPreload(void 0!==n.preload?n.preload:0),this.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),this.type=co.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(Ks)},e.prototype.setPreload=function(t){this.set(Ks,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Hs)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Hs,t)},e}(gr);Zs.prototype.getSource;var Vs=Zs,$s=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};$s.prototype.clone=function(){return new $s({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},$s.prototype.getOpacity=function(){return this.opacity_},$s.prototype.getRotateWithView=function(){return this.rotateWithView_},$s.prototype.getRotation=function(){return this.rotation_},$s.prototype.getScale=function(){return this.scale_},$s.prototype.getSnapToPixel=function(){return!1},$s.prototype.getAnchor=function(){return h()},$s.prototype.getImage=function(t){return h()},$s.prototype.getHitDetectionImage=function(t){return h()},$s.prototype.getImageState=function(){return h()},$s.prototype.getImageSize=function(){return h()},$s.prototype.getHitDetectionImageSize=function(){return h()},$s.prototype.getOrigin=function(){return h()},$s.prototype.getSize=function(){return h()},$s.prototype.setOpacity=function(t){this.opacity_=t},$s.prototype.setRotateWithView=function(t){this.rotateWithView_=t},$s.prototype.setRotation=function(t){this.rotation_=t},$s.prototype.setScale=function(t){this.scale_=t},$s.prototype.setSnapToPixel=function(t){},$s.prototype.listenImageChange=function(t,e){return h()},$s.prototype.load=function(){h()},$s.prototype.unlistenImageChange=function(t,e){h()};var qs=$s,Js=function(t){function e(e){var n=e||{};t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,atlasManager:n.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(function(t){function e(e){var n=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return lo.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,n,i="",r="",o=0,s=null,a=0,l=0;this.stroke_&&(null===(n=this.stroke_.getColor())&&(n=vo),n=No(n),void 0===(l=this.stroke_.getWidth())&&(l=1),s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),Xn||(s=null,a=0),void 0===(r=this.stroke_.getLineJoin())&&(r="round"),void 0===(i=this.stroke_.getLineCap())&&(i="round"),void 0===(o=this.stroke_.getMiterLimit())&&(o=10));var u=2*(this.radius_+l)+1,c={strokeStyle:n,strokeWidth:l,size:u,lineCap:i,lineDash:s,lineDashOffset:a,lineJoin:r,miterLimit:o};if(void 0===t){var h=$i(u,u);this.canvas_=h.canvas,e=u=this.canvas_.width,this.draw_(c,h,0,0),this.createHitDetectionCanvas_(c)}else{u=Math.round(u);var p,f=!this.fill_;f&&(p=this.drawHitDetectionCanvas_.bind(this,c));var d=this.getChecksum(),g=t.add(d,u,u,this.draw_.bind(this,c),p);this.canvas_=g.image,this.origin_=[g.offsetX,g.offsetY],e=g.image.width,f?(this.hitDetectionCanvas_=g.hitImage,this.hitDetectionImageSize_=[g.hitImage.width,g.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[u/2,u/2],this.size_=[u,u],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,n,i){var r,o,s;e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();var a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(a*=2),r=0;r<=a;r++)o=2*r*Math.PI/a-Math.PI/2+this.angle_,s=r%2==0?this.radius_:l,e.lineTo(t.size/2+s*Math.cos(o),t.size/2+s*Math.sin(o))}if(this.fill_){var u=this.fill_.getColor();null===u&&(u=go),e.fillStyle=No(u),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=$i(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,n,i){e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o,s,a,l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(r*=2),o=0;o<=r;o++)a=2*o*Math.PI/r-Math.PI/2+this.angle_,s=o%2==0?this.radius_:l,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}e.fillStyle=Po(go),e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var n="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[n,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(qs)),Qs=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};Qs.prototype.clone=function(){var t=this.getColor();return new Qs({color:Array.isArray(t)?t.slice():t||void 0})},Qs.prototype.getColor=function(){return this.color_},Qs.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Qs.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;t?Array.isArray(t)||"string"==typeof t?this.checksum_="f"+Po(t):this.checksum_=f(this.color_):this.checksum_="f-"}return this.checksum_};var ta=Qs,ea=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};ea.prototype.clone=function(){var t=this.getColor();return new ea({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},ea.prototype.getColor=function(){return this.color_},ea.prototype.getLineCap=function(){return this.lineCap_},ea.prototype.getLineDash=function(){return this.lineDash_},ea.prototype.getLineDashOffset=function(){return this.lineDashOffset_},ea.prototype.getLineJoin=function(){return this.lineJoin_},ea.prototype.getMiterLimit=function(){return this.miterLimit_},ea.prototype.getWidth=function(){return this.width_},ea.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},ea.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},ea.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},ea.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},ea.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},ea.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},ea.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},ea.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=f(this.color_):this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var na=ea,ia=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=sa,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};ia.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new ia({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},ia.prototype.getRenderer=function(){return this.renderer_},ia.prototype.setRenderer=function(t){this.renderer_=t},ia.prototype.getGeometry=function(){return this.geometry_},ia.prototype.getGeometryFunction=function(){return this.geometryFunction_},ia.prototype.getFill=function(){return this.fill_},ia.prototype.setFill=function(t){this.fill_=t},ia.prototype.getImage=function(){return this.image_},ia.prototype.setImage=function(t){this.image_=t},ia.prototype.getStroke=function(){return this.stroke_},ia.prototype.setStroke=function(t){this.stroke_=t},ia.prototype.getText=function(){return this.text_},ia.prototype.setText=function(t){this.text_=t},ia.prototype.getZIndex=function(){return this.zIndex_},ia.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=sa,this.geometry_=t},ia.prototype.setZIndex=function(t){this.zIndex_=t};var ra=null;function oa(t,e){if(!ra){var n=new ta({color:"rgba(255,255,255,0.4)"}),i=new na({color:"#3399CC",width:1.25});ra=[new ia({image:new Js({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return ra}function sa(t){return t.getGeometry()}var aa=ia,la="renderOrder",ua=function(t){function e(e){var n=e||{},i=Et({},n);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,t.call(this,i),this.declutter_=void 0!==n.declutter&&n.declutter,this.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(n.style),this.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,this.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,this.renderMode_=n.renderMode||ho.VECTOR,this.type=co.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(la)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(la,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:oa,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var n;Array.isArray(t)?n=t:(y("function"==typeof t.getZIndex,41),n=[t]),e=function(){return n}}return e}(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(gr);ua.prototype.getSource;var ca=ua,ha={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};function pa(t,e){return function(t,e,n,i){return function(r,o,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(r,o,s):t,!0),e.getType()==ha.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var r,o=e.getType();o==ha.JSON||o==ha.TEXT?r=a.responseText:o==ha.XML?(r=a.responseXML)||(r=(new DOMParser).parseFromString(a.responseText,"application/xml")):o==ha.ARRAY_BUFFER&&(r=a.response),r?n.call(this,e.readFeatures(r,{featureProjection:s}),e.readProjection(r),e.getLastExtent()):i.call(this)}else i.call(this)}.bind(this),a.onerror=function(){i.call(this)}.bind(this),a.send()}}(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},re)}function fa(t,e){return[[-1/0,-1/0,1/0,1/0]]}function da(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var ga=function(t){function e(e){t.call(this),this.projection_=Ft(e.projection),this.attributions_=da(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:er.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return h()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=da(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(fe),ya="addfeature",va="changefeature",ma="clear",_a="removefeature",xa=function(t){this.rbush_=os()(t,void 0),this.items_={}};xa.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[f(e)]=n},xa.prototype.load=function(t,e){for(var n=new Array(e.length),i=0,r=e.length;i<r;i++){var o=t[i],s=e[i],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};n[i]=a,this.items_[f(s)]=a}this.rbush_.load(n)},xa.prototype.remove=function(t){var e=f(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},xa.prototype.update=function(t,e){var n=this.items_[f(e)];B([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))},xa.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},xa.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},xa.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},xa.prototype.forEachInExtent=function(t,e,n){return this.forEach_(this.getInExtent(t),e,n)},xa.prototype.forEach_=function(t,e,n){for(var i,r=0,o=t.length;r<o;r++)if(i=e.call(n,t[r]))return i;return i},xa.prototype.isEmpty=function(){return Ct(this.items_)},xa.prototype.clear=function(){this.rbush_.clear(),this.items_={}},xa.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return N(e.minX,e.minY,e.maxX,e.maxY,t)},xa.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]};var ba=xa,wa=function(t){function e(e,n){t.call(this,e),this.feature=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ae),Ea=function(t){function e(e){var n=e||{};t.call(this,{attributions:n.attributions,projection:void 0,state:er.READY,wrapX:void 0===n.wrapX||n.wrapX}),this.loader_=re,this.format_=n.format,this.overlaps_=null==n.overlaps||n.overlaps,this.url_=n.url,void 0!==n.loader?this.loader_=n.loader:void 0!==this.url_&&(y(this.format_,7),this.loader_=pa(this.url_,this.format_)),this.strategy_=void 0!==n.strategy?n.strategy:fa;var i,r,o=void 0===n.useSpatialIndex||n.useSpatialIndex;this.featuresRtree_=o?new ba:null,this.loadedExtentsRtree_=new ba,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(n.features)?r=n.features:n.features&&(r=(i=n.features).getArray()),o||void 0!==i||(i=new Dn(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==i&&this.bindFeaturesCollection_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=f(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new wa(ya,t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Zt(e,Jt.CHANGE,this.handleFeatureChange_,this),Zt(e,Qt,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var n=!0,i=e.getId();return void 0!==i?i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e:(y(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],i=[],r=0,o=t.length;r<o;r++){var s=t[r],a=f(s);this.addToIndex_(a,s)&&n.push(s)}for(var l=0,u=n.length;l<u;l++){var c=n[l],h=f(c);this.setupChangeEvents_(h,c);var p=c.getGeometry();if(p){var d=p.getExtent();e.push(d),i.push(c)}else this.nullGeometryFeatures_[h]=c}this.featuresRtree_&&this.featuresRtree_.load(e,i);for(var g=0,y=n.length;g<y;g++)this.dispatchEvent(new wa(ya,n[g]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;Zt(this,ya,function(n){e||(e=!0,t.push(n.feature),e=!1)}),Zt(this,_a,function(n){e||(e=!0,t.remove(n.feature),e=!1)}),Zt(t,Mn.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Zt(t,Mn.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(qt)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var i=new wa(ma);this.dispatchEvent(i),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(n){if(n.getGeometry().intersectsExtent(t)){var i=e(n);if(i)return i}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Ct(this.nullGeometryFeatures_)||be(t,St(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],i=t[1],r=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],l=e||ne;return this.featuresRtree_.forEachInExtent(a,function(t){if(l(t)){var e=t.getGeometry(),u=s;if((s=e.closestPointXY(n,i,o,s))<u){r=t;var c=Math.sqrt(s);a[0]=n-c,a[1]=i-c,a[2]=n+c,a[3]=i+c}}}),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,n=f(e),i=e.getGeometry();if(i){var r=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var o=e.getId();if(void 0!==o){var s=o.toString();n in this.undefIdIndex_?(delete this.undefIdIndex_[n],this.idIndex_[s]=e):this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else n in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[n]=e);this.changed(),this.dispatchEvent(new wa(va,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:f(t)in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Ct(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,n){var i=this,r=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var s=function(t,s){var a=o[t];r.forEachInExtent(a,function(t){return P(t.extent,a)})||(i.loader_.call(i,a,e,n),r.insert(a,{extent:a.slice()}),i.loading=i.loader_!==re)},a=0,l=o.length;a<l;++a)s(a)},e.prototype.removeLoadedExtent=function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,function(n){if(B(n.extent,t))return e=n,!0}),e&&n.remove(e)},e.prototype.removeFeature=function(t){var e=f(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=f(t);this.featureChangeKeys_[e].forEach(qt),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new wa(_a,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(ga),Ta={FRACTION:"fraction",PIXELS:"pixels"},Sa=function(t){function e(e,n,i,r,o,s){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==r&&(this.image_.crossOrigin=r),this.canvas_=s?document.createElement("canvas"):null,this.color_=s,this.imageListenerKeys_=null,this.imageState_=o,this.size_=i,this.src_=n,this.tainted_}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===lo.LOADED){this.tainted_=!1;var t=$i(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Jt.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=lo.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=lo.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],n=this.size_[1],i=$i(e,n);i.fillRect(0,0,e,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==lo.IDLE){this.imageState_=lo.LOADING,this.imageListenerKeys_=[Vt(this.image_,Jt.ERROR,this.handleImageError_,this),Vt(this.image_,Jt.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),n=e.data,i=this.color_[0]/255,r=this.color_[1]/255,o=this.color_[2]/255,s=0,a=n.length;s<a;s+=4)n[s]*=i,n[s+1]*=r,n[s+2]*=o;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(qt),this.imageListenerKeys_=null},e}(le);var Ca={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Ra=function(t){function e(e){var n=e||{},i=void 0!==n.opacity?n.opacity:1,r=void 0!==n.rotation?n.rotation:0,o=void 0!==n.scale?n.scale:1,s=void 0!==n.rotateWithView&&n.rotateWithView;t.call(this,{opacity:i,rotation:r,scale:o,rotateWithView:s}),this.anchor_=void 0!==n.anchor?n.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:Ca.TOP_LEFT,this.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:Ta.FRACTION,this.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:Ta.FRACTION,this.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var a=void 0!==n.img?n.img:null,l=void 0!==n.imgSize?n.imgSize:null,u=n.src;y(!(void 0!==u&&a),4),y(!a||a&&l,5),void 0!==u&&0!==u.length||!a||(u=a.src||f(a)),y(void 0!==u&&u.length>0,6);var c,h=void 0!==n.src?lo.IDLE:lo.LOADED;this.color_=void 0!==n.color?(c=n.color,Array.isArray(c)?c:Fo(c)):null,this.iconImage_=function(t,e,n,i,r,o){var s=Wo.get(e,i,o);return s||(s=new Sa(t,e,n,i,r,o),Wo.set(e,i,o,s)),s}(a,u,l,this.crossOrigin_,h,this.color_),this.offset_=void 0!==n.offset?n.offset:[0,0],this.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:Ca.TOP_LEFT,this.origin_=null,this.size_=void 0!==n.size?n.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==Ta.FRACTION||this.anchorYUnits_==Ta.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==Ta.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==Ta.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=Ca.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Ca.TOP_RIGHT&&this.anchorOrigin_!=Ca.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Ca.BOTTOM_LEFT&&this.anchorOrigin_!=Ca.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=Ca.TOP_LEFT){var e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),this.offsetOrigin_!=Ca.TOP_RIGHT&&this.offsetOrigin_!=Ca.BOTTOM_RIGHT||(t[0]=n[0]-e[0]-t[0]),this.offsetOrigin_!=Ca.BOTTOM_LEFT&&this.offsetOrigin_!=Ca.BOTTOM_RIGHT||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return Zt(this.iconImage_,Jt.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){$t(this.iconImage_,Jt.CHANGE,t,e)},e}(qs),ka=function(t){function e(e,n,i){t.call(this);var r=i||{};this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=void 0===r.transition?250:r.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(Jt.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==Hi.LOADED)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==Hi.LOADED){t.interimTile=null;break}t.getState()==Hi.LOADING?e=t:t.getState()==Hi.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var i=e-n+1e3/60;return i>=this.transition_?1:Me(i/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(le);function Oa(){var t=$i(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Ia=function(t){function e(e,n,i,r,o,s){t.call(this,e,n,s),this.crossOrigin_=r,this.src_=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.tileLoadFunction_=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==Hi.LOADING&&(this.unlistenImage_(),this.image_=Oa()),this.interimTile&&this.interimTile.dispose(),this.state=Hi.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=Hi.ERROR,this.unlistenImage_(),this.image_=Oa(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Hi.LOADED:this.state=Hi.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Hi.ERROR&&(this.state=Hi.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Hi.IDLE&&(this.state=Hi.LOADING,this.changed(),this.imageListenerKeys_=[Vt(this.image_,Jt.ERROR,this.handleImageError_,this),Vt(this.image_,Jt.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(qt),this.imageListenerKeys_=null},e}(ka);function Aa(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function La(t,e,n){return t+"/"+e+"/"+n}function Ma(t){return La(t[0],t[1],t[2])}var Pa=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),n=e.tileCoord[0].toString();if(n in t&&t[n].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Ma(e.tileCoord)),e.dispose())},this)}},e}(fo);function Fa(t,e,n,i){var r=n-t,o=i-e,s=Math.sqrt(r*r+o*o);return[Math.round(n+r/s),Math.round(i+o/s)]}function Da(t,e,n,i,r,o,s,a,l,u,c){var h=$i(Math.round(n*t),Math.round(n*e));if(0===l.length)return h.canvas;h.scale(n,n);var p=[1/0,1/0,-1/0,-1/0];l.forEach(function(t,e,n){U(p,t.extent)});var f=nt(p),d=J(p),g=$i(Math.round(n*f/i),Math.round(n*d/i)),y=n/i;l.forEach(function(t,e,n){var i=t.extent[0]-p[0],r=-(t.extent[3]-p[3]),o=nt(t.extent),s=J(t.extent);g.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,i*y,r*y,o*y,s*y)});var v=tt(s);return a.getTriangles().forEach(function(t,e,r){var s=t.source,a=t.target,l=s[0][0],u=s[0][1],c=s[1][0],f=s[1][1],d=s[2][0],y=s[2][1],m=(a[0][0]-v[0])/o,_=-(a[0][1]-v[1])/o,x=(a[1][0]-v[0])/o,b=-(a[1][1]-v[1])/o,w=(a[2][0]-v[0])/o,E=-(a[2][1]-v[1])/o,T=l,S=u;l=0,u=0;var C=function(t){for(var e=t.length,n=0;n<e;n++){for(var i=n,r=Math.abs(t[n][n]),o=n+1;o<e;o++){var s=Math.abs(t[o][n]);s>r&&(r=s,i=o)}if(0===r)return null;var a=t[i];t[i]=t[n],t[n]=a;for(var l=n+1;l<e;l++)for(var u=-t[l][n]/t[n][n],c=n;c<e+1;c++)n==c?t[l][c]=0:t[l][c]+=u*t[n][c]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*h[p]}return h}([[c-=T,f-=S,0,0,x-m],[d-=T,y-=S,0,0,w-m],[0,0,c,f,b-_],[0,0,d,y,E-_]]);if(C){h.save(),h.beginPath();var R=(m+x+w)/3,k=(_+b+E)/3,O=Fa(R,k,m,_),I=Fa(R,k,x,b),A=Fa(R,k,w,E);h.moveTo(I[0],I[1]),h.lineTo(O[0],O[1]),h.lineTo(A[0],A[1]),h.clip(),h.transform(C[0],C[2],C[1],C[3],m,_),h.translate(p[0]-T,p[3]-S),h.scale(i/n,-i/n),h.drawImage(g.canvas,0,0),h.restore()}}),c&&(h.save(),h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach(function(t,e,n){var i=t.target,r=(i[0][0]-v[0])/o,s=-(i[0][1]-v[1])/o,a=(i[1][0]-v[0])/o,l=-(i[1][1]-v[1])/o,u=(i[2][0]-v[0])/o,c=-(i[2][1]-v[1])/o;h.beginPath(),h.moveTo(a,l),h.lineTo(r,s),h.lineTo(u,c),h.closePath(),h.stroke()}),h.restore()),h.canvas}var ja=function(t,e,n,i,r){this.sourceProj_=t,this.targetProj_=e;var o={},s=zt(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=s(t)),o[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&nt(i)==nt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?nt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?nt(this.targetProj_.getExtent()):null;var a=tt(n),l=et(n),u=Z(n),c=H(n),h=this.transformInv_(a),p=this.transformInv_(l),f=this.transformInv_(u),d=this.transformInv_(c);if(this.addQuad_(a,l,u,c,h,p,f,d,10),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach(function(t,e,n){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-g>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-g>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-g>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}};ja.prototype.addTriangle_=function(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})},ja.prototype.addQuad_=function(t,e,n,i,r,o,s,a,l){var u=O([r,o,s,a]),c=this.sourceWorldWidth_?nt(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1,f=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)f=nt(O([t,e,n,i]))/this.targetWorldWidth_>.25||f;!p&&this.sourceProj_.isGlobal()&&c&&(f=c>.25||f)}if(f||!this.maxSourceExtent_||it(u,this.maxSourceExtent_)){if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(l>0))return;f=!0}if(l>0){if(!f){var d,g=[(t[0]+n[0])/2,(t[1]+n[1])/2],y=this.transformInv_(g);if(p)d=(w(r[0],h)+w(s[0],h))/2-w(y[0],h);else d=(r[0]+s[0])/2-y[0];var v=(r[1]+s[1])/2-y[1];f=d*d+v*v>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var m=[(e[0]+n[0])/2,(e[1]+n[1])/2],_=this.transformInv_(m),x=[(i[0]+t[0])/2,(i[1]+t[1])/2],b=this.transformInv_(x);this.addQuad_(t,e,m,x,r,o,_,b,l-1),this.addQuad_(x,m,n,i,b,_,s,a,l-1)}else{var E=[(t[0]+e[0])/2,(t[1]+e[1])/2],T=this.transformInv_(E),S=[(n[0]+i[0])/2,(n[1]+i[1])/2],C=this.transformInv_(S);this.addQuad_(t,E,S,i,r,T,C,a,l-1),this.addQuad_(E,e,n,S,T,o,s,C,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,n,i,r,s,a),this.addTriangle_(t,e,n,r,o,s)}},ja.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,n,i){var r=e.source;z(t,r[0]),z(t,r[1]),z(t,r[2])}),t},ja.prototype.getTriangles=function(){return this.triangles_};var Na=ja,Ga=function(t){function e(e,n,i,r,o,s,a,l,u,c,h){t.call(this,o,Hi.IDLE),this.renderEdges_=void 0!==h&&h,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var p=r.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent(),d=this.sourceTileGrid_.getExtent(),g=f?Q(p,f):p;if(0!==K(g)){var y=e.getExtent();y&&(d=d?Q(d,y):y);var m=r.getResolution(this.wrappedTileCoord_[0]),_=function(t,e,n,i){var r=Yt(n,e,t),o=Dt(e,i,n),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var l=t.getExtent();if(!l||M(l,r)){var u=Dt(t,o,r)/o;isFinite(u)&&u>0&&(o/=u)}return o}(e,i,V(g),m);if(!isFinite(_)||_<=0)this.state=Hi.EMPTY;else{var x=void 0!==c?c:ao;if(this.triangulation_=new Na(e,i,g,d,_*x),0!==this.triangulation_.getTriangles().length){this.sourceZ_=n.getZForResolution(_);var b=this.triangulation_.calculateSourceExtent();if(d&&(e.canWrapX()?(b[1]=v(b[1],d[1],d[3]),b[3]=v(b[3],d[1],d[3])):b=Q(b,d)),K(b)){for(var w=n.getTileRangeForExtentAndZ(b,this.sourceZ_),E=w.minX;E<=w.maxX;E++)for(var T=w.minY;T<=w.maxY;T++){var S=u(this.sourceZ_,E,T,a);S&&this.sourceTiles_.push(S)}0===this.sourceTiles_.length&&(this.state=Hi.EMPTY)}else this.state=Hi.EMPTY}else this.state=Hi.EMPTY}}else this.state=Hi.EMPTY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==Hi.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,i){e&&e.getState()==Hi.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=Hi.ERROR;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Da(i,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=Hi.LOADED}this.changed()},e.prototype.load=function(){if(this.state==Hi.IDLE){this.state=Hi.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,i){var r=e.getState();if(r==Hi.IDLE||r==Hi.LOADING){t++;var o=Zt(e,Jt.CHANGE,function(n){var i=e.getState();i!=Hi.LOADED&&i!=Hi.ERROR&&i!=Hi.EMPTY||(qt(o),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,n){t.getState()==Hi.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(qt),this.sourcesListenerKeys_=null},e}(ka);function Ba(t,e){var n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(s,a,l){return s?t.replace(n,s[0].toString()).replace(i,s[1].toString()).replace(r,function(){return(-s[2]-1).toString()}).replace(o,function(){var t=s[0],n=e.getFullTileRange(t);return y(n,55),(n.getHeight()+s[2]).toString()}):void 0}}function Ua(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=Ba(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,n,i){if(e){var r=function(t){return(t[1]<<t[0])+t[2]}(e),o=w(r,t.length);return t[o](e,n,i)}}}(i)}function za(t,e,n){}var Ya=[0,0,0],Wa=function(t){var e,n,i,r;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,y((e=this.resolutions_,n=!0,i=function(t,e){return e-t}||me,e.every(function(t,r){if(0===r)return!0;var o=i(e[r-1],t);return!(o>0||n&&0===o)})),17),!t.origins)for(var o=0,s=this.resolutions_.length-1;o<s;++o)if(r){if(this.resolutions_[o]/this.resolutions_[o+1]!==r){r=void 0;break}}else r=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,y(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=tt(a)),y(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,y(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:ye,y(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new es(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):a&&this.calculateTileRanges_(a)};Wa.prototype.forEachTileCoord=function(t,e,n){for(var i=this.getTileRangeForExtentAndZ(t,e),r=i.minX,o=i.maxX;r<=o;++r)for(var s=i.minY,a=i.maxY;s<=a;++s)n([e,r,s])},Wa.prototype.forEachTileCoordParentTileRange=function(t,e,n,i,r){var o,s,a,l=null,u=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(o=2===this.zoomFactor_?ts(s=Math.floor(s/2),s,a=Math.floor(a/2),a,i):this.getTileRangeForExtentAndZ(l,u,i),e.call(n,u,o))return!0;--u}return!1},Wa.prototype.getExtent=function(){return this.extent_},Wa.prototype.getMaxZoom=function(){return this.maxZoom},Wa.prototype.getMinZoom=function(){return this.minZoom},Wa.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},Wa.prototype.getResolution=function(t){return this.resolutions_[t]},Wa.prototype.getResolutions=function(){return this.resolutions_},Wa.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],r=2*t[2];return ts(i,i+1,r,r+1,e)}var o=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},Wa.prototype.getTileRangeExtent=function(t,e,n){var i=this.getOrigin(t),r=this.getResolution(t),o=rr(this.getTileSize(t),this.tmpSize_),s=i[0]+e.minX*o[0]*r,a=i[0]+(e.maxX+1)*o[0]*r;return N(s,i[1]+e.minY*o[1]*r,a,i[1]+(e.maxY+1)*o[1]*r,n)},Wa.prototype.getTileRangeForExtentAndZ=function(t,e,n){var i=Ya;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i);var r=i[1],o=i[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,i),ts(r,i[1],o,i[2],n)},Wa.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=rr(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]+(t[2]+.5)*i[1]*n]},Wa.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=rr(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*i,s=n[1]+t[2]*r[1]*i;return N(o,s,o+r[0]*i,s+r[1]*i,e)},Wa.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},Wa.prototype.getTileCoordForXYAndResolution_=function(t,e,n,i,r){var o=this.getZForResolution(n),s=n/this.getResolution(o),a=this.getOrigin(o),l=rr(this.getTileSize(o),this.tmpSize_),u=i?.5:0,c=i?0:.5,h=Math.floor((t-a[0])/n+u),p=Math.floor((e-a[1])/n+c),f=s*h/l[0],d=s*p/l[1];return i?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),Aa(o,f,d,r)},Wa.prototype.getTileCoordForXYAndZ_=function(t,e,n,i,r){var o=this.getOrigin(n),s=this.getResolution(n),a=rr(this.getTileSize(n),this.tmpSize_),l=i?.5:0,u=i?0:.5,c=Math.floor((t-o[0])/s+l),h=Math.floor((e-o[1])/s+u),p=c/a[0],f=h/a[1];return i?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),Aa(n,p,f,r)},Wa.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},Wa.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},Wa.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},Wa.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},Wa.prototype.getZForResolution=function(t,e){return v(_e(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},Wa.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n};var Xa=Wa;function Ka(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return function(t,e,n,i){var r=void 0!==i?i:R.TOP_LEFT,o=Ha(t,e,n);return new Xa({extent:t,origin:$(t,r),resolutions:o,tileSize:n})}(Za(t),e,n,i)}(t),t.setDefaultTileGrid(e)),e}function Ha(t,e,n){for(var i=void 0!==e?e:ge,r=J(t),o=nt(t),s=rr(void 0!==n?n:ye),a=Math.max(o/s[0],r/s[1]),l=i+1,u=new Array(l),c=0;c<l;++c)u[c]=a/Math.pow(2,c);return u}function Za(t){var e=(t=Ft(t)).getExtent();if(!e){var n=180*st[at.DEGREES]/t.getMetersPerUnit();e=N(-n,-n,n,n)}return e}var Va=function(t){function e(e){t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new Pa(e.cacheSize),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,i){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var o,s,a,l=!0,u=n.minX;u<=n.maxX;++u)for(var c=n.minY;c<=n.maxY;++c)s=La(e,u,c),a=!1,r.containsKey(s)&&(a=(o=r.get(s)).getState()===Hi.LOADED)&&(a=!1!==i(o)),a||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,i,r){return h()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Ka(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Bt(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var i,r,o,s=this.getTileGridForProjection(n),a=this.getTilePixelRatio(e),l=rr(s.getTileSize(t),this.tmpSize);return 1==a?l:(i=l,r=a,void 0===(o=this.tmpSize)&&(o=[0,0]),o[0]=i[0]*r+.5|0,o[1]=i[1]*r+.5|0,o)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var i=e[0],r=t.getTileCoordCenter(e),o=Za(n);if(M(o,r))return e;var s=nt(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,t.getTileCoordForCoordAndZ(r,i)}(i,t,n)),function(t,e){var n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o,s=e.getExtent();return!(o=s?e.getTileRangeForExtentAndZ(s,n):e.getFullTileRange(n))||o.containsXY(i,r)}(t,i)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e.prototype.useTile=function(t,e,n,i){},e}(ga),$a=function(t){function e(e,n){t.call(this,e),this.tile=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(ae),qa="tileloadstart",Ja="tileloadend",Qa="tileloaderror";function tl(t,e){t.getImage().src=e}var el='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',nl=function(t){function e(e){var n,i=e||{};n=void 0!==i.attributions?i.attributions:[el];var r=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",o=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:n,cacheSize:i.cacheSize,crossOrigin:r,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:o,wrapX:i.wrapX,attributionsCollapsible:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){var n=e||{},i=void 0!==n.projection?n.projection:"EPSG:3857",r=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||Ft("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Ha(n,e.maxZoom,e.tileSize)};return new Xa(i)}({extent:Za(i),maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:n.opaque,projection:i,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:tl,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:Ia,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var i in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[i];r.expireCache(r==n?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Bt(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Bt(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Bt(e,t)){var n=f(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Ka(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Bt(e,t))return this.tileCache;var n=f(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Pa(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,i,r,o){var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,r),l=a?this.tileUrlFunction(a,i,r):void 0,u=new this.tileClass(s,void 0!==l?Hi.IDLE:Hi.EMPTY,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,Zt(u,Jt.CHANGE,this.handleTileChange,this),u},e.prototype.getTile=function(t,e,n,i,r){var o=this.getProjection();if(o&&r&&!Bt(o,r)){var s,a=this.getTileCacheForProjection(r),l=[t,e,n],u=Ma(l);a.containsKey(u)&&(s=a.get(u));var c=this.getKey();if(s&&s.key==c)return s;var h=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),f=this.getTileCoordForTileUrlFunction(l,r),d=new Ga(o,h,r,p,l,f,this.getTilePixelRatio(i),this.getGutter(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=c,s?(d.interimTile=s,d.refreshInterimChain(),a.replace(u,d)):a.set(u,d),d}return this.getTileInternal(t,e,n,i,o||r)},e.prototype.getTileInternal=function(t,e,n,i,r){var o=null,s=La(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=a){var l=o;o=this.createTile_(t,e,n,i,r,a),l.getState()==Hi.IDLE?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,n,i,r,a),this.tileCache.set(s,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=Ft(t);if(n){var i=f(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=e)}},e}(function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.generateTileUrlFunction_=!e.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(this):za,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,i=f(n),r=n.getState();r==Hi.LOADING?(this.tileLoadingKeys_[i]=!0,e=qa):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],e=r==Hi.ERROR?Qa:r==Hi.LOADED||r==Hi.ABORT?Ja:void 0),null!=e&&this.dispatchEvent(new $a(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var i,r=n[1].charCodeAt(0),o=n[2].charCodeAt(0);for(i=r;i<=o;++i)e.push(t.replace(n[0],String.fromCharCode(i)));return e}if(n=n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}(t);this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Ua(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,n){var i=La(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)},e}(Va)))),il=function(t){function e(){t.call(this,{handleDownEvent:rl,handleDragEvent:ol,handleMoveEvent:sl,handleUpEvent:al}),this.coordinate_=null,this.cursor_="pointer",this.feature_=null,this.previousCursor_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Br);function rl(t){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t){return t});return e&&(this.coordinate_=t.coordinate,this.feature_=e),!!e}function ol(t){var e=t.coordinate[0]-this.coordinate_[0],n=t.coordinate[1]-this.coordinate_[1];this.feature_.getGeometry().translate(e,n),this.coordinate_[0]=t.coordinate[0],this.coordinate_[1]=t.coordinate[1]}function sl(t){if(this.cursor_){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t){return t}),n=t.map.getTargetElement();e?n.style.cursor!=this.cursor_&&(this.previousCursor_=n.style.cursor,n.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(n.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}}function al(){return this.coordinate_=null,this.feature_=null,!1}i.Component.register("moorl-merchant-finder-detail",{template:c.a,inject:["repositoryFactory","context"],mixins:[i.Mixin.getByName("notification"),i.Mixin.getByName("placeholder"),i.Mixin.getByName("discard-detail-page-changes")("merchant")],shortcuts:{"SYSTEMKEY+S":"onSave",ESCAPE:"onAbortButtonClick"},metaInfo(){return{title:this.$createTitle()}},data:()=>({merchant:null,salesChannels:null,countries:null,customerGroups:null,isLoading:!0,processSuccess:!1,repository:null,searchTerm:"",mediaEntity:null,showPicker:!1,showUploadField:!1,suggestedItems:[],isLoadingSuggestions:!1,pickerClasses:{},uploadTag:l.default.createId(),mediaItem:null,customFieldSets:[]}),computed:{mediaStore:()=>i.State.getStore("media"),moorlMerchantRepository(){return this.repositoryFactory.create("moorl_merchant")},customerGroupRepository(){return this.repositoryFactory.create("customer_group")},countryRepository(){return this.repositoryFactory.create("country")},salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},customFieldSetRepository(){return this.repositoryFactory.create("custom_field_set")}},created(){this.repository=this.moorlMerchantRepository,this.initializeFurtherComponents(),this.getMerchant()},methods:{initializeFurtherComponents(){this.salesChannelRepository.search(new r.a(1,100),this.context).then(t=>{this.salesChannels=t}),this.customerGroupRepository.search(new r.a(1,100),this.context).then(t=>{this.customerGroups=t});const t=new r.a(1,100);t.addSorting(r.a.sort("name")),this.countryRepository.search(t,this.context).then(t=>{this.countries=t})},getMerchant(){this.repository.get(this.$route.params.id,this.context).then(t=>{this.merchant=t,this.mediaItem=this.merchant.mediaId?this.mediaStore.getById(this.merchant.mediaId):null,this.isLoading=!1})},drawMap(){if(void 0===this.ol){var t=new aa({image:new Ra({scale:.7,anchor:[.5,1],src:"https://cdn.mapmarker.io/api/v1/fa?size=70&icon=fa-pin&color=%23D33115&"})});this.ol={},this.ol.loc=[this.merchant.locationLon,this.merchant.locationLat],this.ol.pos=Gt(this.ol.loc),this.ol.featureMarker=new de(new gn(this.ol.pos)),this.ol.view=new Ln({center:this.ol.pos,zoom:16}),this.ol.map=new Xs({interactions:so().extend([new il]),target:"embedMap",layers:[new Vs({source:new nl}),new ca({source:new Ea({features:[this.ol.featureMarker]}),style:[t]})],view:this.ol.view})}else console.log(this.ol)},getPositionByAddress(){this.isLoading=!0;const t=i.Application.getContainer("init").httpClient,e=new URLSearchParams({format:"json",zipcode:this.merchant.zipcode,city:this.merchant.city,street:this.merchant.street+" "+this.merchant.streetNumber,country:this.merchant.countryCode});t.get("http://nominatim.openstreetmap.org/search?"+e).then(t=>{console.log(t),this.ol.loc=[parseFloat(t.data[0].lon),parseFloat(t.data[0].lat)],this.ol.pos=Gt(this.ol.loc),this.ol.featureMarker.getGeometry().setCoordinates(this.ol.pos),this.ol.view.animate({center:this.ol.pos,duration:500,zoom:16}),this.isLoading=!1}).catch(t=>{throw console.log(t),this.isLoading=!1,t})},posSelect(){var t,e,n,i;this.ol.loc=(t=this.ol.featureMarker.getGeometry().getCoordinates(),n=Yt(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),((i=n[0])<-180||i>180)&&(n[0]=w(i+180,360)-180),n),console.log("Koordinaten",this.ol.loc),this.merchant.locationLon=this.ol.loc[0],this.merchant.locationLat=this.ol.loc[1]},onClickSave(){this.isLoading=!0,this.repository.save(this.merchant,this.context).then(()=>{this.getMerchant(),this.processSuccess=!0}).catch(t=>{this.isLoading=!1,this.createNotificationError({title:this.$t("moorl-merchant-finder.detail.errorTitle"),message:t})})},saveFinish(){this.processSuccess=!1},setMediaItem({targetId:t}){this.merchant.mediaId=t,this.mediaStore.getByIdAsync(t)},onDropMedia(t){this.setMediaItem({targetId:t.id})},setMediaFromSidebar(t){this.merchant.mediaId=t.id},onUnlinkLogo(){this.merchant.mediaId=null},openMediaSidebar(){this.$refs.mediaSidebarItem.openContent()}}}),i.Component.extend("moorl-merchant-finder-create","moorl-merchant-finder-detail",{methods:{getMerchant(){this.merchant=this.repository.create(this.context),this.isLoading=!1},onClickSave(){this.isLoading=!0,this.repository.save(this.merchant,this.context).then(()=>{this.isLoading=!1,this.$router.push({name:"moorl.merchant.finder.detail",params:{id:this.merchant.id}})}).catch(t=>{this.isLoading=!1,this.createNotificationError({title:this.$t("moorl-merchant-finder.detail.errorTitle"),message:t})})}}});var ll=n(961),ul=n(962);n(2334);i.Module.register("moorl-merchant-finder",{type:"plugin",name:"MerchantFinder",title:"moorl-merchant-finder.general.mainMenuItemGeneral",description:"sw-property.general.descriptionTextModule",color:"#ff3d58",icon:"default-object-globe",snippets:{"de-DE":ll,"en-GB":ul},routes:{list:{component:"moorl-merchant-finder-list",path:"list"},detail:{component:"moorl-merchant-finder-detail",path:"detail/:id",meta:{parentPath:"moorl.merchant.finder.list"}},create:{component:"moorl-merchant-finder-create",path:"create",meta:{parentPath:"moorl.merchant.finder.list"}}},navigation:[{label:"moorl-merchant-finder.general.mainMenuItemGeneral",color:"#ff3d58",path:"moorl.merchant.finder.list",icon:"default-object-globe",position:40}]});var cl=n(963),hl=n.n(cl);n(2336);i.Component.register("sw-cms-el-merchant-finder",{template:hl.a,mixins:[i.Mixin.getByName("cms-element")],computed:{styles(){return{"min-height":0!==this.element.config.minHeight.value?this.element.config.minHeight.value:"340px"}}},watch:{cmsPageState:{deep:!0,handler(){this.$forceUpdate()}}},created(){this.createdComponent()},methods:{createdComponent(){this.initElementConfig("merchant-finder")}}});var pl=n(964),fl=n.n(pl);n(2338);i.Component.register("sw-cms-el-config-merchant-finder",{template:fl.a,mixins:[i.Mixin.getByName("cms-element")],data:()=>({}),computed:{},created(){this.createdComponent()},methods:{createdComponent(){this.initElementConfig("merchant-finder")}}});var dl=n(965),gl=n.n(dl);n(2340);i.Component.register("sw-cms-el-preview-merchant-finder",{template:gl.a}),i.Application.getContainer("service").cmsService.registerCmsElement({name:"merchant-finder",label:"Merchant Finder",component:"sw-cms-el-merchant-finder",configComponent:"sw-cms-el-config-merchant-finder",previewComponent:"sw-cms-el-preview-merchant-finder",defaultConfig:{title:{source:"static",value:""},titleCss:{source:"static",value:"text-center"},minHeight:{source:"static",value:"60vh"}}});var yl=n(966),vl=n.n(yl);n(2342);i.Component.register("sw-cms-block-merchant-finder",{template:vl.a});var ml=n(967),_l=n.n(ml);n(2344);i.Component.register("sw-cms-preview-merchant-finder",{template:_l.a});const{Application:xl}=Shopware;xl.getContainer("service").cmsService.registerCmsBlock({name:"merchant-finder",label:"Merchant Finder",category:"text-image",component:"sw-cms-block-merchant-finder",previewComponent:"sw-cms-preview-merchant-finder",defaultConfig:{marginBottom:"20px",marginTop:"20px",marginLeft:"20px",marginRight:"20px",sizingMode:"boxed"},slots:{merchantFinder:"merchant-finder"}})},236:function(t,e,n){var i=n(237),r=n(38),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=r(t))&&t.replace(o,i).replace(s,"")}},237:function(t,e,n){var i=n(238)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n",ſ:"s"});t.exports=i},238:function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},239:function(t,e,n){var i=n(240),r=n(241),o=n(38),s=n(242);t.exports=function(t,e,n){return t=o(t),void 0===(e=n?void 0:e)?r(t)?s(t):i(t):t.match(e)||[]}},24:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},240:function(t,e){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(n)||[]}},241:function(t,e){var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return n.test(t)}},242:function(t,e){var n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+n+"]",r="\\d+",o="[\\u2700-\\u27bf]",s="[a-z\\xdf-\\xf6\\xf8-\\xff]",a="[^\\ud800-\\udfff"+n+r+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",c="[A-Z\\xc0-\\xd6\\xd8-\\xde]",h="(?:"+s+"|"+a+")",p="(?:"+c+"|"+a+")",f="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",d="[\\ufe0e\\ufe0f]?"+f+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",l,u].join("|")+")[\\ufe0e\\ufe0f]?"+f+")*"),g="(?:"+[o,l,u].join("|")+")"+d,y=RegExp([c+"?"+s+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[i,c,"$"].join("|")+")",p+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[i,c+h,"$"].join("|")+")",c+"?"+h+"+(?:['’](?:d|ll|m|re|s|t|ve))?",c+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",r,g].join("|"),"g");t.exports=function(t){return t.match(y)||[]}},243:function(t,e,n){"use strict";n.r(e);var i=n(2);e.default={getPathByCombination:function(t){if(!r.has(t))return!1;return r.get(t)},getShortcutRegistry:function(){return r},register:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t||!t.length)return Object(i.a)("ShortcutFactory","A combination can't be blank."),!1;if(r.has(t))return Object(i.a)("ShortcutFactory",'The combination "'.concat(t,'" is registered already.')),!1;return r.set(t,e),t}};var r=new Map},244:function(t,e,n){"use strict";n.r(e);var i=n(41),r=n.n(i),o=n(2);e.default={getRegistry:function(){return s},register:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t||!t.length)return Object(o.a)(a,"A apiService always needs a name"),!1;if(l(t))return Object(o.a)(a,'The apiService "'.concat(t,'" is already registered. Please select a unique name for your apiService.')),!1;return s.set(t,e),!0},getByName:function(t){return s.get(t)},getServices:function(){return Array.from(s).reduce(function(t,e){var n=r()(e,2),i=n[0],o=n[1];return t[i]=o,t},{})},has:l};var s=new Map,a="ApiServiceFactory";function l(t){return s.has(t)}},245:function(t,e){t.exports=function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}},246:function(t,e,n){"use strict";n.r(e);var i=n(7),r=n.n(i),o=n(42),s=n(6),a=n(4);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}e.default={getRegistry:p,register:function(t,e){if(!t||!t.length)return!1;if(u.has(t))return!1;if(!f(e))return!1;return u.set(t,e),!0},remove:function(t){if(!t||!t.length)return!1;if(!u.has(t))return!1;return u.delete(t),!0},override:function(t,e){if(!u.has(t))return!1;if(!f(e))return!1;return u.set(t,e),!0},initialize:function(){if(h)return c;return h=!0,p().forEach(function(t){var e=t.fn,n=t.name;c.use(function(t,e){return function(n,i){var o=i.queue.find(function(e){return e.name===t})||null,s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach(function(e){r()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},i,{},{entry:o,name:t});null===o?n():e.call(null,n,s)}}(n,e))}),c},resetHelper:function(){return c=new o.a,h=!1,!0}};var u=new Map,c=new o.a,h=!1;function p(){return u}function f(t){return Object(s.e)(t,"name")&&t.name.length>0&&Object(s.e)(t,"fn")&&a.a.isFunction(t.fn)}},247:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return h});var i=n(41),r=n.n(i),o=n(8),s=n.n(o),a=n(9),l=n.n(a),u=n(7),c=n.n(u),h=function(){function t(){s()(this,t)}return l()(t,null,[{key:"init",value:function(t){var e=this;Object.entries(t).forEach(function(t){var n=r()(t,2),i=n[0],o=n[1];e.flags[i]=o})}},{key:"getAll",value:function(){return this.flags}},{key:"isActive",value:function(t){if(!this.flags.hasOwnProperty(t))throw new Error("Unable to retrieve flag ".concat(t,", not registered"));return this.flags[t]}}]),t}();c()(h,"flags",{})},248:function(t,e,n){"use strict";n.r(e);var i=n(8),r=n.n(i),o=n(9),s=n.n(o),a=function(){function t(e){r()(this,t);var n=function(){};this.$container=e,this.view=null,this.$container.service("service",n),this.$container.service("init",n),this.$container.service("factory",n)}return s()(t,[{key:"getContainer",value:function(t){return-1!==this.$container.list().indexOf(t)?this.$container.container[t]:this.$container.container}},{key:"addFactory",value:function(t,e){return this.$container.factory("factory.".concat(t),e.bind(this)),this}},{key:"addFactoryMiddleware",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._addMiddleware("factory",e)}},{key:"addFactoryDecorator",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._addDecorator("factory",e)}},{key:"addInitializer",value:function(t,e){return this.$container.factory("init.".concat(t),e.bind(this)),this}},{key:"addServiceProvider",value:function(t,e){return this.$container.factory("service.".concat(t),e.bind(this)),this}},{key:"registerContext",value:function(t){return this.addInitializer("context",function(){return t})}},{key:"addInitializerMiddleware",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._addMiddleware("init",e)}},{key:"addServiceProviderMiddleware",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._addMiddleware("service",e)}},{key:"_addMiddleware",value:function(t,e){var n=e.length>1?"".concat(t,".").concat(e[0]):t,i=e.length>1?e[1]:e[0];return this.$container.middleware(n,i),this}},{key:"initializeFeatureFlags",value:function(){var t=this.getContainer("init").context.features;return Shopware.FeatureConfig.init(t),this}},{key:"addInitializerDecorator",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._addDecorator("init",e)}},{key:"addServiceProviderDecorator",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._addDecorator("service",e)}},{key:"_addDecorator",value:function(t,e){var n=e.length>1?"".concat(t,".").concat(e[0]):t,i=e.length>1?e[1]:e[0];return this.$container.decorator(n,i),this}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.registerContext(t).initializeFeatureFlags().createApplicationRoot()}},{key:"getApplicationRoot",value:function(){return!!this.view.root&&this.view.root}},{key:"setViewAdapter",value:function(t){this.view=t}},{key:"createApplicationRoot",value:function(){var t=this,e=this.getContainer("init");return this.instantiateInitializers(e).then(function(){var n=e.router.getRouterInstance();return"testing"===e.contextService.environment?t:(t.view.init("#app",n,t.getContainer("service")),e.context.firstRunWizard&&!n.history.current.name.startsWith("sw.first.run.wizard.")&&n.push({name:"sw.first.run.wizard.index"}),t)}).catch(function(n){var i=e.router.getRouterInstance();t.view.init("#app",i,t.getContainer("service")),t.view.root.initError=n,i.push({name:"error"})})}},{key:"instantiateInitializers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init",n=t.$list().map(function(t){return"".concat(e,".").concat(t)});this.$container.digest(n);var i=[];return Object.keys(t).forEach(function(e){var n=t[e];n&&"Promise"===n.constructor.name&&i.push(n)}),Promise.all(i)}}]),t}();e.default=a},25:function(t,e,n){"use strict";n.d(e,"a",function(){return p}),n.d(e,"b",function(){return f}),n.d(e,"d",function(){return d}),n.d(e,"c",function(){return g});var i=n(7),r=n.n(i),o=n(106),s=n.n(o),a=n(4);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach(function(e){r()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var c,h;function p(t,e,n){var i=u({style:"currency",currency:e||"EUR"},void 0!==n?{minimumFractionDigits:n,maximumFractionDigits:n}:{}),r="de-DE";return"USD"===i.currency&&(r="en-US"),t.toLocaleString(r,i)}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Date(t);if(isNaN(n))return"";var i=Shopware.Application.getContainer("factory").locale.getLastKnownLocale();return e=u({},{day:"2-digit",month:"2-digit",year:"2-digit"},{},e),a.a.isEqual(h,e)||(h=e,c=new Intl.DateTimeFormat(i,h)),c.format(n)}function d(t){return s.a.hash(t)}function g(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"de-DE",n=["B","KB","MB","GB"],i=Number.parseInt(t,10),r=0;r<n.length;r+=1){var o=i/1024;if(o<.9)break;i=o}return i.toFixed(2).toLocaleString(e)+n[r]}},250:function(t,e,n){"use strict";n.r(e);var i=n(8),r=n.n(i),o=n(9),s=n.n(o),a=["uuid","int","text","password","float","string","blob","boolean","date"],l=["json_list","json_object"];var u=function(){function t(e){var n=e.entity,i=e.properties;r()(this,t),this.entity=n,this.properties=i}return s()(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getPrimaryKeyFields",value:function(){return this.filterProperties(function(t){return!0===t.flags.primary_key})}},{key:"getAssociationFields",value:function(){return this.filterProperties(function(t){return"association"===t.type})}},{key:"getToManyAssociations",value:function(){return this.filterProperties(function(t){return"association"===t.type&&["one_to_many","many_to_many"].includes(t.relation)})}},{key:"getToOneAssociations",value:function(){return this.filterProperties(function(t){return"association"===t.type&&["one_to_one","many_to_one"].includes(t.relation)})}},{key:"getTranslatableFields",value:function(){var t=this;return this.filterProperties(function(e){return t.isTranslatableField(e)})}},{key:"getRequiredFields",value:function(){return this.filterProperties(function(t){return!0===t.flags.required})}},{key:"filterProperties",value:function(t){var e=this;if("function"!=typeof t)return{};var n={};return Object.keys(this.properties).forEach(function(i){!0===t(e.properties[i])&&(n[i]=e.properties[i])}),n}},{key:"getField",value:function(t){return this.properties[t]}},{key:"forEachField",value:function(t){var e=this;"function"==typeof t&&Object.keys(this.properties).forEach(function(n){t(e.properties[n],n,e.properties)})}},{key:"isScalarField",value:function(t){return a.includes(t.type)}},{key:"isJsonField",value:function(t){return l.includes(t.type)}},{key:"isToManyAssociation",value:function(t){return"association"===t.type&&["one_to_many","many_to_many"].includes(t.relation)}},{key:"isToOneAssociation",value:function(t){return"association"===t.type&&["many_to_one","one_to_one"].includes(t.relation)}},{key:"isTranslatableField",value:function(t){return"string"===t.type&&!0===t.flags.translatable}}]),t}(),c=(e.default={getScalarTypes:function(){return a},getJsonTypes:function(){return l},getDefinitionRegistry:function(){return c},get:h,add:function(t,e){c.set(t,new u(e))},remove:function(t){return c.delete(t)},getTranslatedFields:function(t){return h(t).getTranslatableFields()},getAssociationFields:function(t){return h(t).getAssociationFields()},getRequiredFields:function(t){return h(t).getRequiredFields()}},new Map);function h(t){var e=c.get(t);if(void 0===e)throw new Error("[EntityDefinitionRegistry] No definition found for entity type ".concat(t));return e}},256:function(t,e,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function c(t,e,n,i){var r,o,s,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=u(t))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return t}function h(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}.bind(i);return r.listener=n,i.wrapFn=r,r}function p(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):d(r,r.length)}function f(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[t];if(void 0===l)return!1;if("function"==typeof l)o(l,this,e);else{var u=l.length,c=d(l,u);for(n=0;n<u;++n)o(c[n],this,e)}return!0},a.prototype.addListener=function(t,e){return c(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return c(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,h(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,h(this,t,e)),this},a.prototype.removeListener=function(t,e){var n,i,r,o,s;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},259:function(t,e,n){"use strict";var i=n(272),r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=n(267);o.inherits=n(262);var s=n(299),a=n(284);o.inherits(h,s);for(var l=r(a.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),i.nextTick(e,t)}},26:function(t,e,n){var i=n(17).Symbol;t.exports=i},262:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},265:function(t,e,n){"use strict";t.exports=r,t.exports.default=r;var i=n(2333);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],l(r,t.leaf?i(o):o);return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,r,o){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,i(t,s,e,n,o),a.push(e,s,s,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!d(t,e))return n;for(var r,o,s,a,l=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],d(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):f(t,a)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!d(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],d(t,s=e.leaf?n(o):o)){if(e.leaf||f(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,s,a=this.data,l=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),i=u[u.length-1],n=c.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),u.push(a),this._condense(u),this;s||a.leaf||!f(a,l)?i?(n++,a=i.children[n],s=!1):a=null:(u.push(a),c.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return s(r=g(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=g([])).leaf=!1,r.height=i;var l,u,c,h,p=Math.ceil(o/a),f=p*Math.ceil(Math.sqrt(a));for(y(t,e,n,f,this.compareMinX),l=e;l<=n;l+=f)for(y(t,l,c=Math.min(l+f-1,n),p,this.compareMinY),u=l;u<=c;u+=p)h=Math.min(u+p-1,c),r.children.push(this._build(t,u,h,i-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,l,u,c,p,f,d;i.push(e),!e.leaf&&i.length-1!==n;){for(c=p=1/0,r=0,o=e.children.length;r<o;r++)l=h(s=e.children[r]),f=t,d=s,(u=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-l)<p?(p=u,c=l<c?l:c,a=s):u===p&&l<c&&(c=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),l(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=g(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,l,u,c,p,f,d,g,y,v,m;for(u=c=1/0,i=e;i<=n-e;i++)r=a(t,0,i,this.toBBox),o=a(t,i,n,this.toBBox),f=r,d=o,g=void 0,y=void 0,v=void 0,m=void 0,g=Math.max(f.minX,d.minX),y=Math.max(f.minY,d.minY),v=Math.min(f.maxX,d.maxX),m=Math.min(f.maxY,d.maxY),s=Math.max(0,v-g)*Math.max(0,m-y),l=h(r)+h(o),s<u?(u=s,p=i,c=l<c?l:c):s===u&&l<c&&(c=l,p=i);return p},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,u=a(t,0,e,s),c=a(t,n-e,n,s),h=p(u)+p(c);for(r=e;r<n-e;r++)o=t.children[r],l(u,t.leaf?s(o):o),h+=p(u);for(r=n-e-1;r>=e;r--)o=t.children[r],l(c,t.leaf?s(o):o),h+=p(c);return h},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)l(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},267:function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(302).Buffer)},271:function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(282),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(24))},272:function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,i)});case 4:return e.nextTick(function(){t.call(null,n,i,r)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(this,n(108))},273:function(t,e,n){var i=n(302),r=i.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,e),e.Buffer=s),o(r,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},282:function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o,s,a,l=1,u={},c=!1,h=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},i=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,i=function(t){var e=h.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(e){t.postMessage(s+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return u[l]=r,i(l),l++},p.clearImmediate=f}function f(t){delete u[t]}function d(t){if(c)setTimeout(d,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{f(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(24),n(108))},283:function(t,e,n){(e=t.exports=n(299)).Stream=e,e.Readable=e,e.Writable=n(284),e.Duplex=n(259),e.Transform=n(305),e.PassThrough=n(2328)},284:function(t,e,n){"use strict";(function(e,i,r){var o=n(272);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var i=t.entry;t.entry=null;for(;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=m;var a,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?i:o.nextTick;m.WritableState=v;var u=n(267);u.inherits=n(262);var c={deprecate:n(2327)},h=n(301),p=n(273).Buffer,f=r.Uint8Array||function(){};var d,g=n(303);function y(){}function v(t,e){a=a||n(259),t=t||{};var i=e instanceof a;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,u=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(u||0===u)?u:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,r=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,r){--e.pendingcb,n?(o.nextTick(r,i),o.nextTick(T,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(r(i),t._writableState.errorEmitted=!0,t.emit("error",i),T(t,e))}(t,n,i,e,r);else{var s=w(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||b(t,n),i?l(x,t,n,s,r):x(t,n,s,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function m(t){if(a=a||n(259),!(d.call(m,this)||this instanceof a))return new m(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function _(t,e,n,i,r,o,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function x(t,e,n,i){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),T(t,e)}function b(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var a=0,l=!0;n;)r[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;r.allBuffers=l,_(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,h=n.callback;if(_(t,e,!1,e.objectMode?1:u.length,u,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function E(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),T(t,e)})}function T(t,e){var n=w(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(E,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}u.inherits(m,h),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===m&&(t&&t._writableState instanceof v)}})):d=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,n){var i,r=this._writableState,s=!1,a=!r.objectMode&&(i=t,p.isBuffer(i)||i instanceof f);return a&&!p.isBuffer(t)&&(t=function(t){return p.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=y),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(a||function(t,e,n,i){var r=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(i,s),r=!1),r}(this,r,t,n))&&(r.pendingcb++,s=function(t,e,n,i,r,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=p.from(e,n));return e}(e,i,r);i!==s&&(n=!0,r="buffer",i=s)}var a=e.objectMode?1:i.length;e.length+=a;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,a,i,r,o);return l}(this,r,a,t,e,n)),s},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||b(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,n){e.ending=!0,T(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,i,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=g.destroy,m.prototype._undestroy=g.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(108),n(271).setImmediate,n(24))},29:function(t,e,n){"use strict";var i=n(68),r=n.n(i),o=n(107),s=n.n(o);e.a={capitalizeString:r.a,camelCase:s.a,isEmptyOrSpaces:function(t){return!t||t.length<=0||t.trim().length<=0}}},299:function(t,e,n){"use strict";(function(e,i){var r=n(272);t.exports=_;var o,s=n(300);_.ReadableState=m;n(256).EventEmitter;var a=function(t,e){return t.listeners(e).length},l=n(301),u=n(273).Buffer,c=e.Uint8Array||function(){};var h=n(267);h.inherits=n(262);var p=n(2324),f=void 0;f=p&&p.debuglog?p.debuglog("stream"):function(){};var d,g=n(2325),y=n(303);h.inherits(_,l);var v=["error","close","destroy","pause","resume"];function m(t,e){t=t||{};var i=e instanceof(o=o||n(259));this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(304).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||n(259),!(this instanceof _))return new _(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function x(t,e,n,i,r){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,T(t)}(t,s)):(r||(o=function(t,e){var n;i=e,u.isBuffer(i)||i instanceof c||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var i;return n}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=function(t){return u.from(t)}(e)),i?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):b(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?b(t,s,e,!1):C(t,s)):b(t,s,e,!1))):i||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function b(t,e,n,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&T(t)),C(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=u.from(t,e),e=""),n=!0),x(this,t,e,!1,n)},_.prototype.unshift=function(t){return x(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return d||(d=n(304).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var w=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=w?t=w:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function T(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r.nextTick(S,t):S(t))}function S(t){f("emit readable"),t.emit("readable"),I(t)}function C(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(R,t,e))}function R(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function k(t){f("readable nexttick read 0"),t.read(0)}function O(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),I(t),e.flowing&&!e.reading&&t.read(0)}function I(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function A(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var i;t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,i=1,r=n.data;t-=r.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?r+=o:r+=o.slice(0,t),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}(t,e):function(t,e){var n=u.allocUnsafe(t),i=e.head,r=1;i.data.copy(n),t-=i.data.length;for(;i=i.next;){var o=i.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(s));break}++r}return e.length-=r,n}(t,e);return i}(t,e.buffer,e.decoder),n);var n}function L(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r.nextTick(M,e,t))}function M(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function P(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}_.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?L(this):T(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&L(this),null;var i,r=e.needReadable;return f("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",r=!0),e.ended||e.reading?f("reading or ended",r=!1):r&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(n,e))),null===(i=t>0?A(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&L(this)),null!==i&&this.emit("data",i),i},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,e);var l=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr?c:_;function u(e,i){f("onunpipe"),e===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),t.removeListener("close",v),t.removeListener("finish",m),t.removeListener("drain",h),t.removeListener("error",y),t.removeListener("unpipe",u),n.removeListener("end",c),n.removeListener("end",_),n.removeListener("data",g),p=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function c(){f("onend"),t.end()}o.endEmitted?r.nextTick(l):n.once("end",l),t.on("unpipe",u);var h=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,I(t))}}(n);t.on("drain",h);var p=!1;var d=!1;function g(e){f("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==P(o.pipes,t))&&!p&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function y(e){f("onerror",e),_(),t.removeListener("error",y),0===a(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",m),_()}function m(){f("onfinish"),t.removeListener("close",v),_()}function _(){f("unpipe"),n.unpipe(t)}return n.on("data",g),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",y),t.once("close",v),t.once("finish",m),t.emit("pipe",n),o.flowing||(f("pipe resume"),n.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var i=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var s=P(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},_.prototype.on=function(t,e){var n=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&T(this):r.nextTick(k,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(O,t,e))}(this,t)),this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,n=this._readableState,i=!1;for(var r in t.on("end",function(){if(f("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(r){(f("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r)||(n.objectMode||r&&r.length)&&(e.push(r)||(i=!0,t.pause()))}),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var o=0;o<v.length;o++)t.on(v[o],this.emit.bind(this,v[o]));return this._read=function(e){f("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=A}).call(this,n(24),n(108))},3:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(8),r=n.n(i),o=n(9),s=n.n(o),a=n(5),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;r()(this,t),this.page=e,this.limit=n,this.term=null,this.filters=[],this.ids=[],this.queries=[],this.associations=[],this.postFilter=[],this.sortings=[],this.aggregations=[],this.totalCountMode=null}return s()(t,[{key:"parse",value:function(){var t={};return this.ids.length>0&&(t.ids=this.ids.join("|")),null!==this.page&&(t.page=this.page),null!==this.limit&&(t.limit=this.limit),null!==this.term&&(t.term=this.term),this.queries.length>0&&(t.query=this.queries),this.filters.length>0&&(t.filter=this.filters),this.postFilter.length>0&&(t["post-filter"]=this.postFilter),this.sortings.length>0&&(t.sort=this.sortings),this.aggregations.length>0&&(t.aggregations=this.aggregations),this.associations.length>0&&(t.associations={},this.associations.forEach(function(e){t.associations[e.association]=e.criteria.parse()})),null!==this.totalCountMode&&(t["total-count-mode"]=this.totalCountMode),t}},{key:"setIds",value:function(t){this.ids=t}},{key:"setTotalCountMode",value:function(t){a.types.isNumber(t)||(this.totalCountMode=null),this.totalCountMode=t<0||t>2?null:t}},{key:"setPage",value:function(t){return this.page=t,this}},{key:"setLimit",value:function(t){return this.limit=t,this}},{key:"setTerm",value:function(t){return this.term=t,this}},{key:"addFilter",value:function(t){return this.filters.push(t),this}},{key:"addPostFilter",value:function(t){return this.postFilter.push(t),this}},{key:"addSorting",value:function(t){return this.sortings.push(t),this}},{key:"addQuery",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={score:e,query:t};return n&&(i[n]=n),this.queries.push(i),this}},{key:"addAggregation",value:function(t){return this.aggregations.push(t),this}},{key:"addAssociation",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===n&&(n=new t),this.associations.push({association:e,criteria:n}),this}},{key:"addAssociationPath",value:function(t){var e=t.split("."),n=this;return e.forEach(function(t){n.hasAssociation(t)||n.addAssociation(t),n=n.getAssociation(t)}),this}},{key:"addAssociationPaths",value:function(t){var e=this;t.forEach(function(t){e.addAssociationPath(t)})}},{key:"hasAssociation",value:function(t){var e=!1;return this.associations.forEach(function(n){n.association===t&&(e=!0)}),e}},{key:"getAssociation",value:function(e){var n=new t;return this.associations.forEach(function(t){t.association===e&&(n=t.criteria)}),n}},{key:"resetSorting",value:function(){this.sortings=[]}}],[{key:"avg",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"avg",name:t,field:e,groupByFields:n}}},{key:"value",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"value",name:t,field:e,groupByFields:n}}},{key:"count",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"count",name:t,field:e,groupByFields:n}}},{key:"max",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"max",name:t,field:e,groupByFields:n}}},{key:"min",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"min",name:t,field:e,groupByFields:n}}},{key:"stats",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"stats",name:t,field:e,groupByFields:n}}},{key:"sum",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"sum",name:t,field:e,groupByFields:n}}},{key:"valueCount",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:"value_count",name:t,field:e,groupByFields:n}}},{key:"sort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{field:t,order:e,naturalSorting:n}}},{key:"naturalSorting",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC";return{field:t,order:e,naturalSorting:!0}}},{key:"contains",value:function(t,e){return{type:"contains",field:t,value:e}}},{key:"equalsAny",value:function(t,e){return{type:"equalsAny",field:t,value:e.join("|")}}},{key:"range",value:function(t,e){return{type:"range",field:t,parameters:e}}},{key:"equals",value:function(t,e){return{type:"equals",field:t,value:e}}},{key:"not",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:"not",operator:t,queries:e}}},{key:"multi",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:"multi",operator:t,queries:e}}}]),t}()},30:function(t,e,n){var i=n(111);t.exports=function(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}},300:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},301:function(t,e,n){t.exports=n(256).EventEmitter},302:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=n(2322),r=n(2323),o=n(300);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,n)}function u(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=p(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|d(e,n),r=(t=a(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|f(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?a(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=a(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|f(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(i)return U(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function y(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function v(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:m(t,e,n,i,r);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,i,r){var o,s=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var c=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var h=!0,p=0;p<l;p++)if(u(t,o+p)!==u(e,p)){h=!1;break}if(h)return o}return-1}function _(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function x(t,e,n,i){return Y(U(e,t.length-n),t,n,i)}function b(t,e,n,i){return Y(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function w(t,e,n,i){return b(t,e,n,i)}function E(t,e,n,i){return Y(z(e),t,n,i)}function T(t,e,n,i){return Y(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function S(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,l,u=t[r],c=null,h=u>239?4:u>223?3:u>191?2:1;if(r+h<=n)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[r+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(l=(15&u)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}return function(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=R));return n}(i)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,i){return c(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},l.byteLength=d,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):g.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,i,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(i,r),c=t.slice(e,n),h=0;h<a;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function k(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function O(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function I(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=B(t[o]);return r}function A(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,i,r,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function P(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function F(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function D(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,i,o){return o||D(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function N(t,e,n,i,o){return o||D(t,0,n,8),r.write(t,e,n,i,52,8),n+8}l.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;n=new l(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},l.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);M(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);M(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=l.isBuffer(t)?t:U(new l(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(24))},303:function(t,e,n){"use strict";var i=n(272);function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||i.nextTick(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(i.nextTick(r,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},304:function(t,e,n){"use strict";var i=n(273).Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var r=s(e[i]);if(r>=0)return r>0&&(t.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if((r=s(e[i]))>=0)return r>0&&(t.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if((r=s(e[i]))>=0)return r>0&&(2===r?r=0:t.lastNeed=r-3),r;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},305:function(t,e,n){"use strict";t.exports=s;var i=n(259),r=n(267);function o(t,e){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),i(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);i.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){l(t,e,n)}):l(this,null,null)}function l(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=n(262),r.inherits(s,i),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;i.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},31:function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},32:function(t,e,n){var i=n(39),r=n(74);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},33:function(t,e,n){(function(t){var i=n(17),r=n(159),o=e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o?i.Buffer:void 0,l=(a?a.isBuffer:void 0)||r;t.exports=l}).call(this,n(45)(t))},34:function(t,e){t.exports=function(t){return function(e){return t(e)}}},35:function(t,e,n){(function(t){var i=n(76),r=e&&!e.nodeType&&e,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===r&&i.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a}).call(this,n(45)(t))},36:function(t,e,n){var i=n(87),r=n(61);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,l=e.length;++a<l;){var u=e[a],c=o?o(n[u],t[u],u,n,t):void 0;void 0===c&&(c=t[u]),s?r(n,u,c):i(n,u,c)}return n}},37:function(t,e,n){var i=n(183),r=n(59),o=n(184),s=n(185),a=n(186),l=n(16),u=n(77),c=u(i),h=u(r),p=u(o),f=u(s),d=u(a),g=l;(i&&"[object DataView]"!=g(new i(new ArrayBuffer(1)))||r&&"[object Map]"!=g(new r)||o&&"[object Promise]"!=g(o.resolve())||s&&"[object Set]"!=g(new s)||a&&"[object WeakMap]"!=g(new a))&&(g=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,i=n?u(n):"";if(i)switch(i){case c:return"[object DataView]";case h:return"[object Map]";case p:return"[object Promise]";case f:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=g},38:function(t,e,n){var i=n(199);t.exports=function(t){return null==t?"":i(t)}},39:function(t,e,n){var i=n(16),r=n(15),o="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",l="[object Proxy]";t.exports=function(t){if(!r(t))return!1;var e=i(t);return e==s||e==a||e==o||e==l}},4:function(t,e,n){"use strict";n.d(e,"b",function(){return S});var i=n(15),r=n.n(i),o=n(66),s=n.n(o),a=n(96),l=n.n(a),u=n(97),c=n.n(u),h=n(14),p=n.n(h),f=n(39),d=n.n(f),g=n(98),y=n.n(g),v=n(99),m=n.n(v),_=n(100),x=n.n(_),b=n(101),w=n.n(b),E=n(102),T=n.n(E);function S(t){return void 0===t}e.a={isObject:r.a,isPlainObject:s.a,isEmpty:l.a,isRegExp:c.a,isArray:p.a,isFunction:d.a,isDate:y.a,isString:m.a,isBoolean:x.a,isEqual:w.a,isNumber:T.a,isUndefined:S}},40:function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=i=function(t){return n(t)}:t.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},i(e)}t.exports=i},41:function(t,e,n){var i=n(118),r=n(245),o=n(119);t.exports=function(t,e){return i(t)||r(t,e)||o()}},42:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(8),r=n.n(i),o=n(9),s=n.n(o),a=function(){function t(){r()(this,t),this._stack=[]}return s()(t,[{key:"use",value:function(t){if("function"!=typeof t)throw new Error("Middleware must be a function.");return this._stack.push(t),this}},{key:"go",value:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=0,o=function e(){if(!(r>=t.stack.length)){var i=t.stack[r];r+=1,i.apply(null,[e].concat(n))}};o()}},{key:"stack",get:function(){return this._stack}}]),t}()},43:function(t,e,n){"use strict";var i=n(2);e.a={getScrollbarHeight:function(t){return t instanceof HTMLElement?t.offsetHeight-t.clientHeight:(Object(i.a)("DOM Utilities",'The provided element needs to be an instance of "HTMLElement".',t),0)},getScrollbarWidth:function(t){return t instanceof HTMLElement?t.offsetWidth-t.clientWidth:(Object(i.a)("DOM Utilities",'The provided element needs to be an instance of "HTMLElement".',t),0)},copyToClipboard:function(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}}},45:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},46:function(t,e,n){"use strict";function i(t,e,n){t.onerror=function(){t.abort(),n(new DOMException("Problem parsing file."))},t.onload=function(){e(t.result)}}function r(t){var e=t.split(".");return 1===e.length?{extension:"",fileName:t}:2!==e.length||e[0]?{extension:e.pop(),fileName:e.join(".")}:{extension:"",fileName:t}}e.a={readFileAsArrayBuffer:function(t){var e=new FileReader;return new Promise(function(n,r){i(e,n,r),e.readAsArrayBuffer(t)})},readFileAsDataURL:function(t){var e=new FileReader;return new Promise(function(n,r){i(e,n,r),e.readAsDataURL(t)})},readFileAsText:function(t){var e=new FileReader;return new Promise(function(n,r){i(e,n,r),e.readAsText(t)})},getNameAndExtensionFromFile:function(t){return r(t.name)},getNameAndExtensionFromUrl:function(t){var e=t.href.split("/").pop(),n=e.indexOf("?");return n>0&&(e=e.substring(0,n)),r(e)}}},47:function(t,e,n){var i=n(157),r=n(13),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return r(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},48:function(t,e,n){var i=n(125),r=n(126),o=n(127),s=n(128),a=n(129);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},49:function(t,e,n){var i=n(31);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},5:function(t,e,n){"use strict";n.r(e),n.d(e,"object",function(){return b}),n.d(e,"debug",function(){return w}),n.d(e,"format",function(){return E}),n.d(e,"dom",function(){return T}),n.d(e,"string",function(){return S}),n.d(e,"types",function(){return C}),n.d(e,"fileReader",function(){return R}),n.d(e,"sort",function(){return k}),n.d(e,"array",function(){return O});var i=n(103),r=n.n(i),o=n(67),s=n.n(o),a=n(104),l=n.n(a),u=n(30),c=n.n(u),h=n(105),p=n.n(h),f=n(6),d=n(2),g=n(25),y=n(43),v=n(29),m=n(4),_=n(46),x=n(72),b={deepCopyObject:f.b,hasOwnProperty:f.e,getObjectDiff:f.d,getArrayChanges:f.c,merge:f.f},w={warn:d.a},E={currency:g.a,date:g.b,fileSize:g.c},T={getScrollbarHeight:y.a.getScrollbarHeight,getScrollbarWidth:y.a.getScrollbarWidth},S={capitalizeString:v.a.capitalizeString,camelCase:v.a.camelCase,md5:v.a.md5,isEmptyOrSpaces:v.a.isEmptyOrSpaces},C={isObject:m.a.isObject,isPlainObject:m.a.isPlainObject,isEmpty:m.a.isEmpty,isRegExp:m.a.isRegExp,isArray:m.a.isArray,isFunction:m.a.isFunction,isDate:m.a.isDate,isString:m.a.isString,isBoolean:m.a.isBoolean,isNumber:m.a.isNumber,isUndefined:m.b},R={readAsArrayBuffer:_.a.readFileAsArrayBuffer,readAsDataURL:_.a.readFileAsDataURL,readAsText:_.a.readFileAsText},k={afterSort:x.a.afterSort},O={flattenDeep:l.a};e.default={createId:function(){return p()().replace(/-/g,"")},throttle:r.a,debounce:s.a,get:c.a,object:b,debug:w,format:E,dom:T,string:S,types:C,fileReader:R,sort:k,array:O}},50:function(t,e,n){var i=n(22)(Object,"create");t.exports=i},51:function(t,e,n){var i=n(149);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},52:function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},53:function(t,e,n){var i=n(160),r=n(34),o=n(35),s=o&&o.isTypedArray,a=s?r(s):i;t.exports=a},54:function(t,e,n){var i=n(88),r=n(163),o=n(32);t.exports=function(t){return o(t)?i(t,!0):r(t)}},55:function(t,e,n){var i=n(16),r=n(13),o="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||r(t)&&i(t)==o}},56:function(t,e,n){var i=n(48),r=n(130),o=n(131),s=n(132),a=n(133),l=n(134);function u(t){var e=this.__data__=new i(t);this.size=e.size}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=s,u.prototype.has=a,u.prototype.set=l,t.exports=u},57:function(t,e,n){var i=n(88),r=n(89),o=n(32);t.exports=function(t){return o(t)?i(t):r(t)}},59:function(t,e,n){var i=n(22)(n(17),"Map");t.exports=i},6:function(t,e,n){"use strict";n.d(e,"f",function(){return d}),n.d(e,"a",function(){return g}),n.d(e,"e",function(){return y}),n.d(e,"b",function(){return v}),n.d(e,"d",function(){return m}),n.d(e,"c",function(){return _});var i=n(7),r=n.n(i),o=n(69),s=n.n(o),a=n(70),l=n.n(a),u=n(30),c=n.n(u),h=n(4);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(n,!0).forEach(function(e){r()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}s.a,l.a,c.a;var d=s.a,g=l.a;c.a;function y(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.parse(JSON.stringify(t))}function m(t,e){return t===e?{}:h.a.isObject(t)&&h.a.isObject(e)?h.a.isDate(t)||h.a.isDate(e)?t.valueOf()===e.valueOf()?{}:e:Object.keys(e).reduce(function(n,i){if(!y(t,i))return f({},n,r()({},i,e[i]));if(h.a.isArray(e[i])){var o=_(t[i],e[i]);return Object.keys(o).length>0?f({},n,r()({},i,e[i])):n}if(h.a.isObject(e[i])){var s=m(t[i],e[i]);return!h.a.isObject(s)||Object.keys(s).length>0?f({},n,r()({},i,s)):n}return t[i]!==e[i]?f({},n,r()({},i,e[i])):n},{}):e}function _(t,e){if(t===e)return[];if(!h.a.isArray(t)||!h.a.isArray(e))return e;if(t.length<=0&&e.length<=0)return[];if(t.length!==e.length)return e;if(!h.a.isObject(e[0]))return e.filter(function(e){return!t.includes(e)});var n=[];return e.forEach(function(i,r){var o=m(t[r],e[r]);Object.keys(o).length>0&&n.push(e[r])}),n}},60:function(t,e,n){var i=n(141),r=n(148),o=n(150),s=n(151),a=n(152);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},61:function(t,e,n){var i=n(79);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},62:function(t,e,n){var i=n(82);t.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},63:function(t,e,n){var i=n(85)(Object.getPrototypeOf,Object);t.exports=i},64:function(t,e,n){var i=n(180),r=n(90),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),i(s(t),function(e){return o.call(t,e)}))}:r;t.exports=a},65:function(t,e){t.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},66:function(t,e,n){var i=n(16),r=n(63),o=n(13),s="[object Object]",a=Function.prototype,l=Object.prototype,u=a.toString,c=l.hasOwnProperty,h=u.call(Object);t.exports=function(t){if(!o(t)||i(t)!=s)return!1;var e=r(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==h}},67:function(t,e,n){var i=n(15),r=n(222),o=n(223),s="Expected a function",a=Math.max,l=Math.min;t.exports=function(t,e,n){var u,c,h,p,f,d,g=0,y=!1,v=!1,m=!0;if("function"!=typeof t)throw new TypeError(s);function _(e){var n=u,i=c;return u=c=void 0,g=e,p=t.apply(i,n)}function x(t){var n=t-d;return void 0===d||n>=e||n<0||v&&t-g>=h}function b(){var t=r();if(x(t))return w(t);f=setTimeout(b,function(t){var n=e-(t-d);return v?l(n,h-(t-g)):n}(t))}function w(t){return f=void 0,m&&u?_(t):(u=c=void 0,p)}function E(){var t=r(),n=x(t);if(u=arguments,c=this,d=t,n){if(void 0===f)return function(t){return g=t,f=setTimeout(b,e),y?_(t):p}(d);if(v)return clearTimeout(f),f=setTimeout(b,e),_(d)}return void 0===f&&(f=setTimeout(b,e)),p}return e=o(e)||0,i(n)&&(y=!!n.leading,h=(v="maxWait"in n)?a(o(n.maxWait)||0,e):h,m="trailing"in n?!!n.trailing:m),E.cancel=function(){void 0!==f&&clearTimeout(f),g=0,u=d=c=f=void 0},E.flush=function(){return void 0===f?p:w(r())},E}},68:function(t,e,n){var i=n(38),r=n(228);t.exports=function(t){return r(i(t).toLowerCase())}},69:function(t,e,n){var i=n(124),r=n(165)(function(t,e,n){i(t,e,n)});t.exports=r},7:function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},70:function(t,e,n){var i=n(174),r=1,o=4;t.exports=function(t){return i(t,r|o)}},71:function(t,e){var n=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?n:e)&&("number"==r||"symbol"!=r&&i.test(t))&&t>-1&&t%1==0&&t<e}},72:function(t,e,n){"use strict";e.a={afterSort:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"afterId";if(0===t.length)return t;t.sort(function(t,n){return t.data[e]===n.data[e]&&null===t.data[e]?0:null===n.data[e]?1:null===t.data[e]?-1:0});var n=t.shift(),i=[n],r=n.id;for(;t.length>0;){var o=!0;if(t.forEach(function(n,s){n.data[e]===r&&(i.push(n),r=n.id,t.splice(s,1),o=!1)}),o){var s=t.shift();if(i.push(s),!t.length)break;r=s.data[e]}}return i}}},73:function(t,e){(function(e){t.exports=e}).call(this,{})},74:function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},75:function(t,e){t.exports=function(t){return t}},76:function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(24))},77:function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},78:function(t,e,n){var i=n(61),r=n(31);t.exports=function(t,e,n){(void 0===n||r(t[e],n))&&(void 0!==n||e in t)||i(t,e,n)}},79:function(t,e,n){var i=n(22),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},8:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},80:function(t,e,n){(function(t){var i=n(17),r=e&&!e.nodeType&&e,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===r?i.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=a?a(n):new t.constructor(n);return t.copy(i),i}}).call(this,n(45)(t))},81:function(t,e,n){var i=n(62);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},82:function(t,e,n){var i=n(17).Uint8Array;t.exports=i},83:function(t,e){t.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},84:function(t,e,n){var i=n(156),r=n(63),o=n(52);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:i(r(t))}},85:function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},86:function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},87:function(t,e,n){var i=n(61),r=n(31),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&r(s,n)&&(void 0!==n||e in t)||i(t,e,n)}},88:function(t,e,n){var i=n(162),r=n(47),o=n(14),s=n(33),a=n(71),l=n(53),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&r(t),h=!n&&!c&&s(t),p=!n&&!c&&!h&&l(t),f=n||c||h||p,d=f?i(t.length,String):[],g=d.length;for(var y in t)!e&&!u.call(t,y)||f&&("length"==y||h&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,g))||d.push(y);return d}},89:function(t,e,n){var i=n(52),r=n(177),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},9:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},90:function(t,e){t.exports=function(){return[]}},91:function(t,e,n){var i=n(65),r=n(63),o=n(64),s=n(90),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,o(t)),t=r(t);return e}:s;t.exports=a},92:function(t,e,n){var i=n(93),r=n(64),o=n(57);t.exports=function(t){return i(t,o,r)}},93:function(t,e,n){var i=n(65),r=n(14);t.exports=function(t,e,n){var o=e(t);return r(t)?o:i(o,n(t))}},94:function(t,e,n){var i=n(204),r=n(207),o=n(208),s=1,a=2;t.exports=function(t,e,n,l,u,c){var h=n&s,p=t.length,f=e.length;if(p!=f&&!(h&&f>p))return!1;var d=c.get(t);if(d&&c.get(e))return d==e;var g=-1,y=!0,v=n&a?new i:void 0;for(c.set(t,e),c.set(e,t);++g<p;){var m=t[g],_=e[g];if(l)var x=h?l(_,m,g,e,t,c):l(m,_,g,t,e,c);if(void 0!==x){if(x)continue;y=!1;break}if(v){if(!r(e,function(t,e){if(!o(v,e)&&(m===t||u(m,t,n,l,c)))return v.push(e)})){y=!1;break}}else if(m!==_&&!u(m,_,n,l,c)){y=!1;break}}return c.delete(t),c.delete(e),y}},95:function(t,e){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return n.test(t)}},959:function(t,e){t.exports='<sw-page class="moorl-merchant-finder-list">\n\n    <sw-sidebar slot="sidebar">\n\n        <sw-sidebar-item icon="default-arrow-360-left"\n                         :title="$t(\'moorl-merchant-finder.buttons.refreshButtonText\')"\n                         @click="onRefresh"></sw-sidebar-item>\n\n        <sw-sidebar-item icon="default-action-cloud-upload"\n                         :title="$t(\'moorl-merchant-finder.buttons.importButtonText\')"\n                         @click="onClickUpload"></sw-sidebar-item>\n        <form style="display: none;" ref="fileForm">\n            <input class="sw-plugin-file-upload__file-input"\n                   type="file"\n                   id="files"\n                   ref="fileInput"\n                   @change="onFileInputChange"/>\n        </form>\n\n        <sw-sidebar-item icon="default-action-cloud-download"\n                         :title="$t(\'moorl-merchant-finder.buttons.exportButtonText\')"\n                         @click="onClickDownload"></sw-sidebar-item>\n        <form id="exportCSV"\n              style="display: none;"\n              method="get"\n              action="api.moorl.merchant-finder.export">\n        </form>\n\n    </sw-sidebar>\n\n    <template slot="smart-bar-actions">\n\n        <sw-button variant="primary" :routerLink="{ name: \'moorl.merchant.finder.create\' }">\n            {{ $t(\'moorl-merchant-finder.buttons.addMerchantButtonText\') }}\n        </sw-button>\n\n    </template>\n\n    <template slot="content">\n\n        <sw-loader v-if="isImporting"></sw-loader>\n\n        <sw-entity-listing\n                v-if="merchants"\n                :items="merchants"\n                :repository="repository"\n                :showSelection="true"\n                :columns="columns"\n                :isLoading="isLoading"\n                detailRoute="moorl.merchant.finder.detail"\n                @select-item="updateSelection"\n                @update-records="updateTotal">\n\n            <template #column-active="{ item, isInlineEdit }">\n                <template v-if="isInlineEdit">\n                    <sw-checkbox-field v-model="item.active"></sw-checkbox-field>\n                </template>\n                <template v-else>\n                    <sw-icon v-if="item.active" name="small-default-checkmark-line-medium" small class="is--active"></sw-icon>\n                    <sw-icon v-else name="small-default-x-line-medium" small class="is--inactive"></sw-icon>\n                </template>\n            </template>\n\n            <template #column-locationLon="{ item }">\n                <span>{{ item.locationLon }}|{{ item.locationLat }}</span>\n            </template>\n\n            <template #preview-company="{ item }">\n                <sw-media-preview :source="item.mediaId"></sw-media-preview>\n            </template>\n\n        </sw-entity-listing>\n\n        <sw-modal v-if="showImportModal" @modal-close="onCloseModal" :title="$t(\'moorl-merchant-finder.importAssistant.title\')" variant="default">\n\n            <div v-if="csv.data.length == 0">\n                <p>{{ $t(\'moorl-merchant-finder.importAssistant.errorText\') }}</p>\n            </div>\n\n            <div v-if="csv.data.length > 0">\n\n                <p>{{ $t(\'moorl-merchant-finder.importAssistant.loadedText\', { count: csv.data.length }) }}</p>\n\n                <br>\n\n                <table class="moorl-merchant-finder-mapping-table" cellpadding="0" cellspacing="0">\n                    <thead>\n                    <tr class="">\n                        <th class="">{{ $t(\'moorl-merchant-finder.importAssistant.name\') }}</th>\n                        <th class="">{{ $t(\'moorl-merchant-finder.importAssistant.propertyName\') }}</th>\n                        <th class="">{{ $t(\'moorl-merchant-finder.importAssistant.target\') }}</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-for="schemaProperty in csv.schemaProperties"\n                        v-if="csv.filterSchemaProperties.indexOf(schemaProperty) === -1">\n                        <td>\n                            <div>{{ $t("moorl-merchant-finder.properties." + schemaProperty) }}</div>\n                        </td>\n                        <td>\n                            <div>{{ schemaProperty }}</div>\n                        </td>\n                        <td>\n                            <div>\n                                <select v-model="csv.propertyMapping[schemaProperty]">\n\n                                    <optgroup :label="$t(\'moorl-merchant-finder.importAssistant.fromImport\')">\n                                        <option v-for="csvProperty in csv.csvProperties" :value="csvProperty">{{ csvProperty }}</option>\n                                    </optgroup>\n\n                                    <optgroup :label="$t(\'moorl-merchant-finder.importAssistant.defined\')">\n                                        <option value>{{ $t(\'moorl-merchant-finder.importAssistant.noSelection\') }}</option>\n                                        <option value="1">true</option>\n                                        <option value="0">false</option>\n                                    </optgroup>\n\n                                    <optgroup :label="$t(\'moorl-merchant-finder.importAssistant.salesChannel\')">\n                                        <option v-for="salesChannel in salesChannels" :value="salesChannel.id">{{ salesChannel.name }}</option>\n                                    </optgroup>\n\n                                    <optgroup :label="$t(\'moorl-merchant-finder.importAssistant.country\')">\n                                        <option v-for="country in countries" :value="country.id">{{ country.name }}</option>\n                                    </optgroup>\n\n                                    <optgroup :label="$t(\'moorl-merchant-finder.importAssistant.customerGroup\')">\n                                        <option v-for="customerGroup in customerGroups" :value="customerGroup.id">{{ customerGroup.name }}</option>\n                                    </optgroup>\n\n                                </select>\n                            </div>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n\n                <sw-field type="switch" bordered :label="$t(\'moorl-merchant-finder.buttons.getLocButtonText\')" v-model="csv.options.getPosition"></sw-field>\n\n                <sw-field type="switch" bordered :label="$t(\'moorl-merchant-finder.buttons.overwriteText\')" v-model="csv.options.overwrite"></sw-field>\n\n            </div>\n\n            <template #modal-footer>\n                <sw-button @click="onCloseModal" size="small">\n                    {{ $t(\'moorl-merchant-finder.buttons.cancelButtonText\') }}\n                </sw-button>\n                <sw-button v-if="csv.data.length > 0"\n                           @click="onClickImport"\n                           variant="primary"\n                           size="small">\n                    {{ $t(\'moorl-merchant-finder.buttons.startImportButtonText\') }}\n                </sw-button>\n            </template>\n\n        </sw-modal>\n\n    </template>\n</sw-page>'},96:function(t,e,n){var i=n(89),r=n(37),o=n(47),s=n(14),a=n(32),l=n(33),u=n(52),c=n(53),h="[object Map]",p="[object Set]",f=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||c(t)||o(t)))return!t.length;var e=r(t);if(e==h||e==p)return!t.size;if(u(t))return!i(t).length;for(var n in t)if(f.call(t,n))return!1;return!0}},960:function(t,e){t.exports='<sw-page class="moorl-merchant-finder-detail">\n    <template slot="smart-bar-actions">\n        <sw-button :routerLink="{ name: \'moorl.merchant.finder.list\' }">\n            {{ $t(\'moorl-merchant-finder.buttons.cancelButtonText\') }}\n        </sw-button>\n\n        <sw-button-process\n                :isLoading="isLoading"\n                :processSuccess="processSuccess"\n                variant="primary"\n                @process-finish="saveFinish"\n                @click="onClickSave">\n            {{ $t(\'moorl-merchant-finder.buttons.saveButtonText\') }}\n        </sw-button-process>\n    </template>\n\n    <template slot="content">\n        <sw-card-view>\n\n            <sw-card :isLoading="isLoading" :title="$t(\'moorl-merchant-finder.label.accountCard\')">\n\n                <sw-container columns="repeat(auto-fit, minmax(250px, 1fr)" gap="0 30px">\n\n                    <div>\n\n                        <sw-field type="switch" bordered :label="$t(\'moorl-merchant-finder.properties.active\')" v-model="merchant.active"></sw-field>\n\n                        <sw-select-field :label="$t(\'moorl-merchant-finder.properties.salesChannelId\')" v-model="merchant.salesChannelId">\n                            <option></option>\n                            <option v-for="salesChannel in salesChannels" :value="salesChannel.id">{{ salesChannel.name }}</option>\n                        </sw-select-field>\n\n                        <sw-select-field :label="$t(\'moorl-merchant-finder.properties.customerGroupId\')" v-model="merchant.customerGroupId">\n                            <option></option>\n                            <option v-for="customerGroup in customerGroups" :value="customerGroup.id">{{ customerGroup.name }}</option>\n                        </sw-select-field>\n\n                        <sw-field type="textarea"\n                                  :label="$t(\'moorl-merchant-finder.properties.description\')"\n                                  :placeholder="$t(\'moorl-merchant-finder.properties.description\')"\n                                  name="description"\n                                  v-model="merchant.description">\n                        </sw-field>\n\n                        <sw-field type="textarea"\n                                  :label="$t(\'moorl-merchant-finder.properties.openingHours\')"\n                                  :placeholder="$t(\'moorl-merchant-finder.properties.openingHours\')"\n                                  name="openingHours"\n                                  v-model="merchant.openingHours">\n                        </sw-field>\n\n                        <div class="sw-field">\n                            <sw-upload-store-listener\n                                    :uploadTag="uploadTag"\n                                    autoUpload\n                                    @media-upload-finish="setMediaItem">\n                            </sw-upload-store-listener>\n                            <sw-media-upload\n                                    :uploadTag="uploadTag"\n                                    :source="merchant.mediaId"\n                                    class=""\n                                    :allowMultiSelect="false"\n                                    :label="$t(\'moorl-merchant-finder.properties.logo\')"\n                                    :defaultFolder="mediaStore.entityName"\n                                    variant="regular"\n                                    @sw-media-upload-media-upload-success="setMediaItem"\n                                    @media-drop="onDropMedia"\n                                    @media-upload-remove-image="onUnlinkLogo">\n                            </sw-media-upload>\n                        </div>\n\n                    </div>\n\n                    <div>\n                        <sw-field :label="$t(\'moorl-merchant-finder.properties.company\')" v-model="merchant.company"></sw-field>\n                        <sw-field :label="$t(\'moorl-merchant-finder.properties.title\')" v-model="merchant.title"></sw-field>\n                        <sw-field :label="$t(\'moorl-merchant-finder.properties.firstName\')" v-model="merchant.firstName"></sw-field>\n                        <sw-field :label="$t(\'moorl-merchant-finder.properties.lastName\')" v-model="merchant.lastName"></sw-field>\n                        <sw-field :label="$t(\'moorl-merchant-finder.properties.vatId\')" v-model="merchant.vatId"></sw-field>\n                        <sw-field :label="$t(\'moorl-merchant-finder.properties.email\')" v-model="merchant.email"></sw-field>\n                        <sw-field :label="$t(\'moorl-merchant-finder.properties.phoneNumber\')" v-model="merchant.phoneNumber"></sw-field>\n                        <sw-field :label="$t(\'moorl-merchant-finder.properties.shopUrl\')" v-model="merchant.shopUrl"></sw-field>\n                        <sw-field :label="$t(\'moorl-merchant-finder.properties.merchantUrl\')" v-model="merchant.merchantUrl"></sw-field>\n                    </div>\n\n                </sw-container>\n\n            </sw-card>\n\n            <sw-card :isLoading="isLoading" :title="$t(\'moorl-merchant-finder.label.addressCard\')">\n\n                <sw-container columns="repeat(auto-fit, minmax(250px, 1fr)" gap="0 30px">\n\n                    <sw-field :label="$t(\'moorl-merchant-finder.properties.street\')" v-model="merchant.street"></sw-field>\n                    <sw-field :label="$t(\'moorl-merchant-finder.properties.streetNumber\')" v-model="merchant.streetNumber"></sw-field>\n                    <sw-field :label="$t(\'moorl-merchant-finder.properties.zipcode\')" v-model="merchant.zipcode"></sw-field>\n                    <sw-field :label="$t(\'moorl-merchant-finder.properties.city\')" v-model="merchant.city"></sw-field>\n\n                    <sw-select-field :label="$t(\'moorl-merchant-finder.properties.countryId\')" v-model="merchant.countryId">\n                        <option v-for="country in countries" :value="country.id">{{ country.name }}</option>\n                    </sw-select-field>\n\n                    <sw-field :label="$t(\'moorl-merchant-finder.properties.countryCode\')" v-model="merchant.countryCode"></sw-field>\n\n                    <sw-field :label="$t(\'moorl-merchant-finder.properties.country\')" v-model="merchant.country"></sw-field>\n\n                </sw-container>\n\n            </sw-card>\n\n            <sw-card :isLoading="isLoading" :title="$t(\'moorl-merchant-finder.label.locationCard\')">\n\n                <div class="sw-field">\n                    <sw-button @click="getPositionByAddress">\n                        {{ $t(\'moorl-merchant-finder.buttons.getLocButtonText\') }}\n                    </sw-button>\n                    <sw-button @click="posSelect">\n                        {{ $t(\'moorl-merchant-finder.buttons.selectLocButtonText\') }}\n                    </sw-button>\n                    <sw-button @click="drawMap">\n                        {{ $t(\'moorl-merchant-finder.buttons.openMapButtonText\') }}\n                    </sw-button>\n                </div>\n\n                <div class="sw-field">\n                    <div id="embedMap"></div>\n                </div>\n\n                <sw-container columns="repeat(auto-fit, minmax(250px, 1fr)" gap="0 30px">\n                    <sw-field type="number" :step="0.00001" :label="$t(\'moorl-merchant-finder.properties.locationLat\')" v-model="merchant.locationLat"></sw-field>\n                    <sw-field type="number" :step="0.00001" :label="$t(\'moorl-merchant-finder.properties.locationLon\')" v-model="merchant.locationLon"></sw-field>\n                </sw-container>\n\n            </sw-card>\n\n        </sw-card-view>\n    </template>\n\n\n    <template slot="sidebar">\n        <sw-sidebar :propagateWidth="true">\n            <sw-sidebar-media-item ref="mediaSidebarItem">\n                <template slot="context-menu-items" slot-scope="media">\n                    <sw-context-menu-item @click="setMediaFromSidebar(media.mediaItem)">\n                        Logo\n                    </sw-context-menu-item>\n                </template>\n            </sw-sidebar-media-item>\n        </sw-sidebar>\n    </template>\n\n\n</sw-page>'},961:function(t){t.exports=JSON.parse('{"moorl-merchant-finder":{"general":{"mainMenuItemGeneral":"Händlersuche","descriptionTextModule":"Verwalte die Händler hier"},"importAssistant":{"title":"Import Assistent","loadedText":"Es wurden {count} Datensätze in deinem Import gefunden. Bitte wähle im nächsten Schritt die Zuweisungen aus","errorText":"Dein Import wurde leider nicht erkannt, möglicherweise verwendest du ein falsches Format. Format: Es wird kein Excel erkannt, bitte verwende das Format CSV. Kodierung: Excel CSV Exports verwenden ANSI (Windows-1252) Kodierung, bitte verwende UTF-8. Datensätze: Es muss mindestens ein Datensatz in dem Import stehen","name":"Name","propertyName":"Feldname","target":"Zuweisung","fromImport":"Aus Import","defined":"Feste Werte","country":"Länder","salesChannel":"Sales Channel","customerGroup":"Kundengruppe","categoryId":"Kategorie","noSelection":"-"},"notification":{"successTitle":"Erfolgreich","successText":"Alle Händler wurden erfolgreich importiert","importTitle":"Händler werden importiert","importText":"Dieser Vorgang kann einige Minuten dauern. Bitte habe etwas Geduld...","errorTitle":"Fehler beim Speichern des Händlers"},"buttons":{"saveButtonText":"Speichern","refreshButtonText":"Neu laden","addMerchantButtonText":"Neuer Händler","cancelButtonText":"Abbrechen","startImportButtonText":"Starte Import","importButtonText":"Import CSV","exportButtonText":"Export CSV","importButtonTitle":"Lade dein CSV hoch","exportButtonTitle":"Lade ein CSV runter","getLocButtonText":"Beschaffe Koordinaten","selectLocButtonText":"Auswählen","openMapButtonText":"Karte öffnen","overwriteText":"Bereits vorhandene Datensätze aktualisieren (originId muss gesetzt sein)."},"properties":{"logo":"Logo","location":"Koordinaten","originId":"Original ID","firstName":"Vorname","lastName":"Nachname","company":"Firma","email":"E-Mail","title":"Titel","active":"Aktiv","zipcode":"PLZ","city":"Stadt","street":"Straße","streetNumber":"Hausnummer","countryCode":"Länderkürzel","locationLat":"Breitengrad","locationLon":"Längengrad","department":"Filiale","vatId":"Steuer-ID","additionalAddressLine1":"Adressfeld 1","additionalAddressLine2":"Adressfeld 2","shopUrl":"Shop URL","merchantUrl":"Händler URL","createdAt":"Erstellt","updatedAt":"Aktualisiert","phoneNumber":"Telefon","openingHours":"Öffnungszeiten","description":"Beschreibung","salesChannelId":"Sales Channel","customerGroupId":"Kundengruppe","countryId":"Land","country":"Land"},"label":{"accountCard":"Stammdaten","locationCard":"Standort","addressCard":"Adresse"}}}')},962:function(t){t.exports=JSON.parse('{"moorl-merchant-finder":{"general":{"mainMenuItemGeneral":"Merchant Finder","descriptionTextModule":"Manage your Merchants here"},"importAssistant":{"title":"Import Assistant","loadedText":"There are {count} datarows in your file. Please configure datamapping in the next step.","errorText":"Something went wrong","name":"Name","propertyName":"Fieldname","target":"Mapping","fromImport":"From import","defined":"Fixed values","country":"Countries","salesChannel":"Sales channel","customerGroup":"Customer group","categoryId":"Category","noSelection":"-"},"notification":{"successTitle":"Success","successText":"All merchants have been imported","importTitle":"Merchants are importing now","importText":"This proccess could take a while, please calm...","errorTitle":"Some error while saving"},"buttons":{"saveButtonText":"Save","refreshButtonText":"Reload","addMerchantButtonText":"New merchant","cancelButtonText":"Cancel","startImportButtonText":"Start import","importButtonText":"Import CSV","exportButtonText":"Export CSV","importButtonTitle":"Upload your CSV","exportButtonTitle":"Download your CSV","getLocButtonText":"Get positions by OpenStreetMap","selectLocButtonText":"Chose","openMapButtonText":"Open Map","overwriteText":"Overwrite existing datarows (originId need to be set)."},"properties":{"logo":"Logo","location":"Position","originId":"Origin ID","firstName":"Firstname","lastName":"Lastname","company":"Company","email":"E-Mail","title":"Title","active":"Active","zipcode":"Zipcode","city":"City","street":"Street","streetNumber":"Number","countryCode":"Country code","locationLat":"Latitude","locationLon":"Longitude","department":"Department","vatId":"VAT-ID","additionalAddressLine1":"Address line 1","additionalAddressLine2":"Address line 2","shopUrl":"Shop URL","merchantUrl":"Merchant URL","createdAt":"Created at","updatedAt":"Updated at","phoneNumber":"Phone","openingHours":"Opening hours","description":"Description","salesChannelId":"Sales Channel","customerGroupId":"Customer group","countryId":"Country","country":"Country"},"label":{"accountCard":"General","locationCard":"Location","addressCard":"Address"}}}')},963:function(t,e){t.exports='{% block sw_cms_element_merchant_finder %}\n    <div class="sw-cms-el-merchant-finder">\n       [Merchant Finder] {{ element.config.title.value }}\n    </div>\n{% endblock %}\n'},964:function(t,e){t.exports='{% block sw_cms_element_merchant_finder_config %}\n    <div class="sw-cms-el-config-merchant-finder">\n        <sw-field v-model="element.config.title.value" type="text" label="Title"></sw-field>\n        <sw-field v-model="element.config.titleCss.value" type="text" label="Title class"></sw-field>\n        <sw-text-field label="Min height" v-model="element.config.minHeight.value"></sw-text-field>\n    </div>\n{% endblock %}\n'},965:function(t,e){t.exports='{% block sw_cms_element_merchant_finder_preview %}\n    <div class="sw-cms-el-preview-merchant-finder">\n        [Merchant Finder]\n    </div>\n{% endblock %}\n'},966:function(t,e){t.exports='{% block sw_cms_block_merchant_finder %}\n    <div class="sw-cms-block-merchant-finder">\n        <slot name="merchantFinder">{% block sw_cms_block_text_slot_merchant_finder_content %}{% endblock %}</slot>\n    </div>\n{% endblock %}\n'},967:function(t,e){t.exports='{% block sw_cms_block_merchant_finder_preview %}\n    <div class="sw-cms-preview-merchant-finder">\n        [Merchant Finder]\n    </div>\n{% endblock %}\n'},97:function(t,e,n){var i=n(201),r=n(34),o=n(35),s=o&&o.isRegExp,a=s?r(s):i;t.exports=a},98:function(t,e,n){var i=n(202),r=n(34),o=n(35),s=o&&o.isDate,a=s?r(s):i;t.exports=a},99:function(t,e,n){var i=n(16),r=n(14),o=n(13),s="[object String]";t.exports=function(t){return"string"==typeof t||!r(t)&&o(t)&&i(t)==s}}});